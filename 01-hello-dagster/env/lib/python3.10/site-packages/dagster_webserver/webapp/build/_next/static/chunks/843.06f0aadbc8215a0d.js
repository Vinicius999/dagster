"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{25945:function(e,n,t){t.d(n,{K:function(){return k},w:function(){return N}});var r=t(81862),i=t(85333),o=t(2281),s=t(58467),a=t(73235),l=t(22970),c=t(52322),d=t(38058),u=t(62540),p=t(2736),h=t(19369),x=t(42971),m=t(72096),f=t(87323),g=t(2784),j=t(47933),y=t(35505),v=t(67953),S=t(99339);function b(){var e=(0,a._)(["\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  padding: 3px;\n  margin-top: 2px;\n\n  :focus {\n    outline: none;\n  }\n\n  "," {\n    transition: background-color 100ms linear;\n  }\n\n  :hover "," {\n    background-color: ",";\n  }\n"]);return b=function(){return e},e}function _(){var e=(0,a._)(["\n  & li:not(:first-child)::after {\n    background: none;\n    font-size: 20px;\n    font-weight: bold;\n    color: #5c7080;\n    content: '/';\n    width: 8px;\n    line-height: 16px;\n  }\n"]);return _=function(){return e},e}function w(){var e=(0,a._)(["\n  color: ",";\n\n  :hover,\n  :active {\n    color: ",";\n  }\n"]);return w=function(){return e},e}var k=function(e){var n=e.assetKey,t=(0,o._)(e,["assetKey"]),a=(0,S.m)(),d=n.path.join("/"),j=(0,s._)(g.useState(!1),2),y=j[0],b=j[1],_=g.useRef(),w=g.useCallback((0,r._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return _.current&&clearTimeout(_.current),a(d),b(!0),[4,(0,v.B7)({icon:"done",intent:"primary",message:"Copied asset key!"})];case 1:return e.sent(),_.current=setTimeout(function(){b(!1)},2e3),[2]}})}),[a,d]),k=g.useMemo(function(){var e=[{text:"Assets",href:"/assets"}];return n.path.reduce(function(n,t){var r="".concat(n,"/").concat(encodeURIComponent(t));return e.push({text:t,href:r}),r},"/assets"),e},[n.path]);return(0,c.jsx)(u.m,(0,i._)({title:(0,c.jsxs)(p.x,{flex:{alignItems:"center",gap:4},style:{maxWidth:"600px",overflow:"hidden",marginBottom:4},children:[(0,c.jsx)(E,{items:k,currentBreadcrumbRenderer:function(e){var n=e.text;return(0,c.jsx)(h.X6,{children:n})},breadcrumbRenderer:function(e){var n=e.text,t=e.href;return(0,c.jsx)(h.X6,{children:(0,c.jsx)(P,{to:t||"#",children:n})})}}),(0,c.jsx)(x.u,{placement:"bottom",content:"Copy asset key",children:(0,c.jsx)(C,{onClick:w,children:(0,c.jsx)(m.JO,{name:y?"copy_to_clipboard_done":"copy_to_clipboard",color:f.w.Gray400})})})]})},t))},C=y.ZP.button.withConfig({componentId:"sc-4cd077c4-0"})(b(),m.a1,m.a1,f.w.Gray800),N=function(){return(0,c.jsx)(j.rU,{to:"/asset-groups",children:(0,c.jsxs)(p.x,{flex:{gap:4},children:[(0,c.jsx)(m.JO,{color:f.w.Link,name:"schema"}),"View global asset lineage"]})})},E=(0,y.ZP)(d.Oo).withConfig({componentId:"sc-4cd077c4-1"})(_()),P=(0,y.ZP)(j.rU).withConfig({componentId:"sc-4cd077c4-2"})(w(),f.w.Gray800,f.w.Gray800)},97765:function(e,n,t){t.d(n,{G:function(){return D}});var r=t(85333),i=t(6692),o=t(58467),s=t(73235),a=t(82550),l=t(52322),c=t(60138),d=t(28413),u=t(98353),p=t(2736),h=t(45),x=t(42033),m=t(47625),f=t(51269),g=t(72096),j=t(2784),y=t(7267),v=t(87905),S=t(63757),b=t(48608),_=t(97319),w=t(29545),k=t(83221),C=t(47424),N=t(88498),E=t(16369),P=t(72171),A=t(72224),R=t(33667),O=t(19618),I=t(41060),T=t(16201),F=t(39032);function $(){var e=(0,s._)(["\n  query PipelineRunsRootQuery($limit: Int, $cursor: String, $filter: RunsFilter!) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return $=function(){return e},e}var z=["status","tag","created_date_before","created_date_after"],D=function(e){(0,b.Px)();var n=(0,y.UO)().pipelinePath,t=e.repoAddress,s=void 0===t?null:t,c=(0,T.p3)(n),g=c.pipelineName,v=c.snapshotId,E=(0,R.Ux)(s),I=(0,R.E8)(E,g);(0,F.b)(c,I);var $=(0,o._)((0,C.oD)(z),2),D=$[0],q=$[1],H=j.useMemo(function(){return[I?{token:"job",value:g}:{token:"pipeline",value:g},v?{token:"snapshotId",value:v}:null].filter(Boolean)},[I,g,v]),M=(0,a._)(D).concat((0,a._)(H));if(s){var G={token:"tag",value:"".concat(w.H.RepositoryLabelTag,"=").concat((0,O.Wg)(s))};M.push(G)}var B=(0,N.l)({query:U,pageSize:25,variables:{filter:(0,i._)((0,r._)({},(0,C.VH)(M)),{pipelineName:g,snapshotId:v})},nextCursorForResult:function(e){var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]}}),V=B.queryResult,W=B.paginationProps,J=j.useCallback(function(e){var n=(0,d.HY)(e);D.some(function(e){return(0,d.HY)(e)===n})||q((0,a._)(D).concat([e]))},[D,q]),K=(0,S.C4)(V,S.dT),Q=(0,C.Vv)({enabledFilters:z,tokens:D,onChange:q,loading:V.loading}),Z=Q.button,Y=Q.activeFiltersJsx;return(0,l.jsx)(k.Lw.Provider,{value:{refetch:V.refetch},children:(0,l.jsx)(u.T,{children:(0,l.jsx)(P.g,{queryResult:V,allowStaleData:!0,children:function(e){var t=e.pipelineRunsOrError;if("Runs"!==t.__typename)return(0,l.jsx)(p.x,{padding:{vertical:64},children:(0,l.jsx)(h.t,{icon:"error",title:"Query Error",description:t.message})});var i=t.results.slice(0,25),o=W.hasNextCursor,a=W.hasPrevCursor;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(A.Y,{$top:0,children:(0,l.jsx)(_.AL,{runs:i,onAddTag:J,actionBarComponents:(0,l.jsxs)(p.x,{flex:{direction:"row",justifyContent:"space-between",grow:1,alignItems:"center",gap:4},margin:{right:8},children:[Z,(0,l.jsx)(S.xi,{refreshState:K})]}),belowActionBarComponents:(0,l.jsxs)(l.Fragment,{children:[H.map(function(e){var n=e.token,t=e.value;return(0,l.jsx)(x.V,{children:"".concat(n,":").concat(t)},n)}),Y.length?(0,l.jsxs)(l.Fragment,{children:[Y,(0,l.jsx)(m.Z,{onClick:function(){q([])},children:"Clear all"})]}):null]}),emptyState:function(){return(0,l.jsx)(L,{repoAddress:s,anyFilter:D.length>0,jobName:g,jobPath:n})}})}),o||a?(0,l.jsx)("div",{style:{marginTop:"20px"},children:(0,l.jsx)(f.pI,(0,r._)({},W))}):null]})}})})})},L=function(e){var n=e.repoAddress,t=e.anyFilter,r=e.jobName,i=e.jobPath,o=(0,R.Ux)(n),s=(0,R.Hb)(o,r);return(0,l.jsx)(p.x,{padding:{vertical:64},children:(0,l.jsx)(h.t,{icon:"run",title:"No runs found",description:n?s?(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not materialized any assets with this job yet."}),(0,l.jsx)("div",{children:(0,l.jsx)(E.A,{icon:(0,l.jsx)(g.JO,{name:"materialization"}),to:(0,I.$U)(n,"/jobs/".concat(i)),children:"Materialize an asset"})})]}):(0,l.jsxs)(p.x,{flex:{direction:"column",gap:12},children:[(0,l.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this job yet."}),(0,l.jsx)("div",{children:(0,l.jsx)(E.A,{icon:(0,l.jsx)(g.JO,{name:"add_circle"}),to:(0,I.$U)(n,"/jobs/".concat(i,"/playground")),children:"Launch a run"})})]}):(0,l.jsx)("div",{children:"You have not launched any runs for this job."})})})},U=(0,c.Ps)($(),_.ZZ,v.B)},72224:function(e,n,t){t.d(n,{Y:function(){return s}});var r=t(73235),i=t(87323);function o(){var e=(0,r._)(["\n  thead tr {\n    position: sticky;\n    top: ","px;\n    background-color: ",";\n    z-index: 1;\n  }\n\n  /**\n   * Safari won't render a box-shadow on the `tr` and we don't want an inset\n   * box-shadow on `th` elements because it will create a double-border on the\n   * bottom of the `thead` in the non-stuck state.\n   *\n   * We therefore render an absoulutely-positioned keyline on the bottom of the\n   * `th` elements. This will appear as a border in the stuck state, and will\n   * overlap the top box-shadow of the first row in the non-stuck state.\n   */\n  thead tr th {\n    position: relative;\n  }\n\n  thead tr th::after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: ",";\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n  }\n"],["\n  thead tr {\n    position: sticky;\n    top: ","px;\n    background-color: ",";\n    z-index: 1;\n  }\n\n  /**\n   * Safari won't render a box-shadow on the \\`tr\\` and we don't want an inset\n   * box-shadow on \\`th\\` elements because it will create a double-border on the\n   * bottom of the \\`thead\\` in the non-stuck state.\n   *\n   * We therefore render an absoulutely-positioned keyline on the bottom of the\n   * \\`th\\` elements. This will appear as a border in the stuck state, and will\n   * overlap the top box-shadow of the first row in the non-stuck state.\n   */\n  thead tr th {\n    position: relative;\n  }\n\n  thead tr th::after {\n    content: '';\n    display: block;\n    height: 1px;\n    background-color: ",";\n    position: absolute;\n    bottom: -1px;\n    left: 0;\n    right: 0;\n  }\n"]);return o=function(){return e},e}var s=t(35505).ZP.div.withConfig({componentId:"sc-518cab7f-0"})(o(),function(e){var n=e.$top;return void 0===n?0:n},i.w.White,i.w.KeylineGray)},38736:function(e,n,t){t.d(n,{i:function(){return x}});var r=t(58467),i=t(52322),o=t(42971),s=t(70399),a=t(72096),l=t(80572),c=t(2784),d=t(90951),u=t(14590),p=t(63013),h=t(48908),x=function(e){var n=e.label,t=void 0===n?"Reload all":n,x=(0,d.WB)(),m=x.permissions.canReloadWorkspace,f=x.disabledReasons,g=(0,p.Dc)({scope:"workspace",reloadFn:p.rL}),j=g.reloading,y=g.tryReload,v=g.error,S=g.errorLocationId,b=(0,r._)(c.useState(!!v),2),_=b[0],w=b[1];return(c.useEffect(function(){return w(!!v)},[v]),m)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.zx,{onClick:y,icon:(0,i.jsx)(a.JO,{name:"refresh"}),loading:j,intent:"none",children:t}),S?(0,i.jsx)(h.V,{error:v,location:S,reloading:j,onTryReload:y,onDismiss:function(){return w(!1)},isOpen:_}):(0,i.jsxs)(l.Vq,{icon:"error",title:"Reload error",canEscapeKeyClose:!1,canOutsideClickClose:!1,style:{width:"90%"},isOpen:_,children:[(0,i.jsx)(l.a7,{children:v&&(0,i.jsx)(u.T9,{error:v})}),(0,i.jsx)(l.cN,{children:(0,i.jsx)(s.zx,{onClick:function(){return w(!1)},children:"Dismiss"})})]})]}):(0,i.jsx)(o.u,{content:f.canReloadWorkspace,children:(0,i.jsx)(s.zx,{icon:(0,i.jsx)(a.JO,{name:"refresh"}),disabled:!0,intent:"none",children:t})})}},63843:function(e,n,t){t.r(n),t.d(n,{WorkspaceRoot:function(){return iT},default:function(){return iF}});var r,i,o,s=t(52322),a=t(2736),l=t(45),c=t(95690),d=t(2784),u=t(7267),p=t(73235),h=t(60138),x=t(40794),m=t(98353),f=t(62540),g=t(19369),j=t(11780),y=t(42033),v=t(48608),S=t(64029),b=t(34503),_=t(3358),w=t(16201),k=t(89072),C=t(38736),N=t(41060),E=t(25945),P=t(70957),A=t(20904),R=t(50292);function O(){var e=(0,p._)(["\n  query AssetGroupMetadataQuery($selector: AssetGroupSelector!) {\n    assetNodes(group: $selector) {\n      id\n      autoMaterializePolicy {\n        policyType\n      }\n    }\n  }\n"]);return O=function(){return e},e}var I=function(e){var n=e.repoAddress,t=e.tab;(0,v.Px)();var r=(0,u.UO)(),i=r.groupName,o=r[0],l=(0,u.k6)();(0,b.j)("Asset Group: ".concat(i));var c=(0,N.$U)(n,"/asset-groups/".concat(i)),p=d.useMemo(function(){return{groupName:i,repositoryLocationName:n.location,repositoryName:n.name}},[i,n]),h=d.useCallback(function(e,n){l[n]("".concat(c,"/").concat((0,w.gY)(e)))},[c,l]),x=d.useCallback(function(e){e.groupName&&e.repoAddress?l.push((0,N.$U)(e.repoAddress,"/asset-groups/".concat(e.groupName,"/lineage/").concat(e.assetKey.path.map(encodeURIComponent).join("/")))):l.push((0,R.p)(e.assetKey,{view:"definition"}))},[l]);return(0,s.jsxs)(m.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,s.jsx)(f.m,{title:(0,s.jsx)(g.X6,{children:i}),right:(0,s.jsx)("div",{style:{marginBottom:-8},children:(0,s.jsx)(C.i,{label:"Reload definitions"})}),tags:(0,s.jsx)(F,{groupSelector:p,repoAddress:n}),tabs:(0,s.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},margin:{right:4},children:[(0,s.jsxs)(j.mQ,{selectedTabId:t,children:[(0,s.jsx)(k.f,{id:"lineage",title:"Lineage",to:"".concat(c,"/lineage")}),(0,s.jsx)(k.f,{id:"list",title:"List",to:"".concat(c,"/list")})]}),(0,s.jsx)(E.w,{})]})}),"lineage"===t?(0,s.jsx)(S.OK,{fetchOptions:{groupSelector:p},options:{preferAssetRendering:!0,explodeComposites:!0},explorerPath:(0,w.p3)(o||"lineage/"),onChangeExplorerPath:h,onNavigateToSourceAssetNode:x}):(0,s.jsx)(P.fv,{groupSelector:p,prefixPath:o.split("/").map(decodeURIComponent).filter(Boolean),setPrefixPath:function(e){return l.push("".concat(c,"/list/").concat(e.map(encodeURIComponent).join("/")))}})]})},T=(0,h.Ps)(O()),F=function(e){var n,t=e.repoAddress,r=e.groupSelector,i=(0,x.a)(T,{variables:{selector:r}}).data;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(y.V,{icon:"asset_group",children:["Asset Group in ",(0,s.jsx)(_.b,{repoAddress:t})]}),(null==i?void 0:null===(n=i.assetNodes)||void 0===n?void 0:n.some(function(e){return!!e.autoMaterializePolicy}))&&(0,s.jsx)(A.mM,{})]})},$=t(67033),z=t(58467),D=t(22834),L=t(90951),U=t(87905),q=t(39032),H=t(33667),M=t(29705),G=t(10598);function B(){var e=(0,p._)(["\n  query ConfigForRunQuery($runId: ID!) {\n    runOrError(runId: $runId) {\n      ... on Run {\n        id\n        mode\n        runConfigYaml\n        solidSelection\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return B=function(){return e},e}var V=function(e){var n=e.repoAddress,t=(0,L.xz)(n.location).permissions.canLaunchPipelineExecution,r=(0,u.UO)(),i=r.repoPath,o=r.pipelinePath,a=r.runId;return t?(0,s.jsx)(W,{pipelinePath:o,repoAddress:n,runId:a}):(0,s.jsx)(u.l_,{to:"/locations/".concat(i,"/pipeline_or_job/").concat(o)})},W=function(e){var n=e.pipelinePath,t=e.repoAddress,r=e.runId,i=(0,w.p3)(n),o=i.pipelineName,a=(0,H.Ux)(t),l=(0,H.E8)(a,o);(0,q.b)(i,l);var c=(0,z._)((0,D.aC)(t,o),2),p=c[0],h=c[1],m=(0,x.a)(J,{variables:{runId:r}}),f=m.data,g=m.loading,j=null==f?void 0:f.runOrError,y=(null==j?void 0:j.__typename)==="Run"?j:null;return(d.useEffect(function(){if(y){var e=y.runConfigYaml,n=y.mode,t=y.solidSelection;if(e||n||t){var r={name:"From run ".concat(y.id.slice(0,8))};"string"==typeof e&&(r.runConfigYaml=e),"string"==typeof n&&(r.mode=n),t instanceof Array&&t.length>0?r.solidSelection=t:"string"==typeof t&&t&&(r.solidSelection=[t]),h((0,D.f0)(p,r))}}},[y,p,h]),g)?(0,s.jsx)(G.m,{}):j&&"RunNotFoundError"!==j.__typename?"PythonError"===j.__typename?(0,s.jsx)(M.U,{icon:"error",title:"Python error",description:j.message}):(0,s.jsx)(u.l_,{to:{pathname:(0,N.$U)(t,"/".concat(l?"jobs":"pipelines","/").concat(o,"/playground"))}}):(0,s.jsx)(M.U,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})},J=(0,h.Ps)(B(),U.B),K=t(19126),Q=t.n(K),Z=function(e){var n=e.repoAddress,t=(0,L.xz)(n.location).permissions.canLaunchPipelineExecution,r=(0,u.UO)(),i=r.repoPath,o=r.pipelinePath;return t?(0,s.jsx)(Y,{pipelinePath:o,repoAddress:n}):(0,s.jsx)(u.l_,{to:"/locations/".concat(i,"/pipeline_or_job/").concat(o)})},Y=function(e){var n=e.pipelinePath,t=e.repoAddress,r=(0,w.p3)(n),i=r.pipelineName,o=(0,H.Ux)(t),a=(0,H.E8)(o,i);(0,q.b)(r,a);var l=(0,z._)((0,D.aC)(t,i),2),c=l[0],p=l[1],h=Q().parse(window.location.search,{ignoreQueryPrefix:!0});return d.useEffect(function(){if(h.config||h.mode||h.solidSelection||h.tags||h.assetSelection){var e={};"string"==typeof h.config&&(e.runConfigYaml=h.config),"string"==typeof h.mode&&(e.mode=h.mode),h.solidSelection instanceof Array&&h.solidSelection.length>0?e.solidSelection=h.solidSelection:"string"==typeof h.solidSelection&&h.solidSelection&&(e.solidSelection=[h.solidSelection]),"string"==typeof h.solidSelectionQuery&&(e.solidSelectionQuery=h.solidSelectionQuery),Array.isArray(h.tags)&&(e.tags=h.tags),Array.isArray(h.assetSelection)&&(e.assetSelection=h.assetSelection),p((0,D.f0)(c,e))}}),(0,s.jsx)(u.l_,{to:{pathname:(0,N.$U)(t,"/".concat(a?"jobs":"pipelines","/").concat(i,"/playground"))}})},X=t(44715),ee=t(96651),en=t(47625),et=t(87323),er=t(80572),ei=t(70399),eo=t(75652),es=t.n(eo),ea=t(47933),el=t(28292),ec=t(29545),ed=t(83221),eu=t(78478),ep=t(713),eh=t(19618),ex=t(42971),em=t(37395),ef=t(63757),eg=t(7334),ej=t(8181),ey=t(48265),ev=t(30082);function eS(){var e=(0,p._)(["\n  query LatestRunTagQuery($runsFilter: RunsFilter) {\n    pipelineRunsOrError(filter: $runsFilter, limit: 1) {\n      ... on PipelineRuns {\n        results {\n          id\n          status\n          ...RunTimeFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return eS=function(){return e},e}var eb={showSeconds:!0,showTimezone:!1},e_=function(e){var n=e.pipelineName,t=e.repoAddress,r=(0,x.a)(ew,{variables:{runsFilter:{pipelineName:n,tags:[{key:ec.H.RepositoryLabelTag,value:(0,eh.Wg)(t)}]}},notifyOnNetworkStatusChange:!0});(0,ef.C4)(r,ef.dT);var i=d.useMemo(function(){var e,n=null===(e=r.data)||void 0===e?void 0:e.pipelineRunsOrError;return n&&"Runs"===n.__typename&&n.results[0]||null},[r]);if(!i)return null;var o={start:i.startTime,end:i.endTime,status:i.status};return(0,s.jsx)(y.V,{intent:function(){switch(i.status){case eg.VOA.SUCCESS:return"success";case eg.VOA.CANCELED:case eg.VOA.CANCELING:case eg.VOA.FAILURE:return"danger";default:return"none"}}(),children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,s.jsx)(ej.K9,{status:i.status,size:10}),"Latest run:",o?(0,s.jsx)(ex.u,{placement:"bottom",content:(0,s.jsx)(em.k6,{children:(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{color:et.w.Gray300},children:(0,s.jsx)(a.x,{padding:{right:16},children:"Started"})}),(0,s.jsx)("td",{children:o.start?(0,s.jsx)(ev.v,{timestamp:o.start,timeFormat:eb}):(0,ey.Z0)(o.status)})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{color:et.w.Gray300},children:"Ended"}),(0,s.jsx)("td",{children:o.end?(0,s.jsx)(ev.v,{timestamp:o.end,timeFormat:eb}):(0,ey.Z0)(o.status)})]})]})}),children:(0,s.jsx)(ea.rU,{to:"/runs/".concat(i.id),children:(0,s.jsx)(ed.Zr,{run:i})})}):null]})})},ew=(0,h.Ps)(eS(),ed.$X),ek=t(24334);function eC(){var e=(0,p._)(["\n  query JobMetadataQuery($params: PipelineSelector!, $runsFilter: RunsFilter!) {\n    pipelineOrError(params: $params) {\n      ... on Pipeline {\n        id\n        ...JobMetadataFragment\n      }\n    }\n    assetNodes(pipeline: $params) {\n      id\n      ...JobMetadataAssetNode\n    }\n    pipelineRunsOrError(filter: $runsFilter, limit: 5) {\n      ... on PipelineRuns {\n        results {\n          id\n          ...RunMetadataFragment\n        }\n      }\n    }\n  }\n\n  fragment JobMetadataAssetNode on AssetNode {\n    id\n    autoMaterializePolicy {\n      policyType\n    }\n    assetKey {\n      path\n    }\n  }\n\n  fragment JobMetadataFragment on Pipeline {\n    id\n    isJob\n    name\n    schedules {\n      id\n      mode\n      ...ScheduleSwitchFragment\n    }\n    sensors {\n      id\n      targets {\n        pipelineName\n        mode\n      }\n      ...SensorSwitchFragment\n    }\n  }\n\n  fragment RunMetadataFragment on PipelineRun {\n    id\n    status\n    assets {\n      id\n      key {\n        path\n      }\n    }\n    ...RunTimeFragment\n  }\n\n  ","\n  ","\n  ","\n"]);return eC=function(){return e},e}var eN=function(e){var n,t=e.pipelineName,r=e.repoAddress,i=(n=(0,x.a)(eA,{variables:{runsFilter:{pipelineName:t,tags:[{key:ec.H.RepositoryLabelTag,value:(0,eh.Wg)(r)}]},params:{pipelineName:t,repositoryName:r.name,repositoryLocationName:r.location}}}).data,d.useMemo(function(){return{assetNodes:(null==n?void 0:n.assetNodes)||null,job:(null==n?void 0:n.pipelineOrError)&&"Pipeline"===n.pipelineOrError.__typename?n.pipelineOrError:null,runsForAssetScan:(null==n?void 0:n.pipelineRunsOrError)&&"Runs"===n.pipelineRunsOrError.__typename?n.pipelineRunsOrError.results:[]}},[n]));return(0,s.jsxs)(s.Fragment,{children:[i.job?(0,s.jsx)(eE,{job:i.job,repoAddress:r}):null,(0,s.jsx)(e_,{pipelineName:t,repoAddress:r}),i.assetNodes&&i.assetNodes.some(function(e){return!!e.autoMaterializePolicy})&&(0,s.jsx)(A.mM,{}),i.runsForAssetScan?(0,s.jsx)(eP,{relatedAssets:i.assetNodes?i.assetNodes.map(function(e){return(0,el.Je)(e.assetKey)}):es()(i.runsForAssetScan.flatMap(function(e){return e.assets.map(function(e){return(0,el.Je)(e.key)})}))}):null]})},eE=function(e){var n=e.job,t=e.repoAddress,r=d.useMemo(function(){return(null==n?void 0:n.__typename)==="Pipeline"&&n.schedules.length?n.schedules:[]},[n]),i=d.useMemo(function(){return(null==n?void 0:n.__typename)==="Pipeline"&&n.sensors.length?n.sensors:[]},[n]);return(0,s.jsx)(ek.I,{schedules:r,sensors:i,repoAddress:t})},eP=function(e){var n=e.relatedAssets,t=(0,z._)(d.useState(!1),2),r=t[0],i=t[1];if(0===n.length)return null;if(1===n.length){var o=n[0];return(0,s.jsxs)(y.V,{icon:"asset",children:["Asset: ",(0,s.jsx)(ea.rU,{to:"/assets/".concat(o),children:o})]})}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.V,{icon:"asset",children:(0,s.jsx)(en.Z,{color:et.w.Link,onClick:function(){return i(!0)},children:"View ".concat(n.length," assets")})}),(0,s.jsxs)(er.Vq,{title:"Related assets",canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:r,onClose:function(){return i(!1)},style:{maxWidth:"80%",minWidth:"500px",width:"auto"},children:[n.map(function(e,t){return(0,s.jsx)(a.x,{padding:{vertical:12,horizontal:20},border:t<n.length-1?"bottom":null,children:(0,s.jsx)(ea.rU,{to:"/assets/".concat(e),style:{wordBreak:"break-word"},children:e},e)},e)}),(0,s.jsx)(er.cN,{topBorder:!0,children:(0,s.jsx)(ei.zx,{intent:"primary",onClick:function(){return i(!1)},children:"OK"})})]})]})},eA=(0,h.Ps)(eC(),eu.J,ep.U,ed.$X),eR=function(e){var n=e.repoAddress,t=(0,L.xz)(n.location),r=d.useContext(X.v).tabBuilder,i=(0,u.$B)(["/locations/:repoPath/pipelines/:selector/:tab?","/locations/:repoPath/jobs/:selector/:tab?","/locations/:repoPath/pipeline_or_job/:selector/:tab?"]),o=(0,w.p3)(i.params.selector),l=o.pipelineName,c=o.snapshotId,p=(0,H.Ux)(n),h=null==p?void 0:p.repository.pipelines.find(function(e){return e.name===l}),x=!!(null==h?void 0:h.isJob),m=r({hasLaunchpad:!(null==h?void 0:h.isAssetJob),hasPartitionSet:((null==p?void 0:p.repository.partitionSets)||[]).some(function(e){return e.pipelineName===l})});return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(f.m,{title:(0,s.jsx)(g.X6,{children:l}),tags:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:8,wrap:"wrap"},children:[(0,s.jsxs)(y.V,{icon:"job",children:[x?"Job in ":"Pipeline in ",(0,s.jsx)(_.b,{repoAddress:n})]}),c?null:(0,s.jsx)(eN,{pipelineName:l,repoAddress:n})]}),tabs:(0,s.jsx)(ee.IJ,{repoAddress:n,isJob:x,explorerPath:o,permissions:t,matchingTab:i.params.tab,tabs:m})})})};function eO(){var e=(0,p._)(["\n  query AssetJobPartitionSetsQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n          mode\n          solidSelection\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return eO=function(){return e},e}var eI=(0,h.Ps)(eO(),U.B),eT=t(72171),eF=t(85333),e$=t(6692),ez=t(85112),eD=t(49995),eL=t(95580),eU=t(19229),eq=t(97107),eH=t(64013),eM=t(30895),eG=t(82550),eB=t(51269),eV=t(75262);function eW(){var e=(0,p._)(["\n  query JobBackfillsQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n    $cursor: String\n    $limit: Int\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        pipelineName\n        backfills(cursor: $cursor, limit: $limit) {\n          id\n          ...BackfillTableFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return eW=function(){return e},e}var eJ=function(e){var n=e.partitionSetName,t=e.partitionNames,r=e.repositorySelector,i=e.refetchCounter,o=(0,z._)(d.useState(function(){return[]}),2),c=o[0],u=o[1],p=(0,z._)(d.useState(),2),h=p[0],m=p[1],f=(0,x.a)(eK,{variables:{partitionSetName:n,repositorySelector:r,cursor:h,limit:10}}),g=f.refetch;return d.useEffect(function(){i&&g()},[g,i]),(0,s.jsx)(eT.g,{queryResult:f,children:function(e){var n=e.partitionSetOrError;if("PartitionSetNotFoundError"===n.__typename)return(0,s.jsx)(a.x,{margin:{vertical:20},children:(0,s.jsx)(l.t,{title:"Partition set not found.",icon:"no-results"})});if("PythonError"===n.__typename)return(0,s.jsx)(a.x,{margin:{vertical:20},children:(0,s.jsx)(l.t,{title:"An error occurred.",icon:"no-results"})});var r=n.backfills,i=n.pipelineName;if(!r.length)return(0,s.jsx)(a.x,{margin:{vertical:20},children:(0,s.jsx)(l.t,{title:"No backfills for ".concat(i),icon:"no-results"})});var o={hasPrevCursor:!!h,hasNextCursor:r&&10===r.length,popCursor:function(){var e=(0,eG._)(c);m(e.pop()),u(e)},advanceCursor:function(){h&&u(function(e){return(0,eG._)(e).concat([h])});var e=r&&r[r.length-1].id;e&&m(e)},reset:function(){u([]),m(void 0)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eV.G,{backfills:r,refetch:g,showBackfillTarget:!1,allPartitions:t}),(0,s.jsx)(eB.b$,(0,eF._)({},o))]})}})},eK=(0,h.Ps)(eW(),eV.b),eQ=t(91588),eZ=t(72096),eY=t(14590),eX=t(81862),e0=t(22970),e1=t(33379),e2=t(29403),e4=t(33467),e3=t(1258),e6=t(29668),e5=t(21408),e8=t(73252),e7=t(81679),e9=t(32606),ne=t(9820),nn=t(82397),nt=t(27330),nr=t(14258),ni=t(87612),no=t(50743),ns=t(1176),na=function(e){var n=e.counts,t=e.value,r=e.onChange,i=e.allowed,o=e.disabled;return(0,s.jsx)(a.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:i.map(function(e){return(0,s.jsx)(e2.X,{"data-testid":(0,ns.N)("run-status-".concat(e,"-checkbox")),disabled:o,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:t.includes(e)&&!o,label:"".concat((0,no.fi)(e)," (").concat(n[e],")"),onChange:function(){return r(t.includes(e)?t.filter(function(n){return n!==e}):(0,eG._)(t).concat([e]))}},e)})})};function nl(){var e=(0,p._)(["\n  query BackfillSelectorQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n    }\n    instance {\n      id\n      ...UsingDefaultLauncherAlertInstanceFragment\n      ...DaemonNotRunningAlertInstanceFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return nl=function(){return e},e}var nc=function(e){var n=e.partitionSetName,t=e.onLaunch,r=e.onCancel,i=e.onSubmit,o=e.repoAddress,c=e.runStatusData,p=e.pipelineName,h=e.partitionNames,m=(0,u.k6)(),f=(0,z._)(d.useState(Object.keys(c).filter(function(e){return!c[e]||c[e]===eg.VOA.FAILURE})),2),g=f[0],j=f[1],y=(0,z._)(d.useState([eg.VOA.NOT_STARTED,eg.VOA.FAILURE]),2),v=y[0],S=y[1],b=d.useMemo(function(){return g.filter(function(e){return v.includes(c[e])})},[g,v,c]),_=(0,z._)(d.useState(!1),2),w=_[0],k=_[1],C=(0,z._)(d.useState([]),2),N=C[0],E=C[1],P=(0,z._)(d.useState(""),2),A=P[0],R=P[1],O=(0,z._)(d.useState({reexecute:!1,fromFailure:!1}),2),I=O[0],T=O[1],F=(0,eM.$)(o),$=(0,x.a)(nu,{variables:{pipelineSelector:(0,e$._)((0,eF._)({},F),{pipelineName:p})},fetchPolicy:"network-only"}).data,D=d.useRef(!0);if(d.useEffect(function(){return D.current=!0,function(){D.current=!1}},[t]),!$)return(0,s.jsx)(a.x,{margin:{vertical:32},flex:{justifyContent:"center"},children:(0,s.jsx)(eQ.$,{purpose:"section"})});if("PipelineSnapshot"!==$.pipelineSnapshotOrError.__typename)return(0,s.jsx)(a.x,{margin:20,children:(0,s.jsx)(l.t,{icon:"error",title:"Could not fetch job details"})});var L=$.pipelineSnapshotOrError,U=$.instance,q=(0,e9.i)(L.solidHandles).map(function(e){return e.solid}),H=(0,e4.V)(q,A),M=(0,e6.tc)({nodes:H.all,mode:e3.hS.FLAT}).boxes.map(function(e){return{x:e.x,name:e.node.name}}),G=function(e){return c[e]===eg.VOA.FAILURE},B=h.filter(G),V=function(e){var n=(o={},(0,ni._)(o,eg.VOA.SUCCESS,0),(0,ni._)(o,eg.VOA.NOT_STARTED,0),(0,ni._)(o,eg.VOA.FAILURE,0),(0,ni._)(o,eg.VOA.QUEUED,0),(0,ni._)(o,eg.VOA.STARTED,0),o),t=!0,r=!1,i=void 0;try{for(var o,s,a=e[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var l=s.value;n[l.state]=(n[l.state]||0)+1}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}(g.map(function(e){return{partitionKey:e,state:c[e]}}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(er.a7,{children:(0,s.jsxs)(a.x,{flex:{direction:"column",gap:24},children:[(0,s.jsxs)(np,{title:"Partitions",children:[(0,s.jsx)(a.x,{children:"Select partitions to materialize. Click and drag to select a range on the timeline."}),(0,s.jsx)(nr.x,{selected:g,setSelected:function(e){var n=new Set(e);j(h.filter(function(e){return n.has(e)})),I.fromFailure&&e.filter(function(e){return!G(e)}).length>0&&T((0,e$._)((0,eF._)({},I),{fromFailure:!1}))},health:{runStatusForPartitionKey:function(e){return c[e]}},partitionKeys:h,dimensionType:(0,eq.vH)(h[0])?eg.iVC.TIME_WINDOW:eg.iVC.STATIC}),(0,s.jsx)(na,{value:v,onChange:S,counts:V,allowed:I.fromFailure?[eg.VOA.FAILURE]:[eg.VOA.NOT_STARTED,eg.VOA.FAILURE,eg.VOA.QUEUED,eg.VOA.STARTED,eg.VOA.SUCCESS]})]}),B.length?(0,s.jsx)(np,{title:"Reexecution",children:(0,s.jsx)(e2.X,{checked:I.fromFailure,disabled:!b.every(G),onChange:function(){var e=(0,e$._)((0,eF._)({},I),{fromFailure:!I.fromFailure,reexecute:!I.reexecute});e.fromFailure&&S([eg.VOA.FAILURE]),R(""),T(e)},label:(0,s.jsxs)(a.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,s.jsx)(a.x,{margin:{right:4},children:"Re-execute from failures"}),(0,s.jsx)(ex.u,{placement:"top",content:"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed. Only applies for selections of failed partitions.",children:(0,s.jsx)(eZ.JO,{name:"info",color:et.w.Gray500})})]})})}):null,(0,s.jsx)(np,{title:(0,s.jsxs)(a.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,s.jsx)(a.x,{margin:{right:4},children:"Step subset"}),(0,s.jsx)(ex.u,{placement:"top",content:"Applies a step-selection to each run for the requested partitions.",children:(0,s.jsx)(eZ.JO,{name:"info",color:et.w.Gray500})})]}),children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,s.jsx)(nn.j,{disabled:I.fromFailure,width:520,items:q,value:A,placeholder:"Type a step subset",onChange:R,autoApplyChanges:!0}),A?(0,s.jsxs)("div",{style:{color:et.w.Gray500},children:[M.length," step",1===M.length?"":"s"," selected"]}):null]})}),(0,s.jsxs)(np,{title:"Tags",children:[(0,s.jsx)(e7.U,{tagsFromSession:N,onChange:E,open:w,onRequestClose:function(){return k(!1)}}),N.length?(0,s.jsx)("div",{style:{border:"1px solid ".concat(et.w.Gray300),borderRadius:8,padding:3},children:(0,s.jsx)(e7.x,{tagsFromSession:N,onRequestEdit:function(){return k(!0)}})}):(0,s.jsx)("div",{children:(0,s.jsx)(ei.zx,{onClick:function(){return k(!0)},children:"Add tags to backfill runs"})})]}),(0,s.jsxs)(a.x,{flex:{direction:"column",gap:16},children:[(0,s.jsx)(nt.So,{instance:U}),(0,s.jsx)(nt.d,{instance:U})]})]})}),(0,s.jsxs)(er.cN,{children:[(0,s.jsx)(ei.zx,{intent:"none",onClick:r,children:"Cancel"}),(0,s.jsx)(nd,{partitionNames:b,partitionSetName:n,reexecutionSteps:!I.fromFailure&&H.all.length<q.length?M.map(function(e){return e.name}):void 0,fromFailure:I.fromFailure,tags:N,onSubmit:i,onSuccess:function(e){(0,nt.Xd)(m,e,!1),null==t||t(e,A)},onError:function(e){(0,nt.mv)(e)},repoAddress:o})]})]})},nd=function(e){var n,t=e.partitionSetName,r=e.partitionNames,i=e.reexecutionSteps,o=e.fromFailure,a=e.tags,l=e.onSuccess,c=e.onError,u=e.onSubmit,p=e.repoAddress,h=(0,eM.$)(p),x=d.useRef(!0),m=(0,z._)((0,e1.D)(e5.f),2),f=m[0],g=m[1].loading;d.useEffect(function(){return x.current=!0,function(){x.current=!1}},[l]);var j=(n=(0,eX._)(function(){var e,n,s;return(0,e0.Jh)(this,function(d){switch(d.label){case 0:return u(),[4,f({variables:{backfillParams:{selector:{partitionSetName:t,repositorySelector:h},partitionNames:r,reexecutionSteps:i,fromFailure:o,tags:a}}})];case 1:if(e=d.sent().data,!x.current)return[2];return e&&"LaunchBackfillSuccess"===e.launchPartitionBackfill.__typename?null===(n=l)||void 0===n||n(e.launchPartitionBackfill.backfillId,!1):null===(s=c)||void 0===s||s(e),[2]}})}),function(){return n.apply(this,arguments)}),y=r.length,v=null==i?void 0:i.length,S=[g?"Submitting ".concat(y," ").concat(1===y?"run":"runs","…"):y?"Submit ".concat(y," ").concat(1===y?"run":"runs"):"Select partitions to submit",!g&&v?"(".concat(v," selected ").concat(1===v?"step":"steps",")"):""].join(" ");return(0,s.jsx)(e8.C,{runCount:y,config:{title:S,icon:"open_in_new",disabled:!y||g,onClick:j}})},nu=(0,h.Ps)(nl(),ne.Q,nt.op,nt.EC),np=function(e){var n=e.title,t=e.children;return(0,s.jsxs)(a.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(g.pm,{children:n}),(0,s.jsx)(a.x,{flex:{direction:"column",gap:8},padding:{top:16},border:"top",children:t})]})},nh=t(343),nx=t(35505),nm=t(61893);function nf(){var e=(0,p._)(["\n  display: flex;\n  color: ",";\n  padding: 24px 12px;\n  text-decoration: none;\n"]);return nf=function(){return e},e}var ng=function(e){var n,t,r=e.partitionNames,i=e.jobDataByPartition,o=e.stepDataByPartition,a=e.title,l=e.yLabel,c=e.isJob,u=e.hiddenStepKeys,p=(0,z._)(d.useState(function(){return{}}),2),h=p[0],x=p[1],m=d.useRef(null),f=d.useCallback(function(e){var n=m.current;if(n){var t=n.scales["x-axis-0"];if(t){var r=e.offsetX,i=e.offsetY;if("click"===e.type&&r<=n.chartArea.right&&r>=n.chartArea.left&&i<=n.chartArea.bottom&&i>=n.chartArea.top&&e.shiftKey){var o=t.getValueForPixel(r),s=n.data.labels[o];x(function(e){return(0,e$._)((0,eF._)({},e),(0,ni._)({},s,!e[s]))})}}}},[]),g=d.useMemo(function(){return{title:a?{display:!0,text:a}:void 0,animation:!1,scales:l?{y:{id:"y",title:{display:!0,text:l}},x:{id:"x",title:{display:!0,text:a}}}:void 0,plugins:{legend:{display:!1,onClick:function(e,n){}}},onClick:f,maintainAspectRatio:!1}},[f,a,l]),j=(n=[],t={},r.forEach(function(e){var r=!!h[e];i&&n.push({x:e,y:r?void 0:i[e]}),o&&Object.entries(o[e]||{}).forEach(function(n){var i=(0,z._)(n,2),o=i[0],s=i[1];(null==u||!u.includes(o))&&s&&(t[o]=(0,eG._)(t[o]||[]).concat([{x:e,y:r?void 0:s}]))})}),Object.keys(t).forEach(function(e){t[e]=nj(r,t[e])}),{jobData:n,stepData:t}),y=j.jobData,v=j.stepData,S=c?"Total job":"Total pipeline",b={labels:r,datasets:(0,eG._)(!i||u&&u.includes(S)?[]:[{label:S,data:y,borderColor:et.w.Gray500,backgroundColor:"rgba(0,0,0,0)"}]).concat((0,eG._)(Object.keys(v).map(function(e){return{label:e,data:v[e],borderColor:(0,nm.kU)(e),backgroundColor:"rgba(0,0,0,0)"}})))};return(0,s.jsx)(ny,{children:(0,s.jsx)(nh.x1,{data:function(){return b},height:300,options:g,ref:m})})},nj=function(e,n){var t={};return n.forEach(function(e){t[e.x]=e.y}),e.map(function(e){return{x:e,y:t[e]}})},ny=nx.ZP.div.withConfig({componentId:"sc-ed33bdef-0"})(nf(),et.w.Gray700),nv=t(35192),nS=t(88794),nb=t(48077),n_=t(22206);function nw(){var e=(0,p._)(["\n  query PartitionsStatusQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        ...OpJobPartitionSet\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionSet on PartitionSet {\n    id\n    name\n    pipelineName\n    partitionsOrError {\n      ... on Partitions {\n        results {\n          name\n        }\n      }\n      ...PythonErrorFragment\n    }\n    partitionStatusesOrError {\n      ... on PartitionStatuses {\n        results {\n          id\n          ...OpJobPartitionStatus\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionStatus on PartitionStatus {\n    id\n    partitionName\n    runStatus\n    runDuration\n  }\n\n  ","\n"]);return nw=function(){return e},e}var nk=function(e){var n=e.partitionSetName,t=e.repoAddress,r=(0,eM.$)(t),i=(0,x.a)(nP,{variables:{partitionSetName:n,repositorySelector:r}}),o=i.data,c=i.loading;if(!o)return c?(0,s.jsx)(a.x,{padding:32,flex:{direction:"column",alignItems:"center"},children:(0,s.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,s.jsx)(eQ.$,{purpose:"body-text"}),(0,s.jsx)("div",{children:"Loading partitions…"})]})}):(0,s.jsx)(a.x,{padding:32,children:(0,s.jsx)(l.t,{icon:"error",title:"An error occurred",description:"An unexpected error occurred."})});var d=o.partitionSetOrError;if("PartitionSetNotFoundError"===d.__typename)return(0,s.jsx)(a.x,{padding:32,children:(0,s.jsx)(l.t,{icon:"search",title:"Partition set not found",description:d.message})});if("PythonError"===d.__typename)return(0,s.jsx)(a.x,{padding:32,children:(0,s.jsx)(eY.T9,{error:d})});if("PythonError"===d.partitionsOrError.__typename)return(0,s.jsx)(a.x,{padding:32,children:(0,s.jsx)(eY.T9,{error:d.partitionsOrError})});var u=d.partitionsOrError.results.map(function(e){return e.name});return(0,s.jsx)(nN,{partitionNames:u,partitionSet:d,repoAddress:t})};function nC(e){return d.useMemo(function(){var n={},t={};return e.forEach(function(e){if(e.runsLoaded&&0!==e.runs.length){var r=e.runs.sort(function(e,n){return e.startTime||0-(n.startTime||0)}),i=r[r.length-1];n[e.name]={},t[e.name]=(null==i?void 0:i.endTime)&&(null==i?void 0:i.startTime)?i.endTime-i.startTime:void 0,i.stepStats.forEach(function(t){n[e.name][t.stepKey]=[t.endTime&&t.startTime?t.endTime-t.startTime:void 0]})}}),{runDurationData:t,stepDurationData:n}},[e])}var nN=function(e){var n=e.partitionSet,t=e.partitionNames,r=e.repoAddress,i=(0,L.xz)(r.location),o=i.permissions.canLaunchPartitionBackfill,l=i.disabledReasons,c=(0,ez.S)(),u=c.viewport,p=c.containerProps,h=(0,z._)(d.useState(60),2),x=h[0],m=h[1],f=(0,z._)(d.useState(0),2),j=f[0],y=f[1],v=(0,z._)(d.useState(!1),2),S=v[0],b=v[1],_=(0,z._)(d.useState(!1),2),w=_[0],k=_[1],C=(0,z._)(d.useState(!1),2),N=C[0],E=C[1],P=(0,eM.$)(r),A=(0,z._)(d.useState(0),2),R=A[0],O=A[1],I=(0,n_.T)({partitionSetName:n.name,partitionTagName:ec.H.Partition,partitionNames:t,pageSize:x,runsFilter:[],repositorySelector:P,jobName:n.pipelineName,offset:j,skipQuery:!S});d.useEffect(function(){u.width&&!S&&m((0,nS.Rc)(u.width-nb.AQ))},[u.width,S,m]);var T=S?t.slice(Math.max(0,t.length-1-j-x),t.length-j):t,F=nC(I).stepDurationData,$=d.useCallback(function(){return E(!0)},[]),D=n.partitionStatusesOrError,U=d.useMemo(function(){return"PartitionStatuses"===D.__typename?D.results:[]},[D]),q=d.useMemo(function(){var e={},n={};return U.forEach(function(t){e[t.partitionName]=t.runStatus||eg.VOA.NOT_STARTED,T.includes(t.partitionName)&&(n[t.partitionName]=t.runDuration||void 0)}),{runStatusData:e,runDurationData:n}},[U,T]),H=q.runStatusData,M=q.runDurationData,G=d.useMemo(function(){return{runStatusForPartitionKey:function(e){return H[e]}}},[H]);return(0,s.jsxs)("div",{children:[(0,s.jsx)(er.Vq,{canEscapeKeyClose:!N,canOutsideClickClose:!N,onClose:function(){return k(!1)},style:{width:800,zIndex:1e3},title:"Launch ".concat(n.pipelineName," backfill"),isOpen:w,children:w&&(0,s.jsx)(nc,{partitionSetName:n.name,partitionNames:t,runStatusData:H,pipelineName:n.pipelineName,onCancel:function(){return k(!1)},onLaunch:function(e,n){O(R+1),k(!1)},onSubmit:$,repoAddress:r})}),(0,s.jsxs)(a.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,s.jsx)(g.pm,{children:"Status"}),(0,s.jsxs)(a.x,{flex:{gap:8},children:[(0,s.jsx)(ei.zx,{onClick:function(){return b(!S)},active:w,children:S?"Hide per-step status":"Show per-step status"}),o?(0,s.jsx)(ei.zx,{onClick:function(){return k(!w)},icon:(0,s.jsx)(eZ.JO,{name:"add_circle"}),active:w,children:"Launch backfill…"}):(0,s.jsx)(ex.u,{content:l.canLaunchPartitionBackfill,children:(0,s.jsx)(ei.zx,{icon:(0,s.jsx)(eZ.JO,{name:"add_circle"}),disabled:!0,children:"Launch backfill…"})})]})]}),(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,s.jsx)(nE,{count:t.length,label:"Total partitions"}),(0,s.jsx)(nE,{count:t.filter(function(e){return H[e]===eg.VOA.FAILURE}).length,label:"Failed partitions"}),(0,s.jsx)(nE,{count:t.filter(function(e){return!H[e]||H[e]===eg.VOA.NOT_STARTED}).length,label:"Missing partitions"})]}),(0,s.jsxs)(a.x,{padding:{vertical:16,horizontal:24},children:[(0,s.jsx)("div",(0,e$._)((0,eF._)({},p),{children:(0,s.jsx)(nv.b,{partitionNames:t,health:G,selected:S?T:void 0,selectionWindowSize:x,onClick:function(e){var n=t.length-1;y(Math.min(n,Math.max(0,n-t.indexOf(e)-.5*x))),S||b(!0)},tooltipMessage:"Click to view per-step status"})})),S?(0,s.jsx)(a.x,{margin:{top:16},children:(0,s.jsx)(nS.ux,{partitionNames:t,partitions:I,pipelineName:n.pipelineName,repoAddress:r,setPageSize:m,offset:j,setOffset:y})}):null]}),(0,s.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,s.jsx)(g.pm,{children:"Run duration"})}),(0,s.jsx)(a.x,{margin:24,children:(0,s.jsx)(ng,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:S?T:t,jobDataByPartition:M})}),S?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.x,{padding:{horizontal:24,vertical:16},children:(0,s.jsx)(g.pm,{children:"Step duration"})}),(0,s.jsx)(a.x,{margin:24,children:(0,s.jsx)(ng,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:T,stepDataByPartition:F})})]}):null,(0,s.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,s.jsx)(g.pm,{children:"Backfill history"})}),(0,s.jsx)(a.x,{margin:{bottom:20},children:(0,s.jsx)(eJ,{partitionSetName:n.name,repositorySelector:P,partitionNames:t,refetchCounter:R})})]})},nE=function(e){var n=e.count,t=e.label;return(0,s.jsxs)(a.x,{padding:16,style:{flex:1},border:"right",children:[(0,s.jsx)("div",{style:{fontSize:18,marginBottom:4},children:(0,s.jsx)("strong",{children:n})}),(0,s.jsx)("div",{children:t})]})},nP=(0,h.Ps)(nw(),U.B),nA=t(62879),nR=function(e){var n=e.partitionSetName,t=e.repoAddress,r=e.pipelineName,i=(0,ez.S)(),o=i.viewport,l=i.containerProps,c=(0,eM.$)(t),u=(0,eD.uc)("",{pipelineSelector:{pipelineName:r,repositoryName:t.name,repositoryLocationName:t.location}}),p=(0,eH.mR)(u.graphAssetKeys),h=d.useMemo(function(){var e=(0,eq.$G)(p.filter(function(e){return e.dimensions.length>0})),n=e.dimensions.map(function(e){return{selectedKeys:e.partitionKeys,selectedRanges:[(0,nA.$0)(e)],dimension:e}}),t=(0,eq.ju)(n,function(n){return e.stateForKeyIdx(n).includes(eL.yo.MISSING)});return{merged:e,total:(0,eH.xD)(n),missing:t.length}},[p]),x=h.total,m=h.missing,f=h.merged,j=(0,z._)(d.useState(60),2),y=j[0],v=j[1],S=(0,z._)(d.useState(0),2),b=S[0],_=S[1],w=(0,z._)(d.useState(!1),2),k=w[0],C=w[1];d.useEffect(function(){o.width&&v((0,nS.Rc)(o.width-nb.AQ))},[o.width,v]);var N=f.dimensions.findIndex(eq.nv);-1===N&&(N=0);var E=f.dimensions[N]?f.dimensions[N]:null,P=(null==E?void 0:E.partitionKeys)||[],A=P.slice(Math.max(0,P.length-1-b-y),P.length-b);return(0,s.jsxs)("div",{children:[(0,s.jsxs)(a.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,s.jsx)(g.pm,{children:"Status"}),(0,s.jsxs)(a.x,{flex:{gap:8},children:[(0,s.jsx)(ei.zx,{onClick:function(){return C(!k)},children:k?"Hide per-asset status":"Show per-asset status"}),(0,s.jsx)(eU.XE,{scope:{all:u.graphQueryItems.map(function(e){return e.node}),skipAllTerm:!0},preferredJobName:r})]})]}),(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,s.jsx)(nE,{count:x,label:"Total partitions"}),(0,s.jsx)(nE,{count:m,label:"Missing partitions"})]}),(0,s.jsxs)(a.x,{padding:{vertical:16,horizontal:24},children:[(0,s.jsx)("div",(0,e$._)((0,eF._)({},l),{children:(0,s.jsx)(nv.b,{partitionNames:P,splitPartitions:!!E&&!(0,eq.nv)(E),health:{ranges:f.rangesForSingleDimension(N)},selected:A,selectionWindowSize:y,tooltipMessage:"Click to view per-asset status",onClick:function(e){var n=P.length-1;_(Math.min(n,Math.max(0,n-P.indexOf(e)-.5*y)))}})})),k&&E&&(0,s.jsx)(a.x,{margin:{top:16},children:(0,s.jsx)(nS.ac,{rangeDimensionIdx:N,rangeDimension:E,assetHealth:p,assetQueryItems:u.graphQueryItems,pipelineName:r,setPageSize:v,offset:b,setOffset:_})})]}),k&&(0,s.jsx)(nO,{repositorySelector:c,pipelineName:r,partitionSetName:n,multidimensional:((null==f?void 0:f.dimensions.length)||0)>1,dimensionName:E?E.name:null,dimensionKeys:P,selected:A,offset:b,pageSize:y}),(0,s.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,s.jsx)(g.pm,{children:"Backfill history"})}),(0,s.jsx)(a.x,{margin:{bottom:20},children:(0,s.jsx)(eJ,{partitionSetName:n,repositorySelector:c,partitionNames:P,refetchCounter:1})})]})},nO=function(e){var n=e.repositorySelector,t=e.dimensionKeys,r=e.dimensionName,i=e.selected,o=e.pageSize,l=e.partitionSetName,c=e.multidimensional,d=e.pipelineName,u=e.offset,p=nC((0,n_.T)({partitionSetName:l,partitionTagName:c?"".concat(ec.H.Partition,"/").concat(r):ec.H.Partition,partitionNames:t,repositorySelector:n,pageSize:o,runsFilter:[],jobName:d,offset:u,skipQuery:!r})),h=p.stepDurationData,x=p.runDurationData;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,s.jsx)(g.pm,{children:"Run duration"})}),(0,s.jsx)(a.x,{margin:24,children:(0,s.jsx)(ng,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:i,jobDataByPartition:x})}),(0,s.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,s.jsx)(g.pm,{children:"Step durations"})}),(0,s.jsx)(a.x,{margin:24,children:(0,s.jsx)(ng,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:i,stepDataByPartition:h})})]})},nI=function(e){var n,t=e.repoAddress,r=(0,u.UO)(),i=r.pipelinePath,o=(0,w.p3)(i),c=o.pipelineName,p=(0,H.Ux)(t),h=null==p?void 0:p.repository.pipelines.find(function(e){return e.name===c}),m=!!(null==h?void 0:h.isJob),f=!!(null==h?void 0:h.isAssetJob);(0,q.b)(o,m),(0,w.Bj)(r);var g=(n=(0,x.a)(eI,{skip:!c,variables:{repositoryLocationName:t.location,repositoryName:t.name,pipelineName:c}}).data,d.useMemo(function(){return{partitionSet:(null==n?void 0:n.partitionSetsOrError.__typename)==="PartitionSets"?n.partitionSetsOrError.results[0]:void 0,partitionSetError:(null==n?void 0:n.partitionSetsOrError.__typename)==="PipelineNotFoundError"||(null==n?void 0:n.partitionSetsOrError.__typename)==="PythonError"?n.partitionSetsOrError:void 0}},[n])),j=g.partitionSet,y=g.partitionSetError;return j||y?y?(0,s.jsx)(a.x,{padding:{vertical:64},children:(0,s.jsx)(l.t,{icon:"error",title:"Partitions",description:y.message})}):j?f?(0,s.jsx)(nR,{pipelineName:c,partitionSetName:j.name,repoAddress:t}):(0,s.jsx)(nk,{partitionSetName:j.name,repoAddress:t}):(0,s.jsx)(a.x,{padding:{vertical:64},children:(0,s.jsx)(l.t,{icon:"error",title:"Partitions",description:(0,s.jsxs)("div",{children:["There are no partition sets defined for ",m?"job":"pipeline"," ",(0,s.jsx)("code",{children:c}),"."]})})}):(0,s.jsx)(eT.T,{purpose:"page"})},nT=function(e){var n=e.repoAddress,t=(0,u.TH)(),r=(0,u.UO)().pipelinePath,i=(0,w.p3)(r).pipelineName,o=(0,H.Ux)(n),a=(0,H.E8)(o,i),l=t.pathname,c=t.search,d=l.replace("/pipeline_or_job/",a?"/jobs/":"/pipelines/");return(0,s.jsx)(u.l_,{to:"".concat(d).concat(c)})},nF=t(97765),n$=function(e){var n=e.repoAddress,t=d.useContext(X.v).FallthroughRoute;return(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,s.jsx)(eR,{repoAddress:n}),(0,s.jsxs)(u.rs,{children:[(0,s.jsx)(u.AW,{path:"/locations/:repoPath/pipeline_or_job/:pipelinePath(/?.*)",children:(0,s.jsx)(nT,{repoAddress:n})}),(0,s.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup","/locations/:repoPath/jobs/:pipelinePath/playground/setup"],children:(0,s.jsx)(Z,{repoAddress:n})}),(0,s.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup-from-run/:runId","/locations/:repoPath/jobs/:pipelinePath/playground/setup-from-run/:runId"],children:(0,s.jsx)(V,{repoAddress:n})}),(0,s.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground","/locations/:repoPath/jobs/:pipelinePath/playground"],children:(0,s.jsx)($.H,{repoAddress:n})}),(0,s.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs/:runId","/locations/:repoPath/jobs/:pipelinePath/runs/:runId"],render:function(e){return(0,s.jsx)(u.l_,{to:"/runs/".concat(e.match.params.runId)})}}),(0,s.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs","/locations/:repoPath/jobs/:pipelinePath/runs"],children:(0,s.jsx)(nF.G,{repoAddress:n})}),(0,s.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/partitions","/locations/:repoPath/jobs/:pipelinePath/partitions"],children:(0,s.jsx)(nI,{repoAddress:n})}),(0,s.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/:pipelinePath/overview","/locations/:repoPath/jobs/:pipelinePath/overview"],render:function(e){return(0,s.jsx)(u.l_,{to:"/locations/".concat(e.match.url.replace(/\/overview$/i,""))})}}),(0,s.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)"],children:(0,s.jsx)(t,{repoAddress:n})})]})]})},nz=t(49604),nD=t(57378),nL=t(7464);t(33521);var nU=t(34706),nq=t(94901),nH=t(65511),nM=t(42418),nG=t(67953),nB=t(85729),nV=t(99339),nW=t(76358),nJ=t(88498),nK=t(51509),nQ=t(5561),nZ=t(66630);function nY(){var e=(0,p._)(["\n  query TickLogEventsQuery($instigationSelector: InstigationSelector!, $timestamp: Float!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        tick(timestamp: $timestamp) {\n          id\n          status\n          timestamp\n          logEvents {\n            events {\n              ...TickLogEvent\n            }\n          }\n        }\n      }\n    }\n  }\n\n  fragment TickLogEvent on InstigationEvent {\n    message\n    timestamp\n    level\n  }\n"]);return nY=function(){return e},e}var nX=function(e){var n=e.tick,t=e.instigationSelector,r=e.onClose,i=(0,x.a)(n4,{variables:{instigationSelector:t,timestamp:n.timestamp},notifyOnNetworkStatusChange:!0}).data,o=(null==i?void 0:i.instigationStateOrError.__typename)==="InstigationState"&&(null==i?void 0:i.instigationStateOrError.tick)?null==i?void 0:i.instigationStateOrError.tick.logEvents.events:void 0;return(0,s.jsxs)(er.Vq,{isOpen:!!o,onClose:r,style:{width:"70vw",display:"flex"},title:n?(0,s.jsx)(ev.v,{timestamp:n.timestamp}):null,children:[(0,s.jsx)(er.a7,{children:o&&o.length?(0,s.jsx)(n0,{events:o}):(0,s.jsx)(a.x,{flex:{justifyContent:"center",alignItems:"center"},style:{flex:1,color:et.w.Gray600},children:"No logs available"})}),(0,s.jsx)(er.cN,{children:(0,s.jsx)(ei.zx,{intent:"primary",onClick:r,children:"OK"})})]})},n0=function(e){var n=e.events;return(0,s.jsx)("div",{style:{overflow:"hidden",borderBottom:"0.5px solid #ececec",flex:1},children:(0,s.jsxs)(nZ.bu,{onWidthsChanged:function(){},children:[(0,s.jsx)(n1,{}),n.map(function(e,n){return(0,s.jsx)(n2,{event:e},n)})]})})},n1=function(){var e=d.useContext(nZ.D7);return(0,s.jsxs)(nZ.Cr,{children:[(0,s.jsx)(nZ.h4,{width:e.eventType,onResize:function(n){return e.onChange((0,e$._)((0,eF._)({},e),{eventType:n}))},children:"Event Type"}),(0,s.jsx)(nZ.gM,{style:{flex:1},children:"Info"}),(0,s.jsx)(nZ.h4,{handleSide:"left",width:e.timestamp,onResize:function(n){return e.onChange((0,e$._)((0,eF._)({},e),{timestamp:n}))},children:"Timestamp"})]})},n2=function(e){var n=e.event;return(0,s.jsxs)(nQ.X2,{level:n.level,highlighted:!1,children:[(0,s.jsx)(nQ.qH,{children:(0,s.jsx)("span",{style:{marginLeft:8},children:n.level})}),(0,s.jsx)(a.x,{padding:{horizontal:12},style:{flex:1},children:n.message}),(0,s.jsx)(nQ.pq,{time:n.timestamp})]})},n4=(0,h.Ps)(nY()),n3=t(10674),n6=t(53371),n5=(r={},(0,ni._)(r,eg.izS.SUCCESS,et.w.Blue500),(0,ni._)(r,eg.izS.FAILURE,et.w.Red500),(0,ni._)(r,eg.izS.STARTED,et.w.Gray400),(0,ni._)(r,eg.izS.SKIPPED,et.w.Yellow500),r),n8=function(e){var n=e.ticks,t=e.nextTick,r=e.onHoverTick,i=e.onSelectTick,o=(0,z._)(d.useState(Date.now()),2),a=o[0],l=o[1],c=(0,z._)(d.useState(Date.now()),2),u=c[0],p=c[1],h=(0,z._)(d.useState(!1),2),x=h[0],m=h[1];d.useEffect(function(){var e=setInterval(function(){x||l(Date.now())},100);return function(){return clearInterval(e)}}),d.useEffect(function(){x||t&&!(a<1e3*t.timestamp)||p(a)},[x,t,a]);var f=t&&1e3*t.timestamp<=a?4+Math.sin(2*Math.PI*(a%2e3)/2e3):3,g=n.map(function(e){return{x:1e3*e.timestamp,y:0}}),j=n.map(function(e){return n5[e.status]}),y=Array(n.length).fill(3);t&&(g.push({x:1e3*t.timestamp,y:0}),j.push(et.w.Gray200),y.push(f));var v={labels:["ticks"],datasets:[{label:"now",data:[{x:u-6e5,y:0},{x:u,y:0}],borderColor:et.w.Gray100,borderWidth:1,pointBorderWidth:2,pointBorderColor:et.w.Gray200,pointRadius:1,pointHoverRadius:1},{label:"ticks",data:g,borderColor:et.w.Gray100,borderWidth:0,backgroundColor:"rgba(0,0,0,0)",pointBackgroundColor:"rgba(0,0,0,0)",pointBorderWidth:2,pointBorderColor:j,pointRadius:y,pointHoverBorderWidth:2,pointHoverRadius:5,pointHoverBorderColor:j}]};return(0,s.jsx)(nh.x1,{data:v,height:150,options:{animation:{duration:0},scales:{y:{id:"y",display:!1,grid:{display:!1},title:{display:!1}},x:{id:"x",type:"time",title:{display:!1},grid:{display:!0},bounds:"ticks",min:u-3e5,max:u+6e4,time:{minUnit:"minute"}}},plugins:{legend:{display:!1},tooltip:{displayColors:!1,callbacks:{label:function(e){if(!e.datasetIndex)return"Current time";if(void 0===e.dataIndex||e.dataIndex===n.length)return"";var t,r=n[e.dataIndex],i=r.cursor?"Cursor: ".concat(r.cursor,"\n"):"";return r.status===eg.izS.SKIPPED&&r.skipReason?i?[r.skipReason,i]:r.skipReason:r.status===eg.izS.SUCCESS&&r.runIds.length?i?(0,eG._)(r.runIds).concat([i]):r.runIds:r.status===eg.izS.SUCCESS&&r.originRunIds?i?(0,eG._)(r.originRunIds).concat([i]):r.originRunIds:r.status===eg.izS.FAILURE&&(null===(t=r.error)||void 0===t?void 0:t.message)?i?[r.error.message,i]:r.error.message:i}}}},onClick:function(e,t){if(t.length){var r=(0,z._)(t,1)[0];void 0!==r.datasetIndex&&void 0!==r.index&&i(n[r.index])}},onHover:function(e,t){if((null==e?void 0:e.target)instanceof HTMLElement&&(e.target.style.cursor=t.length?"pointer":"default"),t.length&&!x){m(!0);var i=(0,z._)(t.filter(function(e){return 1===e.datasetIndex&&void 0!==e.index&&e.index<n.length}),1)[0];i&&r(n[i.index])}else!t.length&&x&&(m(!1),r(void 0))},maintainAspectRatio:!1}},"100%")},n7=t(92914);function n9(){var e=(0,p._)(["\n  query SelectedTickQuery($instigationSelector: InstigationSelector!, $timestamp: Float!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        tick(timestamp: $timestamp) {\n          id\n          status\n          timestamp\n          skipReason\n          runIds\n          originRunIds\n          error {\n            ...PythonErrorFragment\n          }\n          ...TickTagFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return n9=function(){return e},e}var te=function(e){var n=e.timestamp,t=e.instigationSelector,r=e.onClose,i=(0,x.a)(tn,{variables:{instigationSelector:t,timestamp:n||0},skip:!n}).data,o=(null==i?void 0:i.instigationStateOrError.__typename)==="InstigationState"?null==i?void 0:i.instigationStateOrError.tick:void 0;return(0,s.jsxs)(er.Vq,{isOpen:!!o,onClose:r,style:{width:o&&o.status===eg.izS.SKIPPED?"50vw":"90vw"},title:o?(0,s.jsx)(ev.v,{timestamp:o.timestamp}):null,children:[o?(0,s.jsxs)(er.a7,{children:[o.status===eg.izS.SUCCESS?o.runIds.length?(0,s.jsx)(n3.i0,{runIds:o.runIds}):(0,s.jsx)(n3.lB,{originRunIds:o.originRunIds}):null,o.status===eg.izS.SKIPPED?(0,s.jsxs)(n7.Z,{direction:"row",spacing:16,children:[(0,s.jsx)(n3.TW,{tick:o}),(0,s.jsx)("span",{children:o.skipReason||"No skip reason provided"})]}):o.status===eg.izS.FAILURE&&o.error?(0,s.jsx)(eY.T9,{error:o.error}):void 0]}):null,(0,s.jsxs)(er.cN,{children:[(0,s.jsx)(ei.zx,{icon:(0,s.jsx)(eZ.JO,{name:"copy_to_clipboard"}),onClick:function(e){return(0,nG.gs)(e,window.location.href)},children:"Copy Link"}),(0,s.jsx)(ei.zx,{intent:"primary",onClick:r,children:"OK"})]})]})},tn=(0,h.Ps)(n9(),U.B,n3.dY);function tt(){var e=(0,p._)(["\n  query TickHistoryQuery(\n    $instigationSelector: InstigationSelector!\n    $dayRange: Int\n    $limit: Int\n    $cursor: String\n    $statuses: [InstigationTickStatus!]\n  ) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        nextTick {\n          ...NextTickForHistory\n        }\n        ticks(dayRange: $dayRange, limit: $limit, cursor: $cursor, statuses: $statuses) {\n          id\n          ...HistoryTick\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment NextTickForHistory on DryRunInstigationTick {\n    timestamp\n  }\n\n  fragment HistoryTick on InstigationTick {\n    id\n    status\n    timestamp\n    cursor\n    skipReason\n    runIds\n    runs {\n      id\n      status\n      ...RunStatusFragment\n    }\n    originRunIds\n    error {\n      ...PythonErrorFragment\n    }\n    logKey\n    ...TickTagFragment\n    dynamicPartitionsRequestResults {\n      ...DynamicPartitionsRequestResultFragment\n    }\n  }\n\n  fragment DynamicPartitionsRequestResultFragment on DynamicPartitionsRequestResult {\n    partitionsDefName\n    partitionKeys\n    skippedPartitionKeys\n    type\n  }\n\n  ","\n  ","\n  ","\n"]);return tt=function(){return e},e}function tr(){var e=(0,p._)(["\n  background: transparent;\n  border: 0;\n  cursor: pointer;\n  padding: 8px;\n  margin: -6px;\n  outline: none;\n\n  "," {\n    background-color: ",";\n    transition: background-color 100ms;\n  }\n\n  :hover "," {\n    background-color: ",";\n  }\n\n  :focus "," {\n    background-color: ",";\n  }\n"]);return tr=function(){return e},e}nH.kL.register(nM.ZP);var ti=(i={},(0,ni._)(i,eg.izS.SUCCESS,!0),(0,ni._)(i,eg.izS.FAILURE,!0),(0,ni._)(i,eg.izS.STARTED,!0),(0,ni._)(i,eg.izS.SKIPPED,!1),i),to=(o={},(0,ni._)(o,eg.izS.SUCCESS,"Requested"),(0,ni._)(o,eg.izS.FAILURE,"Failed"),(0,ni._)(o,eg.izS.STARTED,"Started"),(0,ni._)(o,eg.izS.SKIPPED,"Skipped"),o),ts=function(e){var n=e.name,t=e.repoAddress,r=e.tabs,i=(0,z._)((0,nW.q)({encode:function(e){var n={};return Object.keys(e).map(function(t){n[t.toLowerCase()]=String(e[t])}),n},decode:function(e){var n=(0,eF._)({},ti);return Object.keys(ti).forEach(function(t){t.toLowerCase() in e&&(n[t]="false"!==e[t.toLowerCase()])}),n}}),2),o=i[0],c=i[1],u=(0,nV.m)(),p=(0,nB.gV)().flagSensorScheduleLogging,h=(0,e$._)((0,eF._)({},(0,eM.$)(t)),{name:n}),x=Object.keys(o).filter(function(e){return o[e]}).map(function(e){return e}),m=(0,nJ.l)({nextCursorForResult:function(e){var n;if("InstigationState"===e.instigationStateOrError.__typename)return null===(n=e.instigationStateOrError.ticks[24])||void 0===n?void 0:n.id},getResultArray:function(e){return e&&"InstigationState"===e.instigationStateOrError.__typename?e.instigationStateOrError.ticks:[]},variables:{instigationSelector:h,statuses:x},query:tc,pageSize:25}),f=m.queryResult,g=m.paginationProps,j=(0,z._)(d.useState(),2),y=j[0],v=j[1],S=f.data;if(!S)return null;if("PythonError"===S.instigationStateOrError.__typename)return(0,s.jsx)(eY.T9,{error:S.instigationStateOrError});if("InstigationStateNotFoundError"===S.instigationStateOrError.__typename)return(0,s.jsx)(a.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,s.jsx)(l.t,{icon:"no-results",title:"No ticks to display"})});var b=S.instigationStateOrError,_=b.ticks,w=b.instigationType;if(!_.length&&x.length===Object.keys(ti).length)return null;var k=function(e){var n=e.status;return(0,s.jsx)(e2.X,{label:to[n],checked:o[n],onChange:function(e){c((0,e$._)((0,eF._)({},o),(0,ni._)({},n,e.target.checked)))}})};return(0,s.jsxs)(s.Fragment,{children:[y?(0,s.jsx)(nX,{tick:y,instigationSelector:h,onClose:function(){return v(void 0)}}):null,(0,s.jsx)(a.x,{margin:{vertical:8,horizontal:24},children:(0,s.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},children:[r,(0,s.jsxs)(a.x,{flex:{direction:"row",gap:16},children:[(0,s.jsx)(k,{status:eg.izS.STARTED}),(0,s.jsx)(k,{status:eg.izS.SUCCESS}),(0,s.jsx)(k,{status:eg.izS.FAILURE}),(0,s.jsx)(k,{status:eg.izS.SKIPPED})]})]})}),_.length?(0,s.jsxs)(nU.i,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{style:{width:120},children:"Timestamp"}),(0,s.jsx)("th",{style:{width:90},children:"Status"}),w===eg._5b.SENSOR?(0,s.jsx)("th",{style:{width:120},children:"Cursor"}):null,(0,s.jsx)("th",{style:{width:180},children:"Runs"}),p?(0,s.jsx)("th",{style:{width:180},children:"Logs"}):null,(0,s.jsx)("th",{style:{width:200},children:"Requests"})]})}),(0,s.jsx)("tbody",{children:_.map(function(e){var n;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(ev.v,{timestamp:e.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,s.jsx)("td",{children:(0,s.jsx)(n3.TW,{tick:e})}),w===eg._5b.SENSOR?(0,s.jsx)("td",{style:{width:120},children:e.cursor?(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,s.jsx)("div",{style:{fontFamily:nq.b.monospace,fontSize:"16px"},children:(n=e.cursor||"").length>100?"".concat(n.slice(0,95),"…"):n}),(0,s.jsx)(td,{onClick:(0,eX._)(function(){return(0,e0.Jh)(this,function(n){switch(n.label){case 0:return u(e.cursor||""),[4,(0,nG.B7)({message:(0,s.jsx)("div",{children:"Copied value"}),intent:"success"})];case 1:return n.sent(),[2]}})}),children:(0,s.jsx)(eZ.JO,{name:"assignment"})})]}):(0,s.jsx)(s.Fragment,{children:"—"})}):null,(0,s.jsx)("td",{children:e.runIds.length?e.runs.map(function(e){return(0,s.jsx)(d.Fragment,{children:(0,s.jsx)(n6.RX,{run:e})},e.id)}):(0,s.jsx)(s.Fragment,{children:"—"})}),p?(0,s.jsx)("td",{children:e.logKey?(0,s.jsx)("a",{onClick:function(){return v(e)},children:"View logs"}):(0,s.jsx)(s.Fragment,{children:"—"})}):null,(0,s.jsx)("td",{children:(0,s.jsx)(tl,{requests:e.dynamicPartitionsRequestResults})})]},e.id)})})]}):(0,s.jsx)(a.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,s.jsx)(l.t,{icon:"no-results",title:"No ticks to display"})}),_.length>0?(0,s.jsx)("div",{style:{marginTop:"16px"},children:(0,s.jsx)(eB.pI,(0,eF._)({},g))}):null]})},ta=function(e){var n=e.name,t=e.repoAddress,r=e.onHighlightRunIds,i=(0,z._)((0,nW.q)({encode:function(e){return{time:e}},decode:function(e){return e.time?Number(e.time):void 0}}),2),o=i[0],l=i[1],c=(0,z._)(d.useState(!1),2),u=c[0],p=c[1],h=(0,e$._)((0,eF._)({},(0,eM.$)(t)),{name:n}),m=(0,x.a)(tc,{variables:{instigationSelector:h,limit:15},notifyOnNetworkStatusChange:!0});(0,ef.C4)(m,u?ef.hy:1e3);var f=m.data,j=m.error;if(!f||j)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.x,{padding:{top:16,horizontal:24},border:"bottom",children:(0,s.jsx)(g.pm,{children:"Recent ticks"})}),(0,s.jsx)(a.x,{padding:{vertical:64},children:(0,s.jsx)(eQ.$,{purpose:"section"})})]});if("PythonError"===f.instigationStateOrError.__typename)return(0,s.jsx)(eY.T9,{error:f.instigationStateOrError});if("InstigationStateNotFoundError"===f.instigationStateOrError.__typename)return null;var y=f.instigationStateOrError,v=y.ticks,S=y.nextTick,b=function(e){l(e?e.timestamp:void 0)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(te,{timestamp:o,instigationSelector:h,onClose:function(){return b(void 0)}}),(0,s.jsx)(a.x,{padding:{vertical:16,horizontal:24},children:(0,s.jsx)(g.pm,{children:"Recent ticks"})}),(0,s.jsx)(a.x,{border:"top",children:(0,s.jsx)(n8,{ticks:void 0===v?[]:v,nextTick:S,onHoverTick:function(e){e||p(!1),(null==e?void 0:e.runIds)&&(r&&r(e.runIds),p(!0))},onSelectTick:b})})]})};function tl(e){var n=e.requests,t=(0,z._)(d.useState(!1),2),r=t[0],i=t[1],o=n.filter(function(e){var n;return null===(n=e.partitionKeys)||void 0===n?void 0:n.length});return o.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(en.Z,{onClick:function(){i(!0)},children:[o.length," dynamic partition change",1===o.length?"":"s"]}),(0,s.jsxs)(er.Vq,{isOpen:r,onClose:function(){i(!1)},style:{width:"60%",minWidth:"400px"},icon:"partition",title:"Dynamic partition changes",children:[(0,s.jsx)(nK.T,{includeTitle:!1,requests:o}),(0,s.jsx)(er.cN,{children:(0,s.jsx)(ei.zx,{intent:"primary",onClick:function(){i(!1)},children:"Close"})})]})]}):null}var tc=(0,h.Ps)(tt(),n6.S9,U.B,n3.dY),td=nx.ZP.button.withConfig({componentId:"sc-eb36dd96-0"})(tr(),eZ.a1,et.w.Gray600,eZ.a1,et.w.Gray800,eZ.a1,et.w.Link),tu=t(97319),tp=t(24651),th=t(17577),tx=t(55829),tm=t(89356),tf=t(7832),tg=t(2142),tj=t(98916);function ty(){var e=(0,p._)(["\n  query getSchedule(\n    $scheduleSelector: ScheduleSelector!\n    $startTimestamp: Float\n    $ticksAfter: Int\n    $ticksBefore: Int\n  ) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on PythonError {\n        message\n        stack\n      }\n      ... on Schedule {\n        id\n        name\n        potentialTickTimestamps(\n          startTimestamp: $startTimestamp\n          upperLimit: $ticksAfter\n          lowerLimit: $ticksBefore\n        )\n      }\n    }\n  }\n"]);return ty=function(){return e},e}function tv(){var e=(0,p._)(["\n  mutation ScheduleDryRunMutation($selectorData: ScheduleSelector!, $timestamp: Float) {\n    scheduleDryRun(selectorData: $selectorData, timestamp: $timestamp) {\n      ...PythonErrorFragment\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ... on ScheduleNotFoundError {\n        scheduleName\n      }\n    }\n  }\n  ","\n  ","\n"]);return tv=function(){return e},e}function tS(){var e=(0,p._)(["\n  button {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n  }\n"]);return tS=function(){return e},e}function tb(){var e=(0,p._)(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  padding-bottom: 12px;\n  border-bottom: 1px solid ",";\n  margin-bottom: 12px;\n  "," {\n    padding-bottom: 4px;\n    display: block;\n  }\n  pre {\n    margin: 0;\n  }\n  button {\n    margin-top: 4px;\n  }\n"]);return tb=function(){return e},e}function t_(){var e=(0,p._)(["\n  padding-bottom: 2px;\n"]);return t_=function(){return e},e}var tw=navigator.language,tk=function(e){return(0,s.jsx)(er.Vq,(0,e$._)((0,eF._)({},e),{style:{width:"70vw",display:"flex"},title:(0,s.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,s.jsx)(eZ.JO,{name:"schedule"}),(0,s.jsx)("span",{children:e.name})]}),children:(0,s.jsx)(tC,(0,eF._)({},e))}))},tC=function(e){var n=e.repoAddress,t=e.name,r=e.onClose,i=e.jobName,o=(0,z._)(d.useState(),2),l=o[0],c=o[1],u=(0,x.a)(tN,{variables:{scheduleSelector:{repositoryLocationName:n.location,repositoryName:n.name,scheduleName:t}}}).data,p=d.useContext(tm.JB),h=(0,z._)(p.timezone,1)[0],m=(0,z._)(d.useState(!1),2),f=m[0],g=m[1],j=d.useRef(null),y=(0,ez.S)(),v=y.viewport,S=y.containerProps,b=(0,z._)(d.useState(!1),2),_=b[0],w=b[1],k=d.useMemo(function(){if(_)return(0,s.jsx)(tE,{repoAddress:n,name:t,timestamp:j.current.ts,jobName:i});if(!u)return(0,s.jsx)(a.x,{padding:{vertical:48},flex:{alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(eQ.$,{purpose:"page"})});if("PythonError"===u.scheduleOrError.__typename||"ScheduleNotFoundError"===u.scheduleOrError.__typename)return(0,s.jsx)("div",{});var e,r=u.scheduleOrError.potentialTickTimestamps.map(function(e){return{ts:e,label:(0,tf.j)({timestamp:{unix:e},locale:tw,timezone:h,timeFormat:{showTimezone:!0}})}});return j.current=l||r[0]||null,(0,s.jsxs)(tA,{children:[(0,s.jsx)(tO,{children:"Select a mock evaluation time"}),(0,s.jsx)(th.J,{isOpen:f,position:"bottom-left",fill:!0,content:(0,s.jsx)(tx.v2,{style:{maxHeight:"400px",overflow:"scroll",width:"".concat(v.width,"px")},children:r.map(function(e){return(0,s.jsx)(tx.sN,{text:(0,s.jsx)("div",{"data-testid":(0,ns.N)("tick-".concat(e.ts)),children:e.label}),onClick:function(){c(e),g(!1)}},e.ts)})}),children:(0,s.jsx)("div",(0,e$._)((0,eF._)({},S),{children:(0,s.jsx)(ei.zx,{style:{flex:1},rightIcon:(0,s.jsx)(eZ.JO,{name:"arrow_drop_down"}),onClick:function(){return g(function(e){return!e})},"data-testid":(0,ns.N)("tick-selection"),children:null===(e=j.current)||void 0===e?void 0:e.label})}))})]})},[l,S,u,f,i,t,n,_,h,v.width]),C=d.useMemo(function(){return _?(0,s.jsx)(ei.zx,{onClick:r,children:"Close"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ei.zx,{onClick:r,children:"Cancel"}),(0,s.jsx)(ei.zx,{"data-testid":(0,ns.N)("evaluate"),intent:"primary",onClick:function(){w(!0)},children:"Evaluate"})]})},[r,_]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(er.a7,{children:(0,s.jsx)("div",{style:{minHeight:"300px"},children:k})}),C?(0,s.jsx)(er.cN,{topBorder:!0,children:C}):null]})},tN=(0,h.Ps)(ty()),tE=function(e){var n,t,r,i,o=e.repoAddress,c=e.name,u=e.timestamp,p=e.jobName,h=d.useContext(tm.JB),x=(0,z._)(h.timezone,1)[0],m=(0,z._)((0,e1.D)(tP,d.useMemo(function(){var e=(0,eM.$)(o);return{variables:{selectorData:(0,e$._)((0,eF._)({},e),{scheduleName:c}),timestamp:u}}},[c,o,u])),1)[0],f=(0,z._)(d.useState(null),2),j=f[0],v=f[1];if(d.useEffect(function(){m().then(function(e){v(function(){return e})})},[m]),!j||!j.data)return(0,s.jsx)(a.x,{padding:32,flex:{justifyContent:"center",alignItems:"center"},children:(0,s.jsx)(eQ.$,{purpose:"page"})});var S=(null==j?void 0:null===(t=j.data)||void 0===t?void 0:t.scheduleDryRun.__typename)==="DryRunInstigationTick"?null==j?void 0:null===(r=j.data)||void 0===r?void 0:r.scheduleDryRun.evaluationResult:null,b=null==S?void 0:null===(i=S.runRequests)||void 0===i?void 0:i.length,_=null==S?void 0:S.error;return(0,s.jsxs)(a.x,{flex:{direction:"column",gap:8},children:[(0,s.jsx)(a.x,{children:(0,s.jsxs)(tR,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(g.pm,{children:"Result"}),(0,s.jsx)(a.x,{flex:{grow:1,alignItems:"center"},children:(0,s.jsx)("div",{children:_?(0,s.jsx)(y.V,{intent:"danger",children:"Failed"}):b?(0,s.jsxs)(y.V,{intent:"success",children:[b," run requests"]}):(0,s.jsx)(y.V,{intent:"warning",children:"Skipped"})})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(g.pm,{children:"Tick"}),(0,s.jsx)(a.x,{flex:{grow:1,alignItems:"center"},children:(0,s.jsx)(g.fv,{children:(0,tf.j)({timestamp:{unix:u},locale:tw,timezone:x,timeFormat:{showTimezone:!0}})})})]})]})}),j.data&&S?S.error?(0,s.jsx)(eY.T9,{error:S.error}):(null===(n=S.runRequests)||void 0===n?void 0:n.length)?(0,s.jsx)(tg.k,{runRequests:S.runRequests,repoAddress:o,isJob:!0,jobName:p,name:c}):(0,s.jsxs)("div",{children:[(0,s.jsx)(g.pm,{children:"Skip Reason"}),(0,s.jsx)("div",{children:(null==S?void 0:S.skipReason)||"No skip reason was output"})]}):(0,s.jsx)(l.t,{title:"An unknown error occurred",description:(0,s.jsxs)("span",{children:["File an issue on"," ",(0,s.jsx)("a",{href:"https://github.com/dagster-io/dagster",target:"_blank",rel:"noreferrer",children:"Github"})," ","if you think this is a bug"]}),icon:"error"})]})},tP=(0,h.Ps)(tv(),U.B,tj.s),tA=nx.ZP.div.withConfig({componentId:"sc-14a50da3-0"})(tS()),tR=nx.ZP.div.withConfig({componentId:"sc-14a50da3-1"})(tb(),et.w.KeylineGray,g.pm),tO=nx.ZP.div.withConfig({componentId:"sc-14a50da3-2"})(t_()),tI=t(3842);function tT(){var e=(0,p._)(["\n  query SchedulePartitionStatusQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...SchedulePartitionStatusFragment\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusFragment on Schedule {\n    id\n    mode\n    pipelineName\n    partitionSet {\n      id\n      name\n      partitionStatusesOrError {\n        ... on PartitionStatuses {\n          results {\n            id\n            ...SchedulePartitionStatusResult\n          }\n        }\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusResult on PartitionStatus {\n    id\n    partitionName\n    runStatus\n  }\n"]);return tT=function(){return e},e}var tF=["Succeeded","Failed","Missing","Pending"],t$=function(e){switch(e.runStatus){case null:return"Missing";case eg.VOA.SUCCESS:return"Succeeded";case eg.VOA.FAILURE:case eg.VOA.CANCELED:case eg.VOA.CANCELING:return"Failed";case eg.VOA.MANAGED:case eg.VOA.QUEUED:case eg.VOA.NOT_STARTED:case eg.VOA.STARTED:case eg.VOA.STARTING:return"Pending";default:return(0,nm.UT)(e.runStatus)}},tz=d.memo(function(e){var n=e.repoAddress,t=e.schedule,r=(0,H.Ux)(n),i=t.name,o=t.partitionSet,a=t.pipelineName,l=null==o?void 0:o.name,c=(0,H.E8)(r,a),u=d.useMemo(function(){var e=l?Q().stringify({partitionSet:l},{addQueryPrefix:!0}):"";return"/".concat(c?"jobs":"pipelines","/").concat(a,"/partitions").concat(e)},[l,c,a]),p=(0,N.$U)(n,u),h=(0,z._)((0,tI.t)(tL,{variables:{scheduleSelector:{scheduleName:i,repositoryName:n.name,repositoryLocationName:n.location}}}),2),x=h[0],m=h[1],f=m.data,j=m.loading,y=d.useCallback(function(){return x()},[x]);return(0,s.jsxs)(n7.Z,{direction:"column",spacing:4,children:[(0,s.jsx)(ea.rU,{to:p,children:l}),function(){if(j)return(0,s.jsx)(g.YS,{style:{color:et.w.Gray400},children:"Loading…"});if(!f)return(0,s.jsx)(en.Z,{onClick:y,children:(0,s.jsx)(g.YS,{children:"Show coverage"})});var e=f.scheduleOrError;return"Schedule"===e.__typename?(0,s.jsx)(tD,{schedule:e,partitionURL:p}):(0,s.jsx)(g.YS,{style:{color:et.w.Red700},children:"Partition set not found!"})}()]})}),tD=function(e){var n=e.schedule,t=e.partitionURL,r=n.partitionSet;if(!r||"PartitionStatuses"!==r.partitionStatusesOrError.__typename)return(0,s.jsx)("span",{style:{color:et.w.Gray300},children:"None"});var i=r.partitionStatusesOrError.results,o={};return i.forEach(function(e){var n=t$(e);o[n]=(0,eG._)(o[n]||[]).concat([e])}),(0,s.jsx)(n6.Jy,{children:(0,s.jsx)("tbody",{children:tF.map(function(e){return e in o?(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{width:"100px"},children:e}),(0,s.jsx)("td",{children:"Failed"===e||"Missing"===e?(0,s.jsx)(ea.rU,{to:"".concat(t,"?showFailuresAndGapsOnly=true"),style:{color:et.w.Gray900},children:o[e].length}):o[e].length})]},e):null})})})},tL=(0,h.Ps)(tT()),tU=t(80023),tq={showSeconds:!1,showTimezone:!0},tH=function(e){var n=e.repoAddress,t=e.schedule,r=e.refreshState,i=t.cronSchedule,o=t.executionTimezone,l=t.futureTicks,c=t.name,u=t.partitionSet,p=t.pipelineName,h=(0,nV.m)(),x=(0,H.Ux)(n),m=(0,H.E8)(x,p),j=(0,z._)(d.useState("Click to copy"),2),v=j[0],S=j[1];d.useEffect(function(){var e;return"Copied!"===v&&(e=setTimeout(function(){S("Click to copy")},2e3)),function(){e&&clearTimeout(e)}},[v]);var b=t.scheduleState,w=b.status,k=b.id,C=b.ticks,N=C.length>0?C[0]:null,E=w===eg.ynu.RUNNING,P=(0,z._)(d.useState(!1),2),A=P[0],R=P[1];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.m,{title:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,s.jsx)(g.X6,{children:c}),(0,s.jsx)(eu.M,{repoAddress:n,schedule:t})]}),tags:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(y.V,{icon:"schedule",children:["Schedule in ",(0,s.jsx)(_.b,{repoAddress:n})]}),l.results[0]&&E?(0,s.jsxs)(y.V,{icon:"timer",children:["Next tick:"," ",(0,s.jsx)(ev.v,{timestamp:l.results[0].timestamp,timezone:o,timeFormat:tq})]}):null,(0,s.jsx)(a.x,{flex:{display:"inline-flex"},margin:{top:2},children:(0,s.jsx)(ex.u,{content:v,children:(0,s.jsx)(en.Z,{color:{link:et.w.Gray400,hover:et.w.Gray600},onClick:function(){h(k),S("Copied!")},children:(0,s.jsx)(g.fv,{children:"id: ".concat(k.slice(0,8))})})})})]}),right:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,s.jsx)(ef.xi,{refreshState:r}),(0,s.jsx)(ei.zx,{onClick:function(){R(!0)},children:"Test Schedule"})]})}),(0,s.jsx)(tk,{isOpen:A,onClose:function(){R(!1)},name:t.name,repoAddress:n,jobName:p},A?"1":"0"),(0,s.jsx)(em.fJ,{children:(0,s.jsxs)("tbody",{children:[t.description?(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Description"}),(0,s.jsx)("td",{children:t.description})]}):null,(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Latest tick"}),(0,s.jsx)("td",{children:N?(0,s.jsxs)(n7.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,s.jsx)(ev.v,{timestamp:N.timestamp,timezone:o,timeFormat:tq}),(0,s.jsx)(n3.TW,{tick:N,instigationType:eg._5b.SCHEDULE})]}):"Schedule has never run"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:m?"Job":"Pipeline"}),(0,s.jsx)("td",{children:(0,s.jsx)(tp.h,{pipelineName:p,pipelineHrefContext:n,isJob:m})})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Partition set"}),(0,s.jsx)("td",{children:u?(0,s.jsx)(tz,{schedule:t,repoAddress:n}):"None"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Schedule"}),(0,s.jsx)("td",{children:i?(0,s.jsxs)(n7.Z,{direction:"row",spacing:8,children:[(0,s.jsx)("span",{children:(0,tU.A)(i,o||"UTC")}),(0,s.jsxs)(g.EK,{children:["(",i,")"]})]}):(0,s.jsx)("div",{children:"—"})})]}),o?(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:"Execution timezone"}),(0,s.jsx)("td",{children:o})]}):null]})})]})};function tM(){var e=(0,p._)(["\n  fragment ScheduleFragment on Schedule {\n    id\n    name\n    cronSchedule\n    executionTimezone\n    pipelineName\n    solidSelection\n    mode\n    description\n    partitionSet {\n      id\n      name\n    }\n    scheduleState {\n      id\n      ...InstigationStateFragment\n    }\n    futureTicks(limit: 5) {\n      results {\n        timestamp\n      }\n    }\n  }\n\n  ","\n"]);return tM=function(){return e},e}var tG=(0,h.Ps)(tM(),n6.ai),tB=t(36057);function tV(){var e=(0,p._)(['\n  query ScheduleRootQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...ScheduleFragment\n      }\n      ... on ScheduleNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SCHEDULER") {\n          id\n          healthy\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return tV=function(){return e},e}function tW(){var e=(0,p._)(["\n  query PreviousRunsForScheduleQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n\n  ","\n"]);return tW=function(){return e},e}var tJ=function(e){(0,v.Px)();var n=e.repoAddress,t=(0,u.UO)().scheduleName;(0,b.j)("Schedule: ".concat(t));var r=(0,e$._)((0,eF._)({},(0,eM.$)(n)),{scheduleName:t}),i=(0,z._)(d.useState("ticks"),2),o=i[0],a=i[1],l=(0,x.a)(tQ,{variables:{scheduleSelector:r},notifyOnNetworkStatusChange:!0}),c=(0,ef.C4)(l,ef.dT),p=(0,s.jsxs)(j.mQ,{selectedTabId:o,onChange:a,children:[(0,s.jsx)(j.OK,{id:"ticks",title:"Tick history"}),(0,s.jsx)(j.OK,{id:"runs",title:"Run history"})]});return(0,s.jsx)(eT.g,{queryResult:l,allowStaleData:!0,children:function(e){var t=e.scheduleOrError,r=e.instance;if("Schedule"!==t.__typename)return null;var i=!r.daemonHealth.daemonStatus.healthy;return(0,s.jsxs)(m.T,{children:[(0,s.jsx)(tH,{repoAddress:n,schedule:t,refreshState:c}),i?(0,s.jsx)(tB.K,{daemonHealth:r.daemonHealth,padding:{vertical:16,horizontal:24}}):null,"ticks"===o?(0,s.jsx)(ts,{tabs:p,repoAddress:n,name:t.name}):(0,s.jsx)(tK,{repoAddress:n,schedule:t,tabs:p})]})}})},tK=function(e){var n=e.schedule,t=e.highlightedIds,r=e.tabs,i=(0,x.a)(tZ,{variables:{limit:20,filter:{pipelineName:n.pipelineName,tags:[{key:ec.H.ScheduleName,value:n.name}]}},notifyOnNetworkStatusChange:!0});(0,ef.C4)(i,ef.dT);var o=i.data;if(!o)return null;if("Runs"!==o.pipelineRunsOrError.__typename)return(0,s.jsx)(l.t,{icon:"error",title:"Query Error",description:o.pipelineRunsOrError.message});var a=null==o?void 0:o.pipelineRunsOrError.results;return(0,s.jsx)(tu.AL,{actionBarComponents:r,runs:a,highlightedIds:t,hideCreatedBy:!0})},tQ=(0,h.Ps)(tV(),tG,U.B,nL.O),tZ=(0,h.Ps)(tW(),tu.ZZ),tY=t(67881);function tX(){var e=(0,p._)(["\n  fragment SensorFragment on Sensor {\n    id\n    jobOriginId\n    name\n    description\n    minIntervalSeconds\n    sensorType\n    nextTick {\n      timestamp\n    }\n    sensorState {\n      id\n      ...InstigationStateFragment\n    }\n    targets {\n      pipelineName\n      solidSelection\n      mode\n    }\n    metadata {\n      assetKeys {\n        path\n      }\n    }\n  }\n\n  ","\n"]);return tX=function(){return e},e}var t0=(0,h.Ps)(tX(),n6.ai),t1=t(35971);function t2(){var e=(0,p._)(["\n  query PreviousRunsForSensorQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"]);return t2=function(){return e},e}var t4=function(e){var n,t=e.sensor,r=e.highlightedIds,i=e.tabs,o=(0,x.a)(t3,{variables:{limit:20,filter:{pipelineName:(null===(n=t.targets)||void 0===n?void 0:n.length)===1?t.targets[0].pipelineName:void 0,tags:[{key:ec.H.SensorName,value:t.name}]}}}).data;if(!o||"Runs"!==o.pipelineRunsOrError.__typename)return null;var a=null==o?void 0:o.pipelineRunsOrError.results;return(0,s.jsx)(tu.AL,{actionBarComponents:i,runs:a,highlightedIds:r,hideCreatedBy:!0})},t3=(0,h.Ps)(t2(),tu.ZZ);function t6(){var e=(0,p._)(['\n  query SensorRootQuery($sensorSelector: SensorSelector!) {\n    sensorOrError(sensorSelector: $sensorSelector) {\n      ... on Sensor {\n        id\n        ...SensorFragment\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SENSOR") {\n          id\n          healthy\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return t6=function(){return e},e}var t5=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,u.UO)().sensorName;(0,b.j)("Sensor: ".concat(t));var r=(0,e$._)((0,eF._)({},(0,eM.$)(n)),{sensorName:t}),i=(0,z._)(d.useState("ticks"),2),o=i[0],c=i[1],p=(0,x.a)(t8,{variables:{sensorSelector:r},notifyOnNetworkStatusChange:!0}),h=(0,ef.C4)(p,ef.dT),f=(0,s.jsxs)(j.mQ,{selectedTabId:o,onChange:c,children:[(0,s.jsx)(j.OK,{id:"ticks",title:"Tick history"}),(0,s.jsx)(j.OK,{id:"runs",title:"Run history"})]});return(0,s.jsx)(eT.g,{queryResult:p,allowStaleData:!0,children:function(e){var r=e.sensorOrError,i=e.instance;if("SensorNotFoundError"===r.__typename)return(0,s.jsx)(a.x,{padding:{vertical:32},flex:{justifyContent:"center"},children:(0,s.jsx)(l.t,{icon:"error",title:"Could not find sensor `".concat(t,"` in definitions for `").concat(n.name,"`")})});if("PythonError"===r.__typename)return(0,s.jsx)(eY.T9,{error:r});if("Sensor"!==r.__typename)return null;var c=!i.daemonHealth.daemonStatus.healthy;return(0,s.jsxs)(m.T,{children:[(0,s.jsx)(tY.e,{repoAddress:n,sensor:r,daemonHealth:i.daemonHealth.daemonStatus.healthy,refreshState:h}),c?(0,s.jsx)(t1.F,{daemonHealth:i.daemonHealth,padding:{vertical:16,horizontal:24}}):null,(0,s.jsx)(ta,{repoAddress:n,name:r.name}),"ticks"===o?(0,s.jsx)(ts,{tabs:f,repoAddress:n,name:r.name}):(0,s.jsx)(t4,{repoAddress:n,sensor:r,tabs:f})]})}})},t8=(0,h.Ps)(t6(),t0,U.B,nL.O);function t7(){var e=(0,p._)(["\n  query GraphExplorerRootQuery(\n    $graphSelector: GraphSelector\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    graphOrError(selector: $graphSelector) {\n      ... on Graph {\n        id\n        name\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n        ...GraphExplorerFragment\n      }\n      ... on GraphNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return t7=function(){return e},e}var t9=function(e){(0,v.Px)();var n=e.repoAddress,t=(0,w.p3)((0,u.UO)()[0]),r=t.opNames.length>1?t.opNames[t.opNames.length-2]:t.pipelineName;return(0,b.j)("Graph: ".concat(r)),(0,s.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,s.jsx)(f.m,{title:(0,s.jsx)(g.X6,{children:r}),tags:(0,s.jsxs)(y.V,{icon:"schema",children:["Graph in ",(0,s.jsx)(_.b,{repoAddress:n})]})}),(0,s.jsx)(a.x,{border:"top",style:{minHeight:0,flex:1,display:"flex"},children:(0,s.jsx)(re,{repoAddress:n})})]})},re=function(e){var n=e.repoAddress,t=(0,w.p3)((0,u.UO)()["0"]),r=(0,u.k6)(),i=(0,z._)(d.useState({explodeComposites:!1,preferAssetRendering:!0}),2),o=i[0],a=i[1],c=t.opNames.slice(0,t.opNames.length-1),p=(0,x.a)(rn,{variables:{graphSelector:{repositoryName:(null==n?void 0:n.name)||"",repositoryLocationName:(null==n?void 0:n.location)||"",graphName:t.pipelineName},rootHandleID:c.join("."),requestScopeHandleID:o.explodeComposites?void 0:c.join(".")}});return(0,s.jsx)(eT.g,{queryResult:p,children:function(i){var c=i.graphOrError;if("GraphNotFoundError"===c.__typename)return(0,s.jsx)(l.t,{icon:"error",title:"Graph not found",description:c.message});if("PythonError"===c.__typename)return(0,s.jsx)(l.t,{icon:"error",title:"Query Error",description:c.message});var d=c.solidHandle,u=o.explodeComposites?(0,e9.i)(c.solidHandles):c.solidHandles;return(0,s.jsx)(ne.m0,{options:o,setOptions:a,explorerPath:t,onChangeExplorerPath:function(n,t){var i=(0,N.$U)(e.repoAddress,"/graphs/".concat((0,w.gY)(n)));"push"===t?r.push(i):r.replace(i)},container:c,repoAddress:n,handles:u,parentHandle:d||void 0,isGraph:!0,getInvocations:function(e){return u.filter(function(n){return n.solid.definition.name===e}).map(function(e){return{handleID:e.handleID}})}})}})},rn=(0,h.Ps)(t7(),ne.Q,ne.Sm,U.B),rt=t(71539),rr=t(90350),ri=t(68577),ro=t(99200),rs=t(79424),ra=t(55055),rl=t(4250),rc=t(20323);function rd(){var e=(0,p._)(["\n  cursor: pointer;\n\n  :focus,\n  :active {\n    outline: none;\n  }\n\n  ",'[aria-label="arrow_drop_down"] {\n    transition: transform 100ms linear;\n    ',"\n  }\n"]);return rd=function(){return e},e}function ru(){var e=(0,p._)(["\n  fragment RepoAssetTableFragment on AssetNode {\n    id\n    assetKey {\n      path\n    }\n    groupName\n    ...AssetTableDefinitionFragment\n  }\n\n  ","\n"]);return ru=function(){return e},e}var rp="UNGROUPED",rh=function(e){var n=e.repoAddress,t=e.assets,r=d.useRef(null),i=(0,eh.Uz)(n),o=rg("".concat(i,"-").concat("assets-virtualized-expansion-state")),a=o.expandedKeys,l=o.onToggle,c=d.useMemo(function(){var e={},n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value,l=a.groupName||rp,c=e[l]||[];e[l]=(0,eG._)(c).concat([a])}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e},[t]),u=d.useMemo(function(){var e=[];return Object.entries(c).forEach(function(n){var t=(0,z._)(n,2),r=t[0],i=t[1];e.push({type:"group",name:r,assetCount:i.length}),a.includes(r)&&i.forEach(function(n){e.push({type:"asset",id:n.id,definition:n})})}),e},[c,a]),p=(0,ri.useVirtualizer)({count:u.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=u[e];return(null==n?void 0:n.type)==="group"?48:64},overscan:5}),h=p.getTotalSize(),x=p.getVirtualItems();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rc.XC,{nameLabel:"Asset name"}),(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsx)(rl.W2,{ref:r,children:(0,s.jsx)(rl.Nh,{$totalHeight:h,children:x.map(function(e){var t=e.index,r=e.key,i=e.size,o=e.start,c=u[t];return"group"===c.type?(0,s.jsx)(rx,{repoAddress:n,groupName:c.name,assetCount:c.assetCount,expanded:a.includes(c.name),height:i,start:o,onToggle:l},r):(0,s.jsx)(rc.pN,{showCheckboxColumn:!1,definition:c.definition,path:c.definition.assetKey.path,type:"asset",repoAddress:n,showRepoColumn:!1,height:i,start:o,checked:!1,onToggleChecked:function(){},onWipe:function(){}},r)})})})})]})},rx=function(e){var n=e.repoAddress,t=e.groupName,r=e.assetCount,i=e.expanded,o=e.height,l=e.start,c=e.onToggle;return(0,s.jsx)(rm,{$height:o,$start:l,onClick:function(){return c(t)},$open:i,tabIndex:0,onKeyDown:function(e){("Space"===e.code||"Enter"===e.code)&&(e.preventDefault(),c(t))},children:(0,s.jsxs)(a.x,{background:et.w.Gray50,flex:{direction:"row",alignItems:"center",gap:8,justifyContent:"space-between"},padding:{horizontal:24},border:"bottom",style:{height:"100%"},children:[(0,s.jsxs)(a.x,{flex:{alignItems:"center",gap:8},children:[(0,s.jsx)(eZ.JO,{name:"asset_group"}),t===rp?(0,s.jsx)("div",{children:"Ungrouped assets"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("strong",{children:t}),t!==rp?(0,s.jsx)(a.x,{margin:{left:12},children:(0,s.jsx)(ea.rU,{to:(0,N.$U)(n,"/asset-groups/".concat(t)),children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,s.jsx)("span",{children:"View lineage"}),(0,s.jsx)(eZ.JO,{name:"open_in_new",size:16,color:et.w.Link})]})})}):null]})]}),(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,s.jsx)(y.V,{children:1===r?"1 asset":"".concat(r," assets")}),(0,s.jsx)(eZ.JO,{name:"arrow_drop_down",size:20})]})]})})},rm=(0,nx.ZP)(rl.X2).withConfig({componentId:"sc-68722d7a-0"})(rd(),eZ.a1,function(e){return e.$open?null:"transform: rotate(-90deg);"}),rf=function(e){return Array.isArray(e)?e:[]},rg=function(e){var n=d.useContext(ro.I).basePath,t=(0,z._)((0,ra.U)("".concat(n,":dagster.").concat(e),rf),2),r=t[0],i=t[1],o=d.useCallback(function(e){i(function(n){var t=new Set(n||[]);return t.has(e)?t.delete(e):t.add(e),Array.from(t)})},[i]);return d.useMemo(function(){return{expandedKeys:r,onToggle:o}},[r,o])},rj=(0,h.Ps)(ru(),rs.s),ry=t(59859);function rv(){var e=(0,p._)(["\n  query WorkspaceAssetsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        assetNodes {\n          id\n          ...RepoAssetTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return rv=function(){return e},e}var rS=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,eh.Uz)(n);(0,b.j)("Assets: ".concat(t));var r=(0,eM.$)(n),i=(0,z._)((0,nW.q)({queryKey:"search",defaults:{search:""}}),2),o=i[0],c=i[1],u=(0,x.a)(rb,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),p=u.data,h=u.loading,m=(0,ef.C4)(u,ef.dT),f=o.trim().toLocaleLowerCase().length>0,g=d.useMemo(function(){return(null==p?void 0:p.repositoryOrError.__typename)==="Repository"?p.repositoryOrError.assetNodes:[]},[p]),j=(0,rr.h)(o,g);return(0,s.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(ry.h,{repoAddress:n,tab:"assets",refreshState:m,queryData:u}),(0,s.jsx)(a.x,{padding:{horizontal:24,vertical:16},children:(0,s.jsx)(rt.oi,{icon:"search",value:o,onChange:function(e){return c(e.target.value)},placeholder:"Filter by asset name…",style:{width:"340px"}})}),h&&!p?(0,s.jsx)(a.x,{padding:64,children:(0,s.jsx)(eQ.$,{purpose:"page"})}):h&&!p?(0,s.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(eQ.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:et.w.Gray600},children:"Loading assets…"})]})}):j.length?(0,s.jsx)(rh,{repoAddress:n,assets:j}):f?(0,s.jsx)(a.x,{padding:{top:20},children:(0,s.jsx)(l.t,{icon:"search",title:"No matching assets",description:(0,s.jsxs)("div",{children:["No assets matching ",(0,s.jsx)("strong",{children:o})," were found in ",t]})})}):(0,s.jsx)(a.x,{padding:{top:20},children:(0,s.jsx)(l.t,{icon:"search",title:"No assets",description:"No assets were found in ".concat(t)})})]})},rb=(0,h.Ps)(rv(),rj,U.B),r_=t(56536);function rw(){var e=(0,p._)(["\n  display: grid;\n  grid-template-columns: 100%;\n  height: 100%;\n"]);return rw=function(){return e},e}function rk(){var e=(0,p._)(["\n  query SingleGraphQuery($selector: GraphSelector!) {\n    graphOrError(selector: $selector) {\n      ... on Graph {\n        id\n        name\n        description\n      }\n    }\n  }\n"]);return rk=function(){return e},e}var rC=function(e){var n=e.repoAddress,t=e.graphs,r=d.useRef(null),i=(0,ri.useVirtualizer)({count:t.length,getScrollElement:function(){return r.current},estimateSize:function(){return 64},overscan:10}),o=i.getTotalSize(),l=i.getVirtualItems();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:"100%",height:"32px",fontSize:"12px",color:et.w.Gray600},children:(0,s.jsx)(rl.qN,{children:"Graph"})}),(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsx)(rl.W2,{ref:r,children:(0,s.jsx)(rl.Nh,{$totalHeight:o,children:l.map(function(e){var r=e.index,i=e.key,o=e.size,a=e.start,l=t[r];return(0,s.jsx)(rN,{name:l.name,description:l.description,path:l.path,repoAddress:n,height:o,start:a},i)})})})})]})},rN=function(e){var n=e.name,t=e.path,r=e.description,i=e.repoAddress,o=e.start,l=e.height,c=(0,z._)((0,tI.t)(rP,{variables:{selector:{repositoryName:i.name,repositoryLocationName:i.location,graphName:n}}}),2),u=c[0],p=c[1];(0,r_.v5)(u);var h=p.data,x=d.useMemo(function(){return r||((null==h?void 0:h.graphOrError.__typename)==="Graph"?h.graphOrError.description:null)},[h,r]);return(0,s.jsx)(rl.X2,{$height:l,$start:o,children:(0,s.jsx)(rE,{border:"bottom",children:(0,s.jsx)(rl.E5,{children:(0,s.jsxs)(a.x,{flex:{direction:"column"},children:[(0,s.jsx)("div",{style:{whiteSpace:"nowrap",fontWeight:500},children:(0,s.jsx)(ea.rU,{to:(0,N.$U)(i,t),children:n})}),x?(0,s.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,s.jsx)(g.YS,{style:{color:et.w.Gray500,whiteSpace:"nowrap"},children:x})}):null]})})})})},rE=(0,nx.ZP)(a.x).withConfig({componentId:"sc-36d1f01a-0"})(rw()),rP=(0,h.Ps)(rk());function rA(){var e=(0,p._)(["\n  query WorkspaceGraphsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        usedSolids {\n          definition {\n            ... on CompositeSolidDefinition {\n              id\n              name\n              description\n            }\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n        pipelines {\n          id\n          name\n          isJob\n          graphName\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return rA=function(){return e},e}var rR=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,eh.Uz)(n);(0,b.j)("Graphs: ".concat(t));var r=(0,eM.$)(n),i=(0,z._)((0,nW.q)({queryKey:"search",defaults:{search:""}}),2),o=i[0],c=i[1],u=(0,x.a)(rO,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),p=u.data,h=u.loading,m=(0,ef.C4)(u,ef.dT),f=o.trim().toLocaleLowerCase(),g=f.length>0,j=d.useMemo(function(){var e=null==p?void 0:p.repositoryOrError;if(!e||"Repository"!==e.__typename)return[];var n=Array.from(new Set(e.pipelines.filter(function(e){return e.isJob&&!(0,el.pv)(e.name)}).map(function(e){return e.graphName}))).map(function(e){return{name:e,path:"/graphs/".concat(e),description:null}});return e.usedSolids.forEach(function(e){if("CompositeSolidDefinition"===e.definition.__typename){var t=e.invocations[0];t&&n.push({name:e.definition.name,path:"/graphs/".concat(t.pipeline.name,"/").concat(t.solidHandle.handleID,"/"),description:e.definition.description})}}),n.sort(function(e,n){return e.name.localeCompare(n.name)})},[p]),y=d.useMemo(function(){var e=f.toLocaleLowerCase();return j.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[j,f]);return(0,s.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(ry.h,{repoAddress:n,tab:"graphs",refreshState:m,queryData:u}),(0,s.jsx)(a.x,{padding:{horizontal:24,vertical:16},children:(0,s.jsx)(rt.oi,{icon:"search",value:o,onChange:function(e){return c(e.target.value)},placeholder:"Filter by graph name…",style:{width:"340px"}})}),h&&!p?(0,s.jsx)(a.x,{padding:64,children:(0,s.jsx)(eQ.$,{purpose:"page"})}):h&&!p?(0,s.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(eQ.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:et.w.Gray600},children:"Loading graphs…"})]})}):y.length?(0,s.jsx)(rC,{repoAddress:n,graphs:y}):g?(0,s.jsx)(a.x,{padding:{top:20},children:(0,s.jsx)(l.t,{icon:"search",title:"No matching graphs",description:(0,s.jsxs)("div",{children:["No graphs matching ",(0,s.jsx)("strong",{children:o})," were found in ",t]})})}):(0,s.jsx)(a.x,{padding:{top:20},children:(0,s.jsx)(l.t,{icon:"search",title:"No graphs",description:"No graphs were found in ".concat(t)})})]})},rO=(0,h.Ps)(rA(),U.B),rI=t(38181),rT=function(e){var n=e.repoAddress,t=e.jobs,r=d.useRef(null),i=(0,ri.useVirtualizer)({count:t.length,getScrollElement:function(){return r.current},estimateSize:function(){return 64},overscan:10}),o=i.getTotalSize(),a=i.getVirtualItems();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rI.I,{}),(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsx)(rl.W2,{ref:r,children:(0,s.jsx)(rl.Nh,{$totalHeight:o,children:a.map(function(e){var r=e.index,i=e.key,o=e.size,a=e.start,l=t[r];return(0,s.jsx)(rI.b,{name:l.name,isJob:l.isJob,repoAddress:n,height:o,start:a},i)})})})})]})};function rF(){var e=(0,p._)(["\n  query WorkspaceJobsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        pipelines {\n          id\n          name\n          isJob\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return rF=function(){return e},e}var r$=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,eh.Uz)(n);(0,b.j)("Jobs: ".concat(t));var r=(0,eM.$)(n),i=(0,z._)((0,nW.q)({queryKey:"search",defaults:{search:""}}),2),o=i[0],c=i[1],u=(0,x.a)(rz,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),p=u.data,h=u.loading,m=(0,ef.C4)(u,ef.dT),f=o.trim().toLocaleLowerCase(),g=f.length>0,j=d.useMemo(function(){return(null==p?void 0:p.repositoryOrError.__typename)==="Repository"?p.repositoryOrError.pipelines:[]},[p]),y=d.useMemo(function(){var e=f.toLocaleLowerCase();return j.filter(function(n){var t=n.name;return!(0,el.pv)(t)&&t.toLocaleLowerCase().includes(e)})},[j,f]);return(0,s.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(ry.h,{repoAddress:n,tab:"jobs",refreshState:m,queryData:u}),(0,s.jsx)(a.x,{padding:{horizontal:24,vertical:16},children:(0,s.jsx)(rt.oi,{icon:"search",value:o,onChange:function(e){return c(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})}),h&&!p?(0,s.jsx)(a.x,{padding:64,children:(0,s.jsx)(eQ.$,{purpose:"page"})}):h&&!p?(0,s.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(eQ.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:et.w.Gray600},children:"Loading jobs…"})]})}):y.length?(0,s.jsx)(rT,{repoAddress:n,jobs:y}):g?(0,s.jsx)(a.x,{padding:{top:20},children:(0,s.jsx)(l.t,{icon:"search",title:"No matching jobs",description:(0,s.jsxs)("div",{children:["No jobs matching ",(0,s.jsx)("strong",{children:o})," were found in ",t]})})}):(0,s.jsx)(a.x,{padding:{top:20},children:(0,s.jsx)(l.t,{icon:"search",title:"No jobs",description:"No jobs were found in ".concat(t)})})]})},rz=(0,h.Ps)(rF(),U.B),rD=t(82361),rL=t(28413),rU=t(8504),rq=t(41061),rH=t(41248),rM=t(35507),rG=t(55084);function rB(){var e=(0,p._)(["\n  fragment OpCardSolidDefinitionFragment on ISolidDefinition {\n    name\n    description\n    metadata {\n      key\n      value\n    }\n    inputDefinitions {\n      name\n    }\n    outputDefinitions {\n      name\n    }\n    ...OpNodeDefinitionFragment\n  }\n\n  ","\n"]);return rB=function(){return e},e}function rV(){var e=(0,p._)(["\n  flex: 1;\n  max-width: 450px;\n  position: relative;\n"]);return rV=function(){return e},e}var rW=function(e){var n=e.definition,t=n.name,r=n.inputDefinitions,i=n.outputDefinitions,o=(0,rG.og)({name:t,inputs:r.map(function(e){return{definition:e,dependsOn:[]}}),outputs:i.map(function(e){return{definition:e,dependedBy:[]}}),definition:{description:null,assetNodes:[]}},{x:0,y:0});return(0,s.jsx)(a.x,{padding:24,children:(0,s.jsx)(rK,{style:{height:o.bounds.height},children:(0,s.jsx)(rM.Un,{invocation:void 0,definition:e.definition,minified:!1,onClick:function(){},onDoubleClick:function(){},onEnterComposite:function(){},onHighlightEdges:function(){},layout:o,selected:!1,focused:!1,highlightedEdges:[],dim:!1})})})},rJ=(0,h.Ps)(rB(),rM.WH),rK=nx.ZP.div.withConfig({componentId:"sc-a7fc6ba0-0"})(rV());function rQ(){var e=(0,p._)(["\n  query UsedSolidDetailsQuery($name: String!, $repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolid(name: $name) {\n          definition {\n            ...OpCardSolidDefinitionFragment\n            ...SidebarOpDefinitionFragment\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return rQ=function(){return e},e}function rZ(){var e=(0,p._)(["\n  overflow: scroll;\n  flex: 1;\n"]);return rZ=function(){return e},e}var rY=function(e){var n=e.name,t=e.onClickInvocation,r=e.repoAddress,i=(0,eM.$)(r),o=(0,x.a)(rX,{variables:{name:n,repositorySelector:i}});return(0,s.jsx)(eT.g,{queryResult:o,children:function(e){var n=e.repositoryOrError;if(!((null==n?void 0:n.__typename)==="Repository"&&n.usedSolid))return null;var r=n.usedSolid;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rW,{definition:r.definition}),(0,s.jsx)(rH.I,{definition:r.definition,showingSubgraph:!1,onClickInvocation:t,getInvocations:function(){return r.invocations.map(function(e){return{handleID:e.solidHandle.handleID,pipelineName:e.pipeline.name}})}})]})}})},rX=(0,h.Ps)(rQ(),rJ,rH.u),r0=nx.ZP.div.withConfig({componentId:"sc-d143b841-0"})(rZ()),r1=t(50431);function r2(){var e=(0,p._)(["\n  .solids-list:focus {\n    outline: none;\n  }\n"]);return r2=function(){return e},e}function r4(){var e=(0,p._)(["\n  query OpsRootQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolids {\n          ...OpsRootUsedSolid\n        }\n      }\n    }\n  }\n\n  fragment OpsRootUsedSolid on UsedSolid {\n    definition {\n      name\n      ...OpTypeSignatureFragment\n    }\n    invocations {\n      pipeline {\n        id\n        isJob\n        name\n      }\n    }\n  }\n\n  ","\n"]);return r4=function(){return e},e}function r3(){var e=(0,p._)(["\n  background: ",";\n  box-shadow:\n    "," 4px 0 0 inset,\n    "," 0 -1px 0 inset;\n  color: ",";\n  cursor: pointer;\n  font-size: 14px;\n  display: flex;\n  flex-direction: column;\n  padding: 12px 24px;\n  user-select: none;\n\n  & > code.bp4-code {\n    color: ",";\n    background: transparent;\n    font-family: ",";\n    padding: 5px 0 0 0;\n  }\n"]);return r3=function(){return e},e}function r6(){var e=(0,p._)(["\n  flex: 1;\n  font-weight: 600;\n"]);return r6=function(){return e},e}function r5(){var e=(0,p._)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n"]);return r5=function(){return e},e}var r8=rq.qj,r7=rq.Z8,r9=rq.aV;function ie(e){var n={},t=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var a=o.value,l=!0,c=!1,d=void 0;try{for(var u,p=a[Symbol.iterator]();!(l=(u=p.next()).done);l=!0)n[u.value]=!0}catch(e){c=!0,d=e}finally{try{l||null==p.return||p.return()}finally{if(c)throw d}}}}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}return Object.keys(n).sort(function(e,n){return e.localeCompare(n)})}var it=function(e){(0,v.Px)(),(0,b.j)("Ops");var n=(0,u.UO)().name,t=e.repoAddress,r=(0,eM.$)(t),i=(0,x.a)(is,{variables:{repositorySelector:r}});return(0,s.jsx)("div",{style:{height:"100%"},children:(0,s.jsx)(eT.g,{queryResult:i,children:function(r){var i=r.repositoryOrError;return(null==i?void 0:i.__typename)==="Repository"&&i.usedSolids?(0,s.jsx)(ir,(0,e$._)((0,eF._)({},e),{name:n,repoAddress:t,usedSolids:i.usedSolids})):null}})})},ir=function(e){var n=e.name,t=e.repoAddress,r=e.usedSolids,i=(0,u.k6)(),o=(0,u.TH)(),c=Q().parse(o.search,{ignoreQueryPrefix:!0}),p=c.q,h=c.typeExplorer,x=[{token:"name",values:function(){return r.map(function(e){return e.definition.name})}},{token:"job",values:function(){return ie(r.map(function(e){return e.invocations.filter(function(e){return!e.pipeline.isJob}).map(function(e){return e.pipeline.name})}))}},{token:"pipeline",values:function(){return ie(r.map(function(e){return e.invocations.filter(function(e){return e.pipeline.isJob}).map(function(e){return e.pipeline.name})}))}},{token:"input",values:function(){return ie(r.map(function(e){return e.definition.inputDefinitions.map(function(e){return e.type.displayName})}))}},{token:"output",values:function(){return ie(r.map(function(e){return e.definition.outputDefinitions.map(function(e){return e.type.displayName})}))}}],m=(0,rL.HE)(p||"",x),f=r.filter(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=m[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=function(){var n=i.value;if(("name"===n.token||void 0===n.token)&&!e.definition.name.startsWith(n.value)||("pipeline"===n.token||"job"===n.token)&&!e.invocations.some(function(e){return e.pipeline.name===n.value})||"input"===n.token&&!e.definition.inputDefinitions.some(function(e){return e.type.displayName.startsWith(n.value)})||"output"===n.token&&!e.definition.outputDefinitions.some(function(e){return e.type.displayName.startsWith(n.value)}))return{v:!1}}();if("object"===(0,rD._)(s))return s.v}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return!0}),g=r.find(function(e){return e.definition.name===n}),j=function(e){i.replace({search:"?".concat(Q().stringify({q:(0,rL.jP)(e)}))})},y=function(e){i.replace((0,N.$U)(t,"/ops/".concat(e,"?").concat(Q().stringify({q:p}))))};d.useEffect(function(){1!==f.length||g&&f[0]===g||y(f[0].definition.name),"string"==typeof h&&j((0,eG._)(m).concat([{token:"input",value:h}]))});var v=d.useCallback(function(e){var n=e.pipelineName,r=e.handleID;i.push((0,N.$U)(t,"/pipeline_or_job/".concat(n,"/").concat(r.split(".").join("/"))))},[i,t]);return(0,s.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,s.jsx)(rU.O,{identifier:"ops",firstInitialPercent:40,firstMinSize:420,first:(0,s.jsxs)(ic,{children:[(0,s.jsx)(a.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,s.jsx)(rL.Gf,{values:m,onChange:function(e){return j(e)},suggestionProviders:x,placeholder:"Filter by name or input/output type..."})}),(0,s.jsx)("div",{style:{flex:1},children:(0,s.jsx)(r8,{nonce:window.__webpack_nonce__,children:function(e){var n=e.height,t=e.width;return(0,s.jsx)(ii,{height:n,width:t,selected:g,onClickOp:y,items:f.sort(function(e,n){return e.definition.name.localeCompare(n.definition.name)})})}})})]}),second:g?(0,s.jsx)(r0,{children:(0,s.jsx)(rY,{name:g.definition.name,onClickInvocation:v,repoAddress:t})}):(0,s.jsx)(a.x,{padding:{vertical:64},children:(0,s.jsx)(l.t,{icon:"no-results",title:"No op selected",description:"Select an op to see its definition and invocations"})})})})},ii=function(e){var n=e.items,t=e.selected,r=d.useRef(new rq.t1({defaultHeight:60,fixedWidth:!0})),i=d.useRef(e.width);e.width!==i.current&&(r.current.clearAll(),i.current=e.width);var o=t?n.findIndex(function(e){return e===t}):void 0;return(0,s.jsx)(io,{children:(0,s.jsx)(r9,{width:e.width,height:e.height,rowCount:e.items.length,rowHeight:r.current.rowHeight,scrollToIndex:o,className:"solids-list",rowRenderer:function(n){var t=n.parent,i=n.index,o=n.key,a=n.style,l=e.items[i];return(0,s.jsx)(r7,{cache:r.current,index:i,parent:t,children:(0,s.jsxs)(ia,{style:a,selected:l===e.selected,onClick:function(){return e.onClickOp(l.definition.name)},children:[(0,s.jsx)(il,{children:l.definition.name}),(0,s.jsx)(r1.z,{definition:l.definition})]})},o)},overscanRowCount:10})})},io=nx.ZP.div.withConfig({componentId:"sc-fa750b96-0"})(r2()),is=(0,h.Ps)(r4(),r1.C),ia=nx.ZP.div.withConfig({componentId:"sc-fa750b96-1"})(r3(),function(e){return e.selected?et.w.Gray100:et.w.White},function(e){return e.selected?et.w.HighlightGreen:"transparent"},et.w.KeylineGray,et.w.Gray800,et.w.Gray800,nq.b.monospace),il=nx.ZP.div.withConfig({componentId:"sc-fa750b96-2"})(r6()),ic=nx.ZP.div.withConfig({componentId:"sc-fa750b96-3"})(r5()),id=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,eh.Uz)(n);return(0,b.j)("Ops: ".concat(t)),(0,s.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(ry.h,{repoAddress:n,tab:"ops"}),(0,s.jsx)(it,{repoAddress:n})]})},iu=t(69627),ip=t(57454),ih=t(22179),ix=t(17612),im=t(63542),ig=t(1506),ij=t(65382),iy=t(39040),iv=t(57673),iS=function(e){var n=e.repoAddress,t=e.schedules,r=e.headerCheckbox,i=e.checkedKeys,o=e.onToggleCheckFactory,a=d.useRef(null),l=(0,ri.useVirtualizer)({count:t.length,getScrollElement:function(){return a.current},estimateSize:function(){return 64},overscan:10}),c=l.getTotalSize(),u=l.getVirtualItems();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(iv.o,{checkbox:r}),(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsx)(rl.W2,{ref:a,children:(0,s.jsx)(rl.Nh,{$totalHeight:c,children:u.map(function(e){var a=e.index,l=e.key,c=e.size,d=e.start,u=t[a],p=(0,im.g)(n,u.name);return(0,s.jsx)(iv.i,{name:u.name,repoAddress:n,scheduleState:u.scheduleState,checked:i.has(p),showCheckboxColumn:!!r,onToggleChecked:o(p),height:c,start:d},l)})})})})]})};function ib(){var e=(0,p._)(["\n  query WorkspaceSchedulesQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        schedules {\n          id\n          name\n          description\n          scheduleState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return ib=function(){return e},e}var i_=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,eh.Uz)(n);(0,b.j)("Schedules: ".concat(t));var r=(0,eM.$)(n),i=(0,z._)((0,nW.q)({queryKey:"search",defaults:{search:""}}),2),o=i[0],c=i[1],u=(0,iy.g)(),p=d.useMemo(function(){return[u]},[u]),h=(0,ij.m)({filters:p}),m=h.button,f=h.activeFiltersJsx,g=(0,x.a)(iw,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),j=g.data,y=g.loading,S=(0,ef.C4)(g,ef.dT),_=o.trim().toLocaleLowerCase(),w=_.length>0,k=d.useMemo(function(){return(null==j?void 0:j.repositoryOrError.__typename)==="Repository"?j.repositoryOrError.schedules:[]},[j]),C=u.state,N=d.useMemo(function(){return C.size?k.filter(function(e){var n=e.scheduleState;return C.has(n.status)}):k},[k,C]),E=d.useMemo(function(){var e=_.toLocaleLowerCase();return N.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[N,_]),P=E.length>0,A=d.useMemo(function(){return E.filter(function(e){var n=e.scheduleState;return(0,ip.i)(n)})},[E]),R=d.useMemo(function(){return A.map(function(e){var t=e.name;return(0,im.g)(n,t)})},[A,n]),O=(0,z._)((0,iu.a)(R),2),I=O[0].checkedIds,T=O[1],F=T.onToggleFactory,$=T.onToggleAll,D=d.useMemo(function(){return A.filter(function(e){var t=e.name;return I.has((0,im.g)(n,t))}).map(function(e){return{repoAddress:n,scheduleName:e.name,scheduleState:e.scheduleState}})},[A,I,n]),L=R.length,U=I.size,q=R.length>0;return(0,s.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(ry.h,{repoAddress:n,tab:"schedules",refreshState:S,queryData:g}),(0,s.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,s.jsxs)(a.x,{flex:{direction:"row",gap:12},children:[m,(0,s.jsx)(rt.oi,{icon:"search",value:o,onChange:function(e){c(e.target.value),$(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"}})]}),(0,s.jsx)(ex.u,{content:"You do not have permission to start or stop these schedules",canShow:P&&!q,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,s.jsx)(ix._,{schedules:D,onDone:function(){return S.refetch()}})})]}),f.length?(0,s.jsx)(a.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:f}):null,y&&!j?(0,s.jsx)(a.x,{padding:64,children:(0,s.jsx)(eQ.$,{purpose:"page"})}):y&&!j?(0,s.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(eQ.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:et.w.Gray600},children:"Loading schedules…"})]})}):E.length?(0,s.jsx)(iS,{repoAddress:n,schedules:E,headerCheckbox:q?(0,s.jsx)(ig.W,{checkedCount:U,totalCount:L,onToggleAll:$}):void 0,checkedKeys:I,onToggleCheckFactory:F}):w?(0,s.jsx)(a.x,{padding:{top:20},children:(0,s.jsx)(l.t,{icon:"search",title:"No matching schedules",description:(0,s.jsxs)("div",{children:["No schedules matching ",(0,s.jsx)("strong",{children:o})," were found in ",t]})})}):(0,s.jsx)(a.x,{padding:{top:20},children:(0,s.jsx)(l.t,{icon:"search",title:"No schedules",description:"No schedules were found in ".concat(t)})})]})},iw=(0,h.Ps)(ib(),ih.i,U.B),ik=t(92493),iC=t(45907),iN=t(37523),iE=function(e){var n=e.repoAddress,t=e.sensors,r=e.headerCheckbox,i=e.checkedKeys,o=e.onToggleCheckFactory,a=d.useRef(null),l=(0,ri.useVirtualizer)({count:t.length,getScrollElement:function(){return a.current},estimateSize:function(){return 64},overscan:10}),c=l.getTotalSize(),u=l.getVirtualItems();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(iN.K,{checkbox:r}),(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsx)(rl.W2,{ref:a,children:(0,s.jsx)(rl.Nh,{$totalHeight:c,children:u.map(function(e){var a=e.index,l=e.key,c=e.size,d=e.start,u=t[a],p=(0,iC.x)(n,u.name);return(0,s.jsx)(iN.R,{name:u.name,repoAddress:n,sensorState:u.sensorState,checked:i.has(p),showCheckboxColumn:!!r,onToggleChecked:o(p),height:c,start:d},l)})})})})]})};function iP(){var e=(0,p._)(["\n  query WorkspaceSensorsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        sensors {\n          id\n          name\n          description\n          sensorState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return iP=function(){return e},e}var iA=function(e){var n=e.repoAddress;(0,v.Px)();var t=(0,eh.Uz)(n);(0,b.j)("Sensors: ".concat(t));var r=(0,eM.$)(n),i=(0,z._)((0,nW.q)({queryKey:"search",defaults:{search:""}}),2),o=i[0],c=i[1],u=(0,iy.g)(),p=d.useMemo(function(){return[u]},[u]),h=(0,ij.m)({filters:p}),m=h.button,f=h.activeFiltersJsx,g=(0,x.a)(iR,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:r}}),j=g.data,y=g.loading,S=(0,ef.C4)(g,ef.dT),_=o.trim().toLocaleLowerCase(),w=_.length>0,k=d.useMemo(function(){return(null==j?void 0:j.repositoryOrError.__typename)==="Repository"?j.repositoryOrError.sensors:[]},[j]),C=u.state,N=d.useMemo(function(){return C.size?k.filter(function(e){var n=e.sensorState;return C.has(n.status)}):k},[k,C]),E=d.useMemo(function(){var e=_.toLocaleLowerCase();return N.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})},[N,_]),P=E.length>0,A=d.useMemo(function(){return E.filter(function(e){var n=e.sensorState;return(0,ip.i)(n)})},[E]),R=d.useMemo(function(){return A.map(function(e){var t=e.name;return(0,iC.x)(n,t)})},[A,n]),O=(0,z._)((0,iu.a)(R),2),I=O[0].checkedIds,T=O[1],F=T.onToggleFactory,$=T.onToggleAll,D=d.useMemo(function(){return A.filter(function(e){var t=e.name;return I.has((0,iC.x)(n,t))}).map(function(e){return{repoAddress:n,sensorName:e.name,sensorState:e.sensorState}})},[A,I,n]),L=R.length,U=I.size,q=R.length>0;return(0,s.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(ry.h,{repoAddress:n,tab:"sensors",refreshState:S,queryData:g}),(0,s.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,s.jsxs)(a.x,{flex:{direction:"row",gap:12},children:[m,(0,s.jsx)(rt.oi,{icon:"search",value:o,onChange:function(e){return c(e.target.value)},placeholder:"Filter by sensor name…",style:{width:"340px"}})]}),(0,s.jsx)(ex.u,{content:"You do not have permission to start or stop these sensors",canShow:P&&!q,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,s.jsx)(ik.b,{sensors:D,onDone:function(){return S.refetch()}})})]}),f.length?(0,s.jsx)(a.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:f}):null,y&&!j?(0,s.jsx)(a.x,{padding:64,children:(0,s.jsx)(eQ.$,{purpose:"page"})}):y&&!j?(0,s.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(eQ.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:et.w.Gray600},children:"Loading sensors…"})]})}):E.length?(0,s.jsx)(iE,{repoAddress:n,sensors:E,headerCheckbox:q?(0,s.jsx)(ig.W,{checkedCount:U,totalCount:L,onToggleAll:$}):void 0,checkedKeys:I,onToggleCheckFactory:F}):w?(0,s.jsx)(a.x,{padding:{top:20},children:(0,s.jsx)(l.t,{icon:"search",title:"No matching sensors",description:(0,s.jsxs)("div",{children:["No sensors matching ",(0,s.jsx)("strong",{children:o})," were found in ",t]})})}):(0,s.jsx)(a.x,{padding:{top:20},children:(0,s.jsx)(l.t,{icon:"search",title:"No sensors",description:"No sensors were found in ".concat(t)})})]})},iR=(0,h.Ps)(iP(),ih.i,U.B),iO=t(81855),iI=function(){var e=(0,u.UO)().repoPath,n=d.useContext(H.C5),t=(0,iO.g)(e);return t?n.loading?(0,s.jsx)("div",{}):n.allRepos.find(function(e){return e.repository.name===t.name&&e.repositoryLocation.name===t.location})?(0,s.jsxs)(u.rs,{children:[(0,s.jsx)(u.AW,{path:"/locations/:repoPath/resources",exact:!0,children:(0,s.jsx)(nD.g,{repoAddress:t})}),(0,s.jsx)(u.AW,{path:"/locations/:repoPath/assets",exact:!0,children:(0,s.jsx)(rS,{repoAddress:t})}),(0,s.jsx)(u.AW,{path:"/locations/:repoPath/jobs",exact:!0,children:(0,s.jsx)(r$,{repoAddress:t})}),(0,s.jsx)(u.AW,{path:"/locations/:repoPath/schedules",exact:!0,children:(0,s.jsx)(i_,{repoAddress:t})}),(0,s.jsx)(u.AW,{path:"/locations/:repoPath/sensors",exact:!0,children:(0,s.jsx)(iA,{repoAddress:t})}),(0,s.jsx)(u.AW,{path:"/locations/:repoPath/graphs",exact:!0,children:(0,s.jsx)(rR,{repoAddress:t})}),(0,s.jsx)(u.AW,{path:"/locations/:repoPath/ops/:name?",exact:!0,children:(0,s.jsx)(id,{repoAddress:t})}),(0,s.jsx)(u.AW,{path:"/locations/:repoPath/graphs/(/?.*)",children:(0,s.jsx)(t9,{repoAddress:t})}),(0,s.jsx)(u.AW,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)","/locations/:repoPath/pipeline_or_job/(/?.*)"],children:(0,s.jsx)(n$,{repoAddress:t})}),(0,s.jsx)(u.AW,{path:"/locations/:repoPath/schedules/:scheduleName/:runTab?",children:(0,s.jsx)(tJ,{repoAddress:t})}),(0,s.jsx)(u.AW,{path:"/locations/:repoPath/sensors/:sensorName",children:(0,s.jsx)(t5,{repoAddress:t})}),(0,s.jsx)(u.AW,{path:"/locations/:repoPath/resources/:resourceName",children:(0,s.jsx)(nz.r,{repoAddress:t})}),(0,s.jsx)(u.AW,{path:["/locations/:repoPath/asset-groups/:groupName/list(/?.*)"],children:(0,s.jsx)(I,{repoAddress:t,tab:"list"})}),(0,s.jsx)(u.AW,{path:["/locations/:repoPath/asset-groups/:groupName/(/?.*)","/locations/:repoPath/asset-groups/:groupName"],children:(0,s.jsx)(I,{repoAddress:t,tab:"lineage"})}),(0,s.jsx)(u.AW,{path:"/locations/:repoPath/*",children:(0,s.jsx)(u.l_,{to:(0,N.$U)(t,"/assets")})})]}):(0,s.jsx)(a.x,{padding:{vertical:64},children:(0,s.jsx)(l.t,{icon:"error",title:"Unknown code location",description:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:(0,s.jsx)("strong",{children:(0,eh.Uz)(t)})}),"  is not loaded in the current workspace."]})})}):(0,s.jsx)(a.x,{padding:{vertical:64},children:(0,s.jsx)(l.t,{icon:"error",title:"Invalid code location path",description:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:(0,s.jsx)("strong",{children:e})}),"  is not a valid code location path."]})})})},iT=function(){return(0,s.jsx)(c.M,{children:(0,s.jsx)(u.rs,{children:(0,s.jsx)(u.AW,{path:"/locations/:repoPath",children:(0,s.jsx)(iI,{})})})})},iF=iT}}]);
//# sourceMappingURL=843.06f0aadbc8215a0d.js.map