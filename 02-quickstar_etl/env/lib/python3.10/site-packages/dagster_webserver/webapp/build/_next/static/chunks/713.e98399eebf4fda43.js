"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[713],{91713:function(e,n,t){t.r(n),t.d(n,{OverviewRoot:function(){return tb},default:function(){return tk}});var r=t(52322),s=t(2784),i=t(7267),o=t(85333),a=t(73235),l=t(40794),c=t(60138),u=t(98353),d=t(62540),h=t(19369),f=t(2736),p=t(45),x=t(51269),g=t(87905),m=t(14590),v=t(63757),j=t(48608),y=t(34503),w=t(11780),b=t(89072),k=function(e){var n=e.refreshState,t=e.tab;return(0,r.jsxs)(f.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,r.jsxs)(w.mQ,{selectedTabId:t,children:[(0,r.jsx)(b.f,{id:"activity",title:"Activity",to:"/overview/activity"}),(0,r.jsx)(b.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),(0,r.jsx)(b.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),(0,r.jsx)(b.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),(0,r.jsx)(b.f,{id:"resources",title:"Resources",to:"/overview/resources"}),(0,r.jsx)(b.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,r.jsx)(f.x,{padding:{bottom:8},children:(0,r.jsx)(v.xi,{refreshState:n})}):null]})},S=t(27330),C=t(88498),E=t(72171),A=t(7464),_=t(75262);function T(){var e=(0,a._)(["\n  query InstanceHealthForBackfillsQuery {\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n"]);return T=function(){return e},e}function I(){var e=(0,a._)(["\n  query InstanceBackfillsQuery($cursor: String, $limit: Int) {\n    partitionBackfillsOrError(cursor: $cursor, limit: $limit) {\n      ... on PartitionBackfills {\n        results {\n          id\n          status\n          isValidSerialization\n          numPartitions\n          timestamp\n          partitionSetName\n          partitionSet {\n            id\n            name\n            mode\n            pipelineName\n            repositoryOrigin {\n              id\n              repositoryName\n              repositoryLocationName\n            }\n          }\n          error {\n            ...PythonErrorFragment\n          }\n\n          ...BackfillTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return I=function(){return e},e}var N=function(){(0,j.Px)(),(0,y.j)("Overview | Backfills");var e=(0,l.a)(O),n=(0,C.l)({query:R,variables:{},pageSize:10,nextCursorForResult:function(e){var n;return"PartitionBackfills"===e.partitionBackfillsOrError.__typename?null===(n=e.partitionBackfillsOrError.results[9])||void 0===n?void 0:n.id:void 0},getResultArray:function(e){return(null==e?void 0:e.partitionBackfillsOrError.__typename)==="PartitionBackfills"?e.partitionBackfillsOrError.results:[]}}),t=n.queryResult,s=n.paginationProps,i=(0,v.C4)(t,v.dT);return(0,r.jsxs)(u.T,{children:[(0,r.jsx)(d.m,{title:(0,r.jsx)(h.X6,{children:"Overview"}),tabs:(0,r.jsx)(k,{tab:"backfills",refreshState:i})}),(0,r.jsx)(E.g,{queryResult:t,allowStaleData:!0,children:function(n){var i,a=n.partitionBackfillsOrError;if("PythonError"===a.__typename)return(0,r.jsx)(m.T9,{error:a});if(!a.results.length)return(0,r.jsx)(f.x,{padding:{vertical:64},children:(0,r.jsx)(p.t,{icon:"no-results",title:"No backfills found",description:(0,r.jsx)("p",{children:"This instance does not have any backfill jobs."})})});var l=((null===(i=e.data)||void 0===i?void 0:i.instance.daemonHealth.allDaemonStatuses)||[]).filter(function(e){return"BACKFILL"===e.daemonType}).map(function(e){return e.required&&e.healthy}),c=l.length&&l.every(function(e){return e});return(0,r.jsxs)("div",{children:[c?null:(0,r.jsx)(f.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(S.B1,{})}),(0,r.jsx)(_.G,{backfills:a.results.slice(0,10),refetch:t.refetch}),a.results.length>0?(0,r.jsx)("div",{style:{marginTop:"16px"},children:(0,r.jsx)(x.b$,(0,o._)({},s))}):null]})}})]})},O=(0,c.Ps)(T(),A.O),R=(0,c.Ps)(I(),g.B,_.b),L=t(58467),P=t(82550),F=t(91588),z=t(34706),B=t(42033),U=t(87323),M=t(47625),D=t(80572),q=t(70399),V=t(28879),$=t.n(V),K=t(64989),W=t.n(K),G=t(77491),Q=t.n(G),J=t(47933),H=t(35505),Y=t(44816),Z=t(28292),X=t(50292),ee=t(7334),en=t(54788),et=t(47424),er=t(1176),es=t(89247),ei=t(13133),eo=t(98099),ea=t(84922);function el(){var e=(0,a._)(["\n  color: ",";\n  font-size: 12px;\n  line-height: 16px;\n"]);return el=function(){return e},e}function ec(){var e=(0,a._)(["\n  query BackfillStatusesByAsset($backfillId: String!) {\n    partitionBackfillOrError(backfillId: $backfillId) {\n      ...PartitionBackfillFragment\n      ...PythonErrorFragment\n      ... on BackfillNotFoundError {\n        message\n      }\n    }\n  }\n\n  fragment PartitionBackfillFragment on PartitionBackfill {\n    id\n    status\n    timestamp\n    endTimestamp\n    numPartitions\n    ...BackfillActionsBackfillFragment\n\n    error {\n      ...PythonErrorFragment\n    }\n    assetBackfillData {\n      rootAssetTargetedRanges {\n        start\n        end\n      }\n      rootAssetTargetedPartitions\n      assetBackfillStatuses {\n        ... on AssetPartitionsStatusCounts {\n          assetKey {\n            path\n          }\n          numPartitionsTargeted\n          numPartitionsInProgress\n          numPartitionsMaterialized\n          numPartitionsFailed\n        }\n        ... on UnpartitionedAssetStatus {\n          assetKey {\n            path\n          }\n          inProgress\n          materialized\n          failed\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return ec=function(){return e},e}$().extend(W()),$().extend(Q());var eu=function(){var e=(0,i.UO)().backfillId;(0,j.Px)(),(0,y.j)("Backfill | ".concat(e));var n=(0,l.a)(ex,{variables:{backfillId:e}}),t=n.data,s=(null==t?void 0:t.partitionBackfillOrError.__typename)==="PartitionBackfill"?t.partitionBackfillOrError:null,o=!s||[ee.Jv3.REQUESTED,ee.Jv3.CANCELING].includes(s.status),a=(0,v.C4)(n,1e4,o);return(0,r.jsxs)(u.T,{children:[(0,r.jsx)(d.m,{title:(0,r.jsxs)(h.X6,{children:[(0,r.jsx)(J.rU,{to:"/overview/backfills",style:{color:U.w.Gray700},children:"Backfills"})," / ",e]}),right:(0,r.jsxs)(f.x,{flex:{gap:12,alignItems:"center"},children:[o?(0,r.jsx)(v.xi,{refreshState:a}):null,s?(0,r.jsx)(eo.WH,{backfill:s,refetch:n.refetch,canCancelRuns:s.status===ee.Jv3.REQUESTED}):null]})}),function(){if(!t||!t.partitionBackfillOrError)return(0,r.jsx)(f.x,{padding:64,"data-testid":(0,er.N)("page-loading-indicator"),children:(0,r.jsx)(F.$,{purpose:"page"})});if("PythonError"===t.partitionBackfillOrError.__typename)return(0,r.jsx)(m.T9,{error:t.partitionBackfillOrError});if("BackfillNotFoundError"===t.partitionBackfillOrError.__typename)return(0,r.jsx)(p.t,{icon:"no-results",title:t.partitionBackfillOrError.message});var n,s,i,o=t.partitionBackfillOrError;function a(n){var t=[{token:"tag",value:"dagster/backfill=".concat(e)}];switch(n){case"inProgress":t.push({token:"status",value:ee.VOA.STARTED},{token:"status",value:ee.VOA.QUEUED},{token:"status",value:ee.VOA.STARTING},{token:"status",value:ee.VOA.CANCELING},{token:"status",value:ee.VOA.NOT_STARTED});break;case"complete":t.push({token:"status",value:ee.VOA.SUCCESS});break;case"failed":t.push({token:"status",value:ee.VOA.FAILURE}),t.push({token:"status",value:ee.VOA.CANCELED})}return(0,et.it)(t)}var l=function(){var e,n;if((null===(n=o.assetBackfillData)||void 0===n?void 0:null===(e=n.rootAssetTargetedRanges)||void 0===e?void 0:e.length)===1){var t,r=null===(t=o.assetBackfillData)||void 0===t?void 0:t.rootAssetTargetedRanges;if(null==r?void 0:r.length){var s=r[0],i=s.start,a=s.end;return{default_range:"[".concat(i,"...").concat(a,"]")}}}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.x,{padding:24,flex:{direction:"row",justifyContent:"space-between",wrap:"nowrap",alignItems:"center"},"data-testid":(0,er.N)("backfill-page-details"),children:[(0,r.jsx)(ed,{label:"Created",detail:(0,r.jsx)(Y.E,{timestamp:{ms:Number(1e3*o.timestamp)},timeFormat:{showSeconds:!0,showTimezone:!1}})}),(0,r.jsx)(ed,{label:"Duration",detail:(0,r.jsx)(ep,{start:1e3*o.timestamp,end:o.endTimestamp?1e3*o.endTimestamp:null})}),(0,r.jsx)(ed,{label:"Partition selection",detail:(0,r.jsx)(em,{numPartitions:o.numPartitions||0,rootAssetTargetedPartitions:null===(n=o.assetBackfillData)||void 0===n?void 0:n.rootAssetTargetedPartitions,rootAssetTargetedRanges:null===(s=o.assetBackfillData)||void 0===s?void 0:s.rootAssetTargetedRanges})}),(0,r.jsx)(ed,{label:"Status",detail:(0,r.jsx)(ea.w,{backfill:o})})]}),(0,r.jsxs)(z.i,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{width:"50%"},children:"Asset name"}),(0,r.jsx)("th",{children:(0,r.jsx)(J.rU,{to:a("targeted"),children:"Partitions targeted"})}),(0,r.jsx)("th",{children:(0,r.jsx)(J.rU,{to:a("inProgress"),children:"In progress"})}),(0,r.jsx)("th",{children:(0,r.jsx)(J.rU,{to:a("complete"),children:"Completed"})}),(0,r.jsx)("th",{children:(0,r.jsx)(J.rU,{to:a("failed"),children:"Failed"})})]})}),(0,r.jsx)("tbody",{children:null===(i=o.assetBackfillData)||void 0===i?void 0:i.assetBackfillStatuses.map(function(e){var n,t,s,i;return"AssetPartitionsStatusCounts"===e.__typename?(n=e.numPartitionsTargeted,t=e.numPartitionsInProgress,s=e.numPartitionsMaterialized,i=e.numPartitionsFailed):(n=1,i=e.failed?1:0,t=e.inProgress?1:0,s=e.materialized?1:0),(0,r.jsxs)("tr",{"data-testid":(0,er.N)("backfill-asset-row-".concat((0,Z.Je)(e.assetKey))),children:[(0,r.jsx)("td",{children:(0,r.jsxs)(f.x,{flex:{direction:"row",justifyContent:"space-between"},children:[(0,r.jsx)("div",{children:(0,r.jsx)(J.rU,{to:(0,X.p)(e.assetKey,l()),children:e.assetKey.path.join("/")})}),(0,r.jsx)("div",{children:(0,r.jsx)(eh,{targeted:n,inProgress:t,completed:s,failed:i})})]})}),"AssetPartitionsStatusCounts"===e.__typename?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{children:n}),(0,r.jsx)("td",{children:t}),(0,r.jsx)("td",{children:s}),(0,r.jsx)("td",{children:i})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{children:"-"}),(0,r.jsx)("td",{children:t?(0,r.jsx)(B.V,{icon:"spinner",intent:"primary",children:"In progress"}):"-"}),(0,r.jsx)("td",{children:s?(0,r.jsx)(B.V,{intent:"success",children:"Completed"}):"-"}),(0,r.jsx)("td",{children:i?(0,r.jsx)(B.V,{intent:"danger",children:"Failed"}):"-"})]})]},(0,Z.Je)(e.assetKey))})})]})]})}()]})},ed=function(e){var n=e.label,t=e.detail;return(0,r.jsxs)(f.x,{flex:{direction:"column",gap:4},style:{minWidth:"280px"},children:[(0,r.jsx)(ef,{children:n}),(0,r.jsx)("div",{children:t})]})};function eh(e){var n=e.targeted,t=e.inProgress,s=e.completed,i=e.failed;return(0,r.jsxs)("div",{style:{borderRadius:"8px",backgroundColor:U.w.Gray100,display:"grid",gridTemplateColumns:"".concat(100*s/n,"% ").concat(100*i/n,"% ").concat(100*t/n,"%"),gridTemplateRows:"100%",height:"12px",width:"200px",overflow:"hidden"},children:[(0,r.jsx)("div",{style:{background:U.w.Green500}}),(0,r.jsx)("div",{style:{background:U.w.Red500}}),(0,r.jsx)("div",{style:{background:U.w.Blue200}})]})}var ef=H.ZP.div.withConfig({componentId:"sc-71306b18-0"})(el(),U.w.Gray700),ep=function(e){var n=e.start,t=e.end,i=(0,L._)(s.useReducer(function(e,n){return e+1},0),2),o=(i[0],i[1]);s.useEffect(function(){if(!t){var e=setInterval(o,6e4);return function(){return clearInterval(e)}}},[n,t]);var a=t?t-n:Date.now()-n;return(0,r.jsx)("span",{children:ev(a)})},ex=(0,c.Ps)(ec(),g.B,eo.V2),eg=new Intl.Collator(navigator.language,{sensitivity:"base",numeric:!0}),em=function(e){var n=e.numPartitions,t=e.rootAssetTargetedRanges,i=e.rootAssetTargetedPartitions,o=(0,L._)(s.useState(!1),2),a=o[0],l=o[1];if(i)return i.length<=3?(0,r.jsx)(f.x,{flex:{direction:"row",gap:8,wrap:"wrap"},children:i.map(function(e){return(0,r.jsx)(B.V,{children:e},e)})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(M.Z,{onClick:function(){return l(!0)},children:[ei.V.format(n)," partitions"]}),(0,r.jsxs)(D.Vq,{isOpen:a,title:"Partition selection (".concat(i.length,")"),onClose:function(){return l(!1)},children:[(0,r.jsx)("div",{style:{height:"340px",overflow:"hidden"},children:(0,r.jsx)(es.Y,{items:(0,P._)(i).sort(function(e,n){return eg.compare(e,n)}),renderItem:function(e){return(0,r.jsx)("div",{children:(0,r.jsx)(en.rd,{text:e})},e)}})}),(0,r.jsx)(D.cN,{topBorder:!0,children:(0,r.jsx)(q.zx,{onClick:function(){return l(!1)},children:"Close"})})]})]});if(t){if((null==t?void 0:t.length)===1){var c=t[0],u=c.start,d=c.end;return(0,r.jsxs)("div",{children:[u,"...",d]})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(M.Z,{onClick:function(){return l(!0)},children:[ei.V.format(n)," partitions"]}),(0,r.jsxs)(D.Vq,{isOpen:a,title:"Partition selection (".concat(null==t?void 0:t.length,")"),onClose:function(){return l(!1)},children:[(0,r.jsx)("div",{style:{height:"340px",overflow:"hidden"},children:(0,r.jsx)(es.Y,{items:t||[],renderItem:function(e){var n=e.start,t=e.end;return(0,r.jsx)("div",{children:"".concat(n,"...").concat(t)},"".concat(n,":").concat(t))}})}),(0,r.jsx)(D.cN,{topBorder:!0,children:(0,r.jsx)(q.zx,{onClick:function(){return l(!1)},children:"Close"})})]})]})}return(0,r.jsx)("div",{children:1===n?"1 partition":"".concat(n," partitions")})},ev=function(e){var n=Math.floor(e/6e4%60),t=Math.floor(e/36e5%24),r=Math.floor(e/864e5),s="";return r>0?s+="".concat(r,"d ")+"".concat(t,"h"):t>0?s+="".concat(t,"h ")+"".concat(n,"m"):n>0&&(s+="".concat(n,"m ")+"".concat(Math.floor(e/1e3%60),"s")),s.trim()},ej=t(55055),ey=t(26977),ew=t(6692),eb=t(71539),ek=t(85112),eS=t(72096),eC=t(73336),eE=t(55829),eA=t(68577),e_=t(71549),eT=t(18200),eI=t(26176),eN=t(70957),eO=t(76358),eR=t(3358),eL=t(4250),eP=t(61018),eF=t(41060);function ez(){var e=(0,a._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n  > * {\n    padding-top: 26px 0px;\n  }\n"]);return ez=function(){return e},e}function eB(){var e=(0,a._)(["\n  font-size: 12px;\n  pointer-events: none;\n  a {\n    color: ",";\n    pointer-events: none;\n    max-width: ",";\n  }\n"]);return eB=function(){return e},e}function eU(){var e=(0,a._)(["\n  cursor: pointer;\n  &:hover {\n    font-weight: 600;\n  }\n"]);return eU=function(){return e},e}function eM(){var e=(0,a._)(["\n  &:hover {\n    text-decoration: none;\n  }\n"]);return eM=function(){return e},e}var eD=function(e){var n,t,i,o=e.Header,a=e.TabButton;(0,j.Px)(),(0,y.j)("Overview | Assets");var c=(0,l.a)(eN.C1,{notifyOnNetworkStatusChange:!0}),u=(0,v.C4)(c,v.dT),d=s.useMemo(function(){var e,n,t;return(null===(e=c.data)||void 0===e?void 0:e.assetsOrError.__typename)==="AssetConnection"?(n=c.data.assetsOrError.nodes,t={},n.forEach(function(e){if(e.definition){var n=e.definition.groupName,r=e.definition.repository.name,s="".concat(n,"||").concat(r),i=t[s]||{groupName:n,repositoryName:r,assets:[]};i.assets.push(e),t[s]=i}}),Object.values(t)):[]},[null===(i=c.data)||void 0===i?void 0:i.assetsOrError]),h=(0,L._)((0,eO.q)({queryKey:"q",decode:function(e){return e.searchQuery?JSON.parse(e.searchQuery):""},encode:function(e){return{searchQuery:e?JSON.stringify(e):void 0}}}),2),p=h[0],x=h[1],g=s.useMemo(function(){return""===p?d:d.filter(function(e){return(e.groupName||e$).toLowerCase().includes(p.toLowerCase())||e.repositoryName.toLowerCase().includes(p.toLowerCase())})},[d,p]),w=s.useRef(null),b=(0,eA.useVirtualizer)({count:g.length,getScrollElement:function(){return w.current},estimateSize:function(){return 82},overscan:5}),k=b.getTotalSize(),S=b.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,r.jsx)(o,{refreshState:u}),(0,r.jsxs)(f.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(a,{selected:"assets"}),(0,r.jsx)(eb.oi,{value:p,onChange:function(e){x(e.target.value)},placeholder:"Filter asset groups…"})]})]}),(t=null===(n=c.data)||void 0===n?void 0:n.assetsOrError,!c.data&&c.loading?(0,r.jsx)(f.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(F.$,{purpose:"page"})}):(null==t?void 0:t.__typename)==="PythonError"?(0,r.jsx)(f.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(m.T9,{error:t})}):(0,r.jsx)(f.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,r.jsxs)(eL.W2,{ref:w,children:[(0,r.jsx)(eV,{}),(0,r.jsx)(eL.Nh,{$totalHeight:k,children:S.map(function(e){var n=e.index,t=e.key,s=e.size,i=e.start,o=g[n];return(0,r.jsx)(eK,{start:i,height:s,group:o},t)})})]})}))]})},eq="5fr 1fr 1fr 1fr 1fr";function eV(){return(0,r.jsxs)(f.x,{border:"top-and-bottom",style:{display:"grid",gridTemplateColumns:eq,height:"32px",fontSize:"12px",color:U.w.Gray600,position:"sticky",top:0,zIndex:1,background:U.w.White},children:[(0,r.jsx)(eL.qN,{children:"Group name"}),(0,r.jsx)(eL.qN,{children:"Missing"}),(0,r.jsx)(eL.qN,{children:"Failed/Overdue"}),(0,r.jsx)(eL.qN,{children:"In progress"}),(0,r.jsx)(eL.qN,{children:"Materialized"})]})}var e$="Ungrouped Assets";function eK(e){var n,t,i=e.height,a=e.start,l=e.group,c=s.useMemo(function(){return l.assets.map(function(e){return{path:e.key.path}})},[l.assets]),u=(0,eT.le)(c,!0).liveDataByNode,d=s.useMemo(function(){var e={successful:[],failed:[],inprogress:[],missing:[],loading:!1};return Object.keys(u).length?Object.keys(u).forEach(function(n){var t=u[n],r=l.assets.find(function(e){return(0,Z.Wu)(e.key)===n});if(!(null==r?void 0:r.definition)){console.warn("Expected a definition for asset with key",n);return}var s=(0,e_.D5)({assetKey:{path:JSON.parse(n)},definition:r.definition,liveData:t,expanded:!0});switch(s.case){case e_.KB.LOADING:e.loading=!0;break;case e_.KB.SOURCE_OBSERVING:e.inprogress.push({asset:r,status:s});break;case e_.KB.SOURCE_OBSERVED:e.successful.push({asset:r,status:s});break;case e_.KB.SOURCE_NEVER_OBSERVED:case e_.KB.SOURCE_NO_STATE:e.missing.push({asset:r,status:s});break;case e_.KB.MATERIALIZING:e.inprogress.push({asset:r,status:s});break;case e_.KB.LATE_OR_FAILED:e.failed.push({asset:r,status:s});break;case e_.KB.NEVER_MATERIALIZED:e.missing.push({asset:r,status:s});break;case e_.KB.MATERIALIZED:e.successful.push({asset:r,status:s});break;case e_.KB.PARTITIONS_FAILED:e.failed.push({asset:r,status:s});break;case e_.KB.PARTITIONS_MISSING:e.missing.push({asset:r,status:s});break;case e_.KB.PARTITIONS_MATERIALIZED:e.successful.push({asset:r,status:s})}}):e.loading=!0,e},[u,l.assets]),h=null===(t=l.assets.find(function(e){var n;return null===(n=e.definition)||void 0===n?void 0:n.repository}))||void 0===t?void 0:null===(n=t.definition)||void 0===n?void 0:n.repository,p=(0,eP.kQ)((null==h?void 0:h.name)||"",(null==h?void 0:h.location.name)||""),x=(0,ek.S)(),g=x.containerProps,m=x.viewport,v=c.length!==Object.keys(u).length;return(0,r.jsx)(eL.X2,{$height:i,$start:a,children:(0,r.jsxs)(eW,{border:"bottom",children:[(0,r.jsx)(eG,{children:(0,r.jsxs)(f.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,r.jsxs)(f.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,r.jsxs)(f.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(eS.JO,{name:"asset_group"}),l.groupName?(0,r.jsx)(J.rU,{style:{fontWeight:700},to:(0,eF.$U)(p,"/asset-groups/".concat(l.groupName)),children:l.groupName}):e$]}),(0,r.jsx)("div",(0,ew._)((0,o._)({},g),{children:(0,r.jsx)(eQ,{maxWidth:m.width,children:(0,r.jsx)(eR.b,{repoAddress:p,showRefresh:!1})})}))]}),(0,r.jsx)(f.x,{flex:{direction:"column",justifyContent:"center"},children:v?(0,r.jsx)(F.$,{purpose:"body-text"}):null})]})}),(0,r.jsx)(eG,{children:d.missing.length?(0,r.jsx)(eJ,{assets:d.missing,getCount:function(e){var n=e.status;return n.case===e_.KB.PARTITIONS_MISSING&&n.numMissing||0},adjective:"missing",children:(0,r.jsx)(B.V,{intent:"none",children:(0,r.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(U.w.Gray500),borderRadius:"50%"}}),d.missing.length]})})}):0}),(0,r.jsx)(eG,{children:d.failed.length?(0,r.jsx)(eJ,{assets:d.failed,getCount:function(e){var n=e.status;return n.case===e_.KB.PARTITIONS_FAILED&&n.numFailed||0},adjective:"failed",children:(0,r.jsx)(B.V,{intent:"danger",children:(0,r.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),d.failed.length]})})}):0}),(0,r.jsx)(eG,{children:d.inprogress.length?(0,r.jsx)(eJ,{assets:d.inprogress,getCount:function(e){var n=e.status;return n.case===e_.KB.MATERIALIZING&&n.numMaterializing||0},adjective:"materializing",children:(0,r.jsx)(B.V,{intent:"primary",icon:"spinner",children:d.inprogress.length})}):0}),(0,r.jsx)(eG,{children:d.successful.length?(0,r.jsx)(eJ,{assets:d.successful,getCount:function(e){var n=e.status;return n.case===e_.KB.PARTITIONS_MATERIALIZED&&n.numMaterialized||0},adjective:"materialized",children:(0,r.jsx)(B.V,{intent:"success",children:(0,r.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{backgroundColor:U.w.Green500,width:"10px",height:"10px",borderRadius:"50%"}}),d.successful.length]})})}):0})]})})}var eW=(0,H.ZP)(f.x).withConfig({componentId:"sc-8d08f942-0"})(ez(),eq),eG=function(e){var n=e.children;return(0,r.jsx)(eL.E5,{style:{color:U.w.Gray900},children:(0,r.jsx)(f.x,{flex:{direction:"row",alignItems:"center",grow:1},children:n})})},eQ=H.ZP.div.withConfig({componentId:"sc-8d08f942-1"})(eB(),U.w.Gray600,function(e){var n=e.maxWidth;return n?"unset":"".concat(n,"px")});function eJ(e){var n=e.assets,t=e.children,s=e.getCount,i=e.adjective;return(0,r.jsx)(eH,{children:(0,r.jsx)(eC.P,{items:n,itemPredicate:function(e,n){return(0,Z.ll)(n.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase())},itemRenderer:function(e){var n=s(e);return(0,r.jsx)(eY,{to:(0,X.p)(e.asset.key),target:"_blank",children:(0,r.jsx)(eE.sN,{text:(0,r.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)("div",{style:{paddingLeft:"4px"},children:(0,r.jsx)(eS.JO,{name:"asset"})}),(0,r.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,Z.ll)(e.asset.key)}),n&&n>0?(0,r.jsxs)(h.YS,{style:{color:U.w.Gray700},children:[(0,eI._e)(n)," ",i]}):null]})},(0,Z.ll)(e.asset.key))})},onItemSelect:function(){},children:t})})}var eH=H.ZP.div.withConfig({componentId:"sc-8d08f942-2"})(eU()),eY=(0,H.ZP)(J.rU).withConfig({componentId:"sc-8d08f942-3"})(eM()),eZ=t(61343),eX=t(49363),e0=t(86900),e1=t(33667),e2=function(){var e=s.useContext(e1.C5),n=e.allRepos,t=e.visibleRepos,i=e.toggleVisible,o=(0,L._)(s.useState(!1),2),a=o[0],l=o[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(D.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:a,style:{width:"auto"},onClose:function(){return l(!1)},children:[(0,r.jsx)(D.fK,{icon:"repo",label:"Filter code locations"}),(0,r.jsx)(e0.e,{options:n,onBrowse:function(){return l(!1)},onToggle:i,selected:t}),(0,r.jsx)(D.cN,{children:(0,r.jsx)(f.x,{padding:{top:8},children:(0,r.jsx)(q.zx,{intent:"none",onClick:function(){return l(!1)},children:"Done"})})})]}),(0,r.jsx)(q.zx,{intent:"none",icon:(0,r.jsx)(eS.JO,{name:"folder"}),rightIcon:(0,r.jsx)(eS.JO,{name:"expand_more"}),onClick:function(){return l(!0)},children:"".concat(t.length," of ").concat(n.length)})]})},e6=t(66829),e3=function(e){var n=s.useCallback(function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}},[e]),t=(0,L._)((0,ej.U)("dagster.run-timeline-hour-window",n),2),r=t[0],i=t[1],o=s.useCallback(function(n){i(n||e)},[e,i]);return s.useMemo(function(){return[r,o]},[r,o])},e4=t(87612);function e5(){var e=(0,a._)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(cursor: $tickCursor, until: $ticksUntil) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]);return e5=function(){return e},e}var e7=(0,c.Ps)(e5()),e8=t(19618),e9=t(37842),ne=t(83221),nn=t(42354);function nt(){var e=(0,a._)(["\n  query RunTimelineQuery(\n    $inProgressFilter: RunsFilter!\n    $terminatedFilter: RunsFilter!\n    $tickCursor: Float\n    $ticksUntil: Float\n  ) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return nt=function(){return e},e}var nr=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,L._)(e,2),r=t[0],i=t[1],a=r/1e3,c=i/1e3,u=(0,l.a)(ni,{notifyOnNetworkStatusChange:!0,variables:{inProgressFilter:(0,ew._)((0,o._)({},n),{statuses:[ee.VOA.CANCELING,ee.VOA.STARTED],createdBefore:c}),terminatedFilter:(0,ew._)((0,o._)({},n),{statuses:Array.from(e9.cv),createdBefore:c,updatedAfter:a}),tickCursor:a,ticksUntil:c}}),d=u.data,h=u.previousData,f=u.loading&&!d,p=d||h||{},x=p.unterminated,g=p.terminated,m=p.workspaceOrError,v=s.useMemo(function(){var e={},n=Date.now();return(0,P._)((null==x?void 0:x.__typename)==="Runs"?x.results:[]).concat((0,P._)((null==g?void 0:g.__typename)==="Runs"?g.results:[])).forEach(function(t){if(t.startTime&&t.repositoryOrigin&&(0,nn.a)({start:r,end:i},{start:1e3*t.startTime,end:t.endTime?1e3*t.endTime:n})){var s=ns({name:t.repositoryOrigin.repositoryName,location:t.repositoryOrigin.repositoryLocationName},t.pipelineName);e[s]=(0,P._)(e[s]||[]).concat([{id:t.id,status:t.status,startTime:1e3*t.startTime,endTime:t.endTime?1e3*t.endTime:n}])}}),e},[i,x,g,r]),j=s.useMemo(function(){if(!m||"Workspace"!==m.__typename)return[];var e=[],n=!0,t=!1,s=void 0;try{for(var a,l=m.locationEntries[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)!function(){var n=a.value;if("WorkspaceLocationEntry"===n.__typename&&(null===(c=n.locationOrLoadError)||void 0===c?void 0:c.__typename)==="RepositoryLocation"){var t=Date.now(),s=!0,o=!1,l=void 0;try{for(var c,u,d=n.locationOrLoadError.repositories[Symbol.iterator]();!(s=(u=d.next()).done);s=!0)!function(){var s=u.value,o=(0,eP.kQ)(s.name,n.locationOrLoadError.name),a=!0,l=!1,c=void 0;try{for(var d,h=s.pipelines[Symbol.iterator]();!(a=(d=h.next()).done);a=!0)!function(){var n=d.value,a=(s.schedules||[]).filter(function(e){return e.pipelineName===n.name}),l=[],c=!0,u=!1,h=void 0;try{for(var f,p=a[Symbol.iterator]();!(c=(f=p.next()).done);c=!0)!function(){var e=f.value;e.scheduleState.status===ee.ynu.RUNNING&&e.futureTicks.results.forEach(function(n){var s=n.timestamp,o=1e3*s;o>t&&(0,nn.a)({start:r,end:i},{start:o,end:o})&&l.push({id:"".concat(e.pipelineName,"-future-run-").concat(s),status:"SCHEDULED",startTime:o,endTime:o+5e3})})}()}catch(e){u=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw h}}var x=(0,Z.pv)(n.name),g=ns(o,n.name),m=x?"Ad hoc materializations":n.name,j=v[g]||[];if(l.length||j.length){var y=(0,P._)(j).concat((0,P._)(l));if(x){var w,b=e.find(function(e){return"asset"===e.jobType&&e.repoAddress===o});if(b)return(w=b.runs).push.apply(w,(0,P._)(y))}e.push({key:g,jobName:m,jobType:x?"asset":"job",repoAddress:o,path:(0,eF.jT)({repoName:o.name,repoLocation:o.location,pipelineName:n.name,isJob:n.isJob}),runs:(0,P._)(j).concat((0,P._)(l))})}}()}catch(e){l=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}}()}catch(e){o=!0,l=e}finally{try{s||null==d.return||d.return()}finally{if(o)throw l}}}}()}catch(e){t=!0,s=e}finally{try{n||null==l.return||l.return()}finally{if(t)throw s}}var c=e.reduce(function(e,n){var t,r=n.runs.map(function(e){return e.startTime});return(0,ew._)((0,o._)({},e),(0,e4._)({},n.key,(t=Math).min.apply(t,(0,P._)(r))))},{});return e.sort(function(e,n){return c[e.key]-c[n.key]})},[m,v,r,i]);return s.useMemo(function(){return{jobs:j,initialLoading:f,queryData:u}},[f,j,u])},ns=function(e,n){return"".concat(n,"-").concat((0,e8.Uz)(e))},ni=(0,c.Ps)(nt(),ne.$X,e7),no=function(e){switch(e){case"1":return 36e5;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},na=function(e){var n=e.Header,t=e.TabButton;(0,j.Px)(),(0,y.j)("Overview | Timeline");var i=s.useContext(e1.C5),o=i.allRepos,a=i.visibleRepos,l=(0,L._)(e3("12"),2),c=l[0],u=l[1],d=(0,L._)(s.useState(function(){return Date.now()}),2),h=d[0],p=d[1],x=(0,L._)(s.useState(function(){return 0}),2),g=x[0],m=x[1],w=(0,L._)((0,eO.q)({queryKey:"search",defaults:{search:""}}),2),b=w[0],k=w[1];s.useEffect(function(){p(Date.now());var e=setInterval(function(){p(Date.now())},6e4);return function(){clearInterval(e)}},[c]);var S=s.useCallback(function(){m(function(e){return e-no(c)})},[c]),C=s.useCallback(function(){m(function(e){return e+no(c)})},[c]),E=s.useCallback(function(){m(0)},[]),A=s.useMemo(function(){return[h-36e5*Number(c)+g,h+36e5+g]},[c,h,g]),_=nr(A),T=_.jobs,I=_.initialLoading,N=_.queryData,O=(0,v.C4)(N,v.dT),R=s.useMemo(function(){var e=b.toLocaleLowerCase().trim(),n=a.flatMap(function(n){var t=(0,eP.kQ)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter(function(n){return n.name.toLocaleLowerCase().includes(e)}).map(function(e){return ns(t,e.name)})});return new Set(n)},[a,b]),P=s.useMemo(function(){return T.filter(function(e){var n=e.key;return R.has(n)})},[T,R]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{refreshState:O}),(0,r.jsxs)(f.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(t,{selected:"timeline"}),o.length>1&&(0,r.jsx)(e2,{}),(0,r.jsx)(eb.oi,{icon:"search",value:b,onChange:function(e){return k(e.target.value)},placeholder:"Filter by job name…",style:{width:"200px"}})]}),(0,r.jsxs)(f.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,r.jsx)(eZ.h,{activeItems:new Set([c]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return u(e)}}),(0,r.jsxs)(f.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,r.jsx)(q.zx,{onClick:S,children:"←"}),(0,r.jsx)(q.zx,{onClick:E,children:"Now"}),(0,r.jsx)(q.zx,{onClick:C,children:"→"})]})]})]}),(0,r.jsx)(eX.S,{region:"timeline",children:(0,r.jsx)(e6.q,{loading:I,range:A,jobs:P})})]})},nl=function(){(0,j.Px)(),(0,y.j)("Overview | Activity");var e=s.useCallback(function(e){var n=e.refreshState;return(0,r.jsx)(d.m,{title:(0,r.jsx)(h.X6,{children:"Overview"}),tabs:(0,r.jsx)(k,{tab:"activity",refreshState:n})})},[]),n=(0,L._)((0,ej.U)("overview-activity-tab",function(e){return["timeline","assets"].includes(e)?e:"timeline"}),2),t=n[0],o=n[1],a=s.useCallback(function(e){var n=e.selected;return t!==n&&o(n),(0,r.jsxs)(q.zH,{children:[(0,r.jsx)(ey.Q1,{$active:"timeline"===n,to:"/overview/activity/timeline",children:"Timeline"}),(0,r.jsx)(ey.Q1,{$active:"assets"===n,to:"/overview/activity/assets",children:"Assets"})]})},[t,o]);return(0,r.jsx)(f.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,r.jsxs)(i.rs,{children:[(0,r.jsx)(i.AW,{path:"/overview/activity/assets",children:(0,r.jsx)(eD,{Header:e,TabButton:a})}),(0,r.jsx)(i.AW,{path:"/overview/activity/timeline",children:(0,r.jsx)(na,{Header:e,TabButton:a})}),(0,r.jsx)(i.AW,{path:"*",render:s.useCallback(function(){return"timeline"===t?(0,r.jsx)(i.l_,{to:"/overview/activity/timeline"}):(0,r.jsx)(i.l_,{to:"/overview/activity/assets"})},[t])})]})})},nc=function(e){var n=(0,L._)(s.useState(!1),2),t=n[0],r=n[1];return s.useEffect(function(){var n=setTimeout(function(){return r(!0)},e);return function(){return clearTimeout(n)}},[e]),t},nu=t(42971),nd=function(e){var n=e.tooltipContent;return nc(2e3)?(0,r.jsx)(f.x,{margin:{top:1},children:(0,r.jsx)(nu.u,{placement:"top",canShow:!!n,content:n||"",children:(0,r.jsx)(F.$,{purpose:"body-text"})})}):null},nh=t(67310),nf=t(31527),np=t(38181),nx=t(56536),ng=t(86631),nm=function(e){var n=e.repos,t=s.useRef(null),i=s.useMemo(function(){return n.map(function(e){var n=e.repoAddress;return(0,e8.Uz)(n)})},[n]),o=(0,nf.N)(ng.y,i),a=o.expandedKeys,l=o.onToggle,c=o.onToggleAll,u=s.useMemo(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.jobs;e.push({type:"header",repoAddress:t,jobCount:r.length});var s=(0,e8.Uz)(t);a.includes(s)&&r.forEach(function(n){var r=n.isJob,s=n.name;e.push({type:"job",repoAddress:t,isJob:r,name:s})})}),e},[n,a]),d=(0,nh.w)(n.map(function(e){return e.repoAddress.name})),h=(0,eA.useVirtualizer)({count:u.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=u[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),f=h.getTotalSize(),p=h.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(np.I,{}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(eL.W2,{ref:t,children:(0,r.jsx)(eL.Nh,{$totalHeight:f,children:p.map(function(e){var n=e.index,t=e.key,s=e.size,i=e.start,o=u[n];return"header"===o.type?(0,r.jsx)(nx.vG,{repoAddress:o.repoAddress,height:s,start:i,onToggle:l,onToggleAll:c,expanded:a.includes((0,e8.Uz)(o.repoAddress)),showLocation:d.has(o.repoAddress.name),rightElement:(0,r.jsx)(nu.u,{content:1===o.jobCount?"1 job":"".concat(o.jobCount," jobs"),placement:"top",children:(0,r.jsx)(B.V,{children:o.jobCount})})},t):(0,r.jsx)(np.b,{name:o.name,isJob:o.isJob,repoAddress:o.repoAddress,height:s,start:i},t)})})})})]})},nv=function(e){return(0,P._)(e).sort(function(e,n){var t=(0,e8.Uz)(e.repoAddress),r=(0,e8.Uz)(n.repoAddress);return t.localeCompare(r)})},nj=function(e){return new Set(e.map(function(e){return(0,e8.Uz)((0,eP.kQ)(e.repository.name,e.repositoryLocation.name))}))};function ny(){var e=(0,a._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return ny=function(){return e},e}var nw=function(){(0,j.Px)(),(0,y.j)("Overview | Jobs");var e=s.useContext(e1.C5),n=e.allRepos,t=e.visibleRepos,i=e.loading,o=(0,L._)((0,eO.q)({queryKey:"search",defaults:{search:""}}),2),a=o[0],c=o[1],u=n.length,x=(0,l.a)(nk,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),g=x.data,m=x.loading,w=(0,v.C4)(x,v.dT),b=s.useMemo(function(){var e=nj(t);return nb(g).filter(function(n){var t=n.repoAddress;return e.has((0,e8.Uz)(t))})},[g,t]),S=a.trim().toLocaleLowerCase(),C=S.length>0,E=s.useMemo(function(){var e=S.toLocaleLowerCase();return b.map(function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.jobs.length>0})},[b,S]),A=i&&!u||m&&!g;return(0,r.jsxs)(f.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(d.m,{title:(0,r.jsx)(h.X6,{children:"Overview"}),tabs:(0,r.jsx)(k,{tab:"jobs",refreshState:w})}),(0,r.jsxs)(f.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[u>1?(0,r.jsx)(e2,{}):null,(0,r.jsx)(eb.oi,{icon:"search",value:a,rightElement:A?(0,r.jsx)(nd,{tooltipContent:"Loading jobs…"}):void 0,onChange:function(e){return c(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})]}),m&&!u?(0,r.jsx)(f.x,{padding:64,children:(0,r.jsx)(F.$,{purpose:"page"})}):function(){if(m&&!g)return(0,r.jsx)(f.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(F.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:U.w.Gray600},children:"Loading jobs…"})]})});var e=n.length>t.length;return E.length?(0,r.jsx)(nm,{repos:E}):C?(0,r.jsx)(f.x,{padding:{top:20},children:(0,r.jsx)(p.t,{icon:"search",title:"No matching jobs",description:e?(0,r.jsxs)("div",{children:["No jobs matching ",(0,r.jsx)("strong",{children:a})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No jobs matching ",(0,r.jsx)("strong",{children:a})," were found in your definitions"]})})}):(0,r.jsx)(f.x,{padding:{top:20},children:(0,r.jsx)(p.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})}()]})},nb=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,s=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,x=p.name,g=p.pipelines,m=(0,eP.kQ)(x,l.name),v=g.filter(function(e){var n=e.name;return!(0,Z.pv)(n)}).map(function(e){return{isJob:e.isJob,name:e.name}});v.length>0&&t.push({repoAddress:m,jobs:v})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){s=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(s)throw i}}return nv(t)},nk=(0,c.Ps)(ny(),g.B),nS=t(57378),nC=t(49806),nE=function(e){var n=e.repos,t=s.useRef(null),i=s.useMemo(function(){return n.map(function(e){var n=e.repoAddress;return(0,e8.Uz)(n)})},[n]),a=(0,nf.N)(ng.y,i),l=a.expandedKeys,c=a.onToggle,u=a.onToggleAll,d=s.useMemo(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.resources;e.push({type:"header",repoAddress:t,resourceCount:r.length});var s=(0,e8.Uz)(t);l.includes(s)&&r.forEach(function(n){e.push((0,o._)({type:"resource",repoAddress:t},n))})}),e},[n,l]),h=(0,nh.w)(n.map(function(e){return e.repoAddress.name})),f=(0,eA.useVirtualizer)({count:d.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=d[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),p=f.getTotalSize(),x=f.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nC.f,{}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(eL.W2,{ref:t,children:(0,r.jsx)(eL.Nh,{$totalHeight:p,children:x.map(function(e){var n=e.index,t=e.key,s=e.size,i=e.start,a=d[n];return"header"===a.type?(0,r.jsx)(nx.vG,{repoAddress:a.repoAddress,height:s,start:i,onToggle:c,onToggleAll:u,expanded:l.includes((0,e8.Uz)(a.repoAddress)),showLocation:h.has(a.repoAddress.name),rightElement:(0,r.jsx)(nu.u,{content:1===a.resourceCount?"1 resource":"".concat(a.resourceCount," resources"),placement:"top",children:(0,r.jsx)(B.V,{children:a.resourceCount})})},t):(0,r.jsx)(nC.K,(0,o._)({height:s,start:i},a),t)})})})})]})};function nA(){var e=(0,a._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return nA=function(){return e},e}var n_=function(){(0,j.Px)(),(0,y.j)("Overview | Resources");var e=s.useContext(e1.C5),n=e.allRepos,t=e.visibleRepos,i=e.loading,o=(0,L._)((0,eO.q)({queryKey:"search",defaults:{search:""}}),2),a=o[0],c=o[1],u=n.length,x=(0,l.a)(nI,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),g=x.data,m=x.loading,w=(0,v.C4)(x,v.dT),b=s.useMemo(function(){var e=nj(t);return nT(g).filter(function(n){var t=n.repoAddress;return e.has((0,e8.Uz)(t))})},[g,t]),S=a.trim().toLocaleLowerCase(),C=S.length>0,E=s.useMemo(function(){var e=S.toLocaleLowerCase();return b.map(function(n){return{repoAddress:n.repoAddress,resources:n.resources.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.resources.length>0})},[b,S]),A=i&&!u||m&&!g;return(0,r.jsxs)(f.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(d.m,{title:(0,r.jsx)(h.X6,{children:"Overview"}),tabs:(0,r.jsx)(k,{tab:"resources",refreshState:w})}),(0,r.jsxs)(f.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[u>1?(0,r.jsx)(e2,{}):null,(0,r.jsx)(eb.oi,{icon:"search",value:a,rightElement:A?(0,r.jsx)(nd,{tooltipContent:"Loading resources…"}):void 0,onChange:function(e){return c(e.target.value)},placeholder:"Filter by resource name…",style:{width:"340px"}})]}),m&&!u?(0,r.jsx)(f.x,{padding:64,children:(0,r.jsx)(F.$,{purpose:"page"})}):function(){if(m&&!g)return(0,r.jsx)(f.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(F.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:U.w.Gray600},children:"Loading resources…"})]})});var e=n.length>t.length;return E.length?(0,r.jsx)(nE,{repos:E}):C?(0,r.jsx)(f.x,{padding:{top:20},children:(0,r.jsx)(p.t,{icon:"search",title:"No matching resources",description:e?(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:a})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:a})," were found in your definitions"]})})}):(0,r.jsx)(f.x,{padding:{top:20},children:(0,r.jsx)(p.t,{icon:"search",title:"No resources",description:e?"No resources were found in the selected code locations":"No resources were found in your definitions"})})}()]})},nT=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,s=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,x=p.name,g=p.allTopLevelResourceDetails,m=(0,eP.kQ)(x,l.name);g.length>0&&t.push({repoAddress:m,resources:g})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){s=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(s)throw i}}return nv(t)},nI=(0,c.Ps)(nA(),g.B,nS.L),nN=t(2281),nO=t(51927),nR=t(69627),nL=t(53371),nP=t(81862),nF=t(22970),nz=t(33379),nB=t(29403),nU=t(92914),nM=t(19704),nD=t(90951),nq=t(10939),nV=t(80023),n$=t(74117),nK=t(47261),nW=t(10674),nG=function(e){var n=e.sensorStates,t=e.showSubheading;return n.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.x,{padding:{vertical:16,horizontal:20},children:[void 0===t||t?(0,r.jsx)(h.pm,{children:"Unloadable sensors"}):null,(0,r.jsx)(nJ,{})]}),(0,r.jsxs)(z.i,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{maxWidth:"60px"}}),(0,r.jsx)("th",{children:"Sensor name"}),(0,r.jsx)("th",{style:{width:"100px"},children:"Last tick"}),(0,r.jsx)("th",{children:"Last run"})]})}),(0,r.jsx)("tbody",{children:n.map(function(e){return(0,r.jsx)(nY,{sensorState:e},e.id)})})]})]}):null},nQ=function(e){var n=e.scheduleStates,t=e.showSubheading;return n.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.x,{padding:{vertical:16,horizontal:20},children:[void 0===t||t?(0,r.jsx)(h.pm,{children:"Unloadable schedules"}):null,(0,r.jsx)(nH,{})]}),(0,r.jsxs)(z.i,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{maxWidth:"60px"}}),(0,r.jsx)("th",{children:"Schedule name"}),(0,r.jsx)("th",{style:{width:"150px"},children:"Schedule"}),(0,r.jsx)("th",{style:{width:"100px"},children:"Last tick"}),(0,r.jsx)("th",{children:"Last run"}),(0,r.jsx)("th",{children:"Partition set status"})]})}),(0,r.jsx)("tbody",{children:n.map(function(e){return(0,r.jsx)(nZ,{scheduleState:e},e.id)})})]})]}):null},nJ=function(){return(0,r.jsx)(nO.b,{intent:"warning",title:(0,r.jsxs)("div",{children:["Note: You can turn off any of the following sensors, but you cannot turn them back on."," "]}),description:(0,r.jsx)("div",{children:"The following sensors were previously started but now cannot be loaded. They may be part of a different workspace or from a sensor or code location that no longer exists in code. You can turn them off, but you cannot turn them back on since they can’t be loaded."})})},nH=function(){return(0,r.jsx)(nO.b,{intent:"warning",title:(0,r.jsx)("div",{children:"Note: You can turn off any of the following schedules, but you cannot turn them back on."}),description:(0,r.jsx)("div",{children:"The following schedules were previously started but now cannot be loaded. They may be part of a different workspace or from a schedule or code location that no longer exists in code. You can turn them off, but you cannot turn them back on since they can’t be loaded."})})},nY=function(e){var n,t,s=e.sensorState,i=s.id,o=s.selectorId,a=s.name,l=s.status,c=s.ticks,u=s.hasStopPermission,d=(0,L._)((0,nz.D)(n$.Xu,{onCompleted:n$.oI}),2),h=d[0],f=d[1].loading,p=(0,nM.p)(),x=(n=(0,nP._)(function(){return(0,nF.Jh)(this,function(e){switch(e.label){case 0:if(l!==ee.ynu.RUNNING)return[3,2];return[4,p({title:"Are you sure you want to turn off this sensor?",description:"The definition for this sensor is not available. If you turn it off, you will not be able to turn it back on from the currently loaded workspace."})];case 1:e.sent(),h({variables:{jobOriginId:i,jobSelectorId:o}}),e.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)}),g=l===ee.ynu.RUNNING&&!u,m=c.length?c[0]:null;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{width:60},children:(t=(0,r.jsx)(nB.X,{format:"switch",disabled:f||l===ee.ynu.STOPPED||g,checked:l===ee.ynu.RUNNING,onChange:x}),g?(0,r.jsx)(nu.u,{content:nD.Qr,children:t}):t)}),(0,r.jsxs)("td",{children:[(0,r.jsx)(nU.Z,{direction:"row",spacing:8,alignItems:"center",children:a}),(0,r.jsx)(nK.Y,{instigatorState:s})]}),(0,r.jsx)("td",{children:m?(0,r.jsx)(nW.TW,{tick:m,instigationType:ee._5b.SENSOR}):(0,r.jsx)("span",{style:{color:U.w.Gray300},children:"None"})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{style:{display:"flex"},children:(0,r.jsx)(nL.UD,{instigationState:s})})})]},a)},nZ=function(e){var n,t,s=e.scheduleState,i=(0,L._)((0,nz.D)(nq.d0,{onCompleted:nq.JH}),2),o=i[0],a=i[1].loading,l=(0,nM.p)(),c=s.id,u=s.selectorId,d=s.name,h=s.ticks,f=s.status,p=s.typeSpecificData,x=h.length>0?h[0]:null,g=p&&"ScheduleData"===p.__typename?p.cronSchedule:null,m=(n=(0,nP._)(function(){return(0,nF.Jh)(this,function(e){switch(e.label){case 0:if(f!==ee.ynu.RUNNING)return[3,2];return[4,l({title:"Are you sure you want to stop this schedule?",description:"The definition for this schedule is not available. If you turn it off, you will not be able to turn it back on from the currently loaded workspace."})];case 1:e.sent(),o({variables:{scheduleOriginId:c,scheduleSelectorId:u}}),e.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)}),v=f===ee.ynu.RUNNING&&!s.hasStopPermission;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{width:60},children:(t=(0,r.jsx)(nB.X,{format:"switch",checked:f===ee.ynu.RUNNING,disabled:f!==ee.ynu.RUNNING||a||v,onChange:m}),v?(0,r.jsx)(nu.u,{content:nD.Qr,children:t}):t)}),(0,r.jsxs)("td",{children:[(0,r.jsx)(nU.Z,{direction:"row",spacing:8,alignItems:"center",children:(0,r.jsx)("div",{children:d})}),(0,r.jsx)(nK.Y,{instigatorState:s})]}),(0,r.jsx)("td",{style:{maxWidth:150},children:(0,r.jsx)("div",{style:{position:"relative",width:"100%",whiteSpace:"pre-wrap",display:"block"},children:g?(0,r.jsx)(nu.u,{position:"bottom",content:g,children:(0,nV.A)(g)}):(0,r.jsx)("div",{children:"—"})})}),(0,r.jsx)("td",{children:x?(0,r.jsx)(nW.TW,{tick:x,instigationType:ee._5b.SCHEDULE}):null}),(0,r.jsx)("td",{children:(0,r.jsx)(nL.UD,{instigationState:s})}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{style:{display:"flex"},children:"—"})})]},d)},nX=t(57454),n0=t(17612),n1=t(36057),n2=t(63542),n6=t(1506),n3=t(65382),n4=t(37923),n5=function(){var e=s.useContext(e1.C5),n=e.allRepos,t=e.visibleRepos,i=e.setVisible,o=e.setHidden,a=s.useMemo(function(){return n.map(function(e){return(0,eP.kQ)(e.repository.name,e.repositoryLocation.name)})},[n]),l=s.useMemo(function(){return t.length===n.length?[]:t.map(function(e){return(0,eP.kQ)(e.repository.name,e.repositoryLocation.name)})},[n,t]);return(0,n4.im)({name:"Code location",icon:"folder",initialState:l,allValues:a.map(function(e){return{value:e,match:[(0,e8.Uz)(e)]}}),getKey:function(e){return(0,e8.Uz)(e)},renderLabel:function(e){var n=e.value;return(0,r.jsx)(en.rd,{text:(0,e8.Uz)(n)})},getStringValue:function(e){return(0,e8.Uz)(e)},onStateChanged:function(e){if(0===e.size){i(a);return}o(a.filter(function(n){return!e.has(n)})),i(Array.from(e))},menuWidth:"500px"})},n7=t(39040),n8=t(22179),n9=t(57673),te=function(e){var n=e.repos,t=e.headerCheckbox,i=e.checkedKeys,o=e.onToggleCheckFactory,a=s.useRef(null),l=s.useMemo(function(){return n.map(function(e){var n=e.repoAddress;return(0,e8.Uz)(n)})},[n]),c=(0,nf.N)(ng.y,l),u=c.expandedKeys,d=c.onToggle,h=c.onToggleAll,f=s.useMemo(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.schedules;e.push({type:"header",repoAddress:t,scheduleCount:r.length});var s=(0,e8.Uz)(t);u.includes(s)&&r.forEach(function(n){e.push({type:"schedule",repoAddress:t,schedule:n})})}),e},[n,u]),p=(0,nh.w)(n.map(function(e){return e.repoAddress.name})),x=(0,eA.useVirtualizer)({count:f.length,getScrollElement:function(){return a.current},estimateSize:function(e){var n=f[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),g=x.getTotalSize(),m=x.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n9.o,{checkbox:t}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(eL.W2,{ref:a,children:(0,r.jsx)(eL.Nh,{$totalHeight:g,children:m.map(function(e){var n=e.index,s=e.key,a=e.size,l=e.start,c=f[n];if("header"===c.type)return(0,r.jsx)(nx.vG,{repoAddress:c.repoAddress,height:a,start:l,onToggle:d,onToggleAll:h,expanded:u.includes((0,e8.Uz)(c.repoAddress)),showLocation:p.has(c.repoAddress.name),rightElement:(0,r.jsx)(nu.u,{content:1===c.scheduleCount?"1 schedule":"".concat(c.scheduleCount," schedules"),placement:"top",children:(0,r.jsx)(B.V,{children:c.scheduleCount})})},s);var x=(0,n2.g)(c.repoAddress,c.schedule.name);return(0,r.jsx)(n9.i,{name:c.schedule.name,scheduleState:c.schedule.scheduleState,showCheckboxColumn:!!t,checked:i.has(x),onToggleChecked:o(x),repoAddress:c.repoAddress,height:a,start:l},s)})})})})]})};function tn(){var e=(0,a._)(["\n  query OverviewSchedulesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                schedules {\n                  id\n                  name\n                  description\n                  scheduleState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SCHEDULE) {\n      ... on InstigationStates {\n        results {\n          id\n        }\n      }\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return tn=function(){return e},e}function tt(){var e=(0,a._)(["\n  query UnloadableSchedulesQuery {\n    unloadableInstigationStatesOrError(instigationType: SCHEDULE) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return tt=function(){return e},e}var tr=function(){(0,j.Px)(),(0,y.j)("Overview | Schedules");var e=s.useContext(e1.C5),n=e.allRepos,t=e.visibleRepos,i=e.loading,a=n.length,c=(0,L._)((0,eO.q)({queryKey:"search",defaults:{search:""}}),2),u=c[0],x=c[1],g=n5(),m=(0,n7.g)(),w=s.useMemo(function(){return[g,m]},[g,m]),b=(0,n3.m)({filters:w}),S=b.button,C=b.activeFiltersJsx,E=(0,l.a)(ta,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),A=E.data,_=E.loading,T=(0,v.C4)(E,v.dT),I=s.useMemo(function(){var e=nj(t);return to(A).filter(function(n){var t=n.repoAddress;return e.has((0,e8.Uz)(t))})},[A,t]),N=m.state,O=s.useMemo(function(){return I.map(function(e){var n=e.schedules,t=(0,nN._)(e,["schedules"]);return(0,ew._)((0,o._)({},t),{schedules:N.size?n.filter(function(e){var n=e.scheduleState;return N.has(n.status)}):n})})},[I,N]),R=u.trim().toLocaleLowerCase(),P=R.length>0,z=s.useMemo(function(){var e=R.toLocaleLowerCase();return O.map(function(n){return{repoAddress:n.repoAddress,schedules:n.schedules.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.schedules.length>0})},[O,R]),B=s.useMemo(function(){return z.some(function(e){return e.schedules.length>0})},[z]),M=s.useMemo(function(){return I.map(function(e){var n=e.repoAddress;return e.schedules.filter(function(e){var n=e.scheduleState;return(0,nX.i)(n)}).map(function(e){return{repoAddress:n,scheduleName:e.name,scheduleState:e.scheduleState}})}).flat()},[I]),D=s.useMemo(function(){return M.map(function(e){var n=e.repoAddress,t=e.scheduleName;return(0,n2.g)(n,t)})},[M]),q=(0,L._)((0,nR.a)(D),2),V=q[0].checkedIds,$=q[1],K=$.onToggleFactory,W=$.onToggleAll,G=s.useMemo(function(){var e=new Set(z.map(function(e){var n=e.repoAddress;return e.schedules.map(function(e){var t=e.name;return(0,n2.g)(n,t)})}).flat());return D.filter(function(n){return e.has(n)})},[D,z]),Q=s.useMemo(function(){var e=new Set(G.filter(function(e){return V.has(e)}));return M.filter(function(n){var t=n.repoAddress,r=n.scheduleName;return e.has((0,n2.g)(t,r))})},[G,M,V]),J=D.length>0,H=Q.length,Y=i&&!a||_&&!A;return(0,r.jsxs)(f.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(d.m,{title:(0,r.jsx)(h.X6,{children:"Overview"}),tabs:(0,r.jsx)(k,{tab:"schedules",refreshState:T})}),(0,r.jsxs)(f.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(f.x,{flex:{direction:"row",gap:12},children:[S,(0,r.jsx)(eb.oi,{icon:"search",value:u,rightElement:Y?(0,r.jsx)(nd,{tooltipContent:"Loading schedules…"}):void 0,onChange:function(e){x(e.target.value),W(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"}})]}),(0,r.jsx)(nu.u,{content:"You do not have permission to start or stop these schedules",canShow:B&&!J,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(n0._,{schedules:Q,onDone:function(){return T.refetch()}})})]}),C.length?(0,r.jsx)(f.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:C}):null,_&&!a?(0,r.jsx)(f.x,{padding:64,children:(0,r.jsx)(F.$,{purpose:"page"})}):(0,r.jsxs)(r.Fragment,{children:[(null==A?void 0:A.unloadableInstigationStatesOrError.__typename)==="InstigationStates"?(0,r.jsx)(ts,{count:A.unloadableInstigationStatesOrError.results.length}):null,(0,r.jsx)(n1.K,{daemonHealth:null==A?void 0:A.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:"top"}),function(){if(_&&!A)return(0,r.jsx)(f.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(F.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:U.w.Gray600},children:"Loading schedules…"})]})});var e=n.length>t.length;return z.length?(0,r.jsx)(te,{headerCheckbox:J?(0,r.jsx)(n6.W,{checkedCount:H,totalCount:G.length,onToggleAll:W}):void 0,repos:z,checkedKeys:V,onToggleCheckFactory:K}):P?(0,r.jsx)(f.x,{padding:{top:20},children:(0,r.jsx)(p.t,{icon:"search",title:"No matching schedules",description:e?(0,r.jsxs)("div",{children:["No schedules matching ",(0,r.jsx)("strong",{children:u})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No schedules matching ",(0,r.jsx)("strong",{children:u})," were found in your definitions"]})})}):(0,r.jsx)(f.x,{padding:{top:20},children:(0,r.jsx)(p.t,{icon:"search",title:"No schedules",description:e?"No matching schedules were found in the selected code locations":"No matching schedules were found in your definitions"})})}()]})]})},ts=function(e){var n=e.count,t=(0,L._)(s.useState(!1),2),i=t[0],o=t[1];return n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:"top",children:(0,r.jsx)(nO.b,{intent:"warning",title:1===n?"1 unloadable schedule":"".concat(n," unloadable schedules"),description:(0,r.jsxs)(f.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,r.jsx)("div",{children:"Schedules were previously started but now cannot be loaded. They may be part of a code locations that no longer exist. You can turn them off, but you cannot turn them back on."}),(0,r.jsx)(q.zx,{onClick:function(){return o(!0)},children:1===n?"View unloadable schedule":"View unloadable schedules"})]})})}),(0,r.jsxs)(D.Vq,{isOpen:i,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,r.jsx)(f.x,{padding:{bottom:8},children:(0,r.jsx)(ti,{})}),(0,r.jsx)(D.cN,{children:(0,r.jsx)(q.zx,{intent:"primary",onClick:function(){return o(!1)},children:"Done"})})]})]}):null},ti=function(){var e=(0,l.a)(tl).data;return e?(null==e?void 0:e.unloadableInstigationStatesOrError.__typename)==="InstigationStates"?(0,r.jsx)(nQ,{scheduleStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,r.jsx)(m.T9,{error:null==e?void 0:e.unloadableInstigationStatesOrError}):(0,r.jsx)(F.$,{purpose:"section"})},to=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,s=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,x=p.name,g=p.schedules,m=(0,eP.kQ)(x,l.name),v=g.map(function(e){var n=e.name,t=e.scheduleState;return{name:n,scheduleState:t}});v.length>0&&t.push({repoAddress:m,schedules:v})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){s=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(s)throw i}}return nv(t)},ta=(0,c.Ps)(tn(),n8.i,g.B,A.O),tl=(0,c.Ps)(tt(),nL.ai,g.B),tc=t(92493),tu=t(35971),td=t(45907),th=t(37523),tf=function(e){var n=e.repos,t=e.headerCheckbox,i=e.checkedKeys,o=e.onToggleCheckFactory,a=s.useRef(null),l=s.useMemo(function(){return n.map(function(e){var n=e.repoAddress;return(0,e8.Uz)(n)})},[n]),c=(0,nf.N)(ng.y,l),u=c.expandedKeys,d=c.onToggle,h=c.onToggleAll,f=s.useMemo(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.sensors;e.push({type:"header",repoAddress:t,sensorCount:r.length});var s=(0,e8.Uz)(t);u.includes(s)&&r.forEach(function(n){e.push({type:"sensor",repoAddress:t,sensor:n})})}),e},[n,u]),p=(0,nh.w)(n.map(function(e){return e.repoAddress.name})),x=(0,eA.useVirtualizer)({count:f.length,getScrollElement:function(){return a.current},estimateSize:function(e){var n=f[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),g=x.getTotalSize(),m=x.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(th.K,{checkbox:t}),(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsx)(eL.W2,{ref:a,children:(0,r.jsx)(eL.Nh,{$totalHeight:g,children:m.map(function(e){var n=e.index,s=e.key,a=e.size,l=e.start,c=f[n];if("header"===c.type)return(0,r.jsx)(nx.vG,{repoAddress:c.repoAddress,height:a,start:l,onToggle:d,onToggleAll:h,expanded:u.includes((0,e8.Uz)(c.repoAddress)),showLocation:p.has(c.repoAddress.name),rightElement:(0,r.jsx)(nu.u,{content:1===c.sensorCount?"1 sensor":"".concat(c.sensorCount," sensors"),placement:"top",children:(0,r.jsx)(B.V,{children:c.sensorCount})})},s);var x=(0,td.x)(c.repoAddress,c.sensor.name);return(0,r.jsx)(th.R,{name:c.sensor.name,sensorState:c.sensor.sensorState,showCheckboxColumn:!!t,checked:i.has(x),onToggleChecked:o(x),repoAddress:c.repoAddress,height:a,start:l},s)})})})})]})};function tp(){var e=(0,a._)(["\n  query OverviewSensorsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                sensors {\n                  id\n                  name\n                  description\n                  sensorType\n                  sensorState {\n                    id\n                    ...BasicInstigationStateFragment\n                  }\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n        }\n      }\n    }\n    instance {\n      id\n      ...InstanceHealthFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return tp=function(){return e},e}function tx(){var e=(0,a._)(["\n  query UnloadableSensorsQuery {\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return tx=function(){return e},e}var tg=function(){(0,j.Px)(),(0,y.j)("Overview | Sensors");var e=s.useContext(e1.C5),n=e.allRepos,t=e.visibleRepos,i=e.loading,a=n.length,c=(0,L._)((0,eO.q)({queryKey:"search",defaults:{search:""}}),2),u=c[0],x=c[1],g=n5(),m=(0,n7.g)(),w=s.useMemo(function(){return[g,m]},[g,m]),b=(0,n3.m)({filters:w}),S=b.button,C=b.activeFiltersJsx,E=(0,l.a)(ty,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),A=E.data,_=E.loading,T=(0,v.C4)(E,v.dT),I=s.useMemo(function(){var e=nj(t);return tj(A).filter(function(n){var t=n.repoAddress;return e.has((0,e8.Uz)(t))})},[A,t]),N=m.state,O=s.useMemo(function(){return I.map(function(e){var n=e.sensors,t=(0,nN._)(e,["sensors"]);return(0,ew._)((0,o._)({},t),{sensors:N.size?n.filter(function(e){var n=e.sensorState;return N.has(n.status)}):n})})},[I,N]),R=u.trim().toLocaleLowerCase(),P=R.length>0,z=s.useMemo(function(){var e=R.toLocaleLowerCase();return O.map(function(n){return{repoAddress:n.repoAddress,sensors:n.sensors.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.sensors.length>0})},[O,R]),B=s.useMemo(function(){return z.some(function(e){return e.sensors.length>0})},[z]),M=s.useMemo(function(){return I.map(function(e){var n=e.repoAddress;return e.sensors.filter(function(e){var n=e.sensorState;return(0,nX.i)(n)}).map(function(e){return{repoAddress:n,sensorName:e.name,sensorState:e.sensorState}})}).flat()},[I]),D=s.useMemo(function(){return M.map(function(e){var n=e.repoAddress,t=e.sensorName;return(0,td.x)(n,t)})},[M]),q=(0,L._)((0,nR.a)(D),2),V=q[0].checkedIds,$=q[1],K=$.onToggleFactory,W=$.onToggleAll,G=s.useMemo(function(){var e=new Set(z.map(function(e){var n=e.repoAddress;return e.sensors.map(function(e){var t=e.name;return(0,td.x)(n,t)})}).flat());return D.filter(function(n){return e.has(n)})},[D,z]),Q=s.useMemo(function(){var e=new Set(G.filter(function(e){return V.has(e)}));return M.filter(function(n){var t=n.repoAddress,r=n.sensorName;return e.has((0,td.x)(t,r))})},[G,M,V]),J=D.length>0,H=Q.length,Y=i&&!a||_&&!A;return(0,r.jsxs)(f.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(d.m,{title:(0,r.jsx)(h.X6,{children:"Overview"}),tabs:(0,r.jsx)(k,{tab:"sensors",refreshState:T})}),(0,r.jsxs)(f.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",gap:12,grow:0},children:[(0,r.jsxs)(f.x,{flex:{direction:"row",gap:12},children:[S,(0,r.jsx)(eb.oi,{icon:"search",value:u,rightElement:Y?(0,r.jsx)(nd,{tooltipContent:"Loading sensors…"}):void 0,onChange:function(e){return x(e.target.value)},placeholder:"Filter by sensor name…",style:{width:"340px"}})]}),(0,r.jsx)(nu.u,{content:"You do not have permission to start or stop these schedules",canShow:B&&!J,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(tc.b,{sensors:Q,onDone:function(){return T.refetch()}})})]}),C.length?(0,r.jsx)(f.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:C}):null,_&&!a?(0,r.jsx)(f.x,{padding:64,children:(0,r.jsx)(F.$,{purpose:"page"})}):(0,r.jsxs)(r.Fragment,{children:[(null==A?void 0:A.unloadableInstigationStatesOrError.__typename)==="InstigationStates"?(0,r.jsx)(tm,{count:A.unloadableInstigationStatesOrError.results.length}):null,(0,r.jsx)(tu.F,{daemonHealth:null==A?void 0:A.instance.daemonHealth,padding:{vertical:16,horizontal:24},border:"top"}),function(){if(_&&!A)return(0,r.jsx)(f.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(F.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:U.w.Gray600},children:"Loading sensors…"})]})});var e=n.length>t.length;return z.length?(0,r.jsx)(tf,{headerCheckbox:J?(0,r.jsx)(n6.W,{checkedCount:H,totalCount:G.length,onToggleAll:W}):void 0,repos:z,checkedKeys:V,onToggleCheckFactory:K}):P?(0,r.jsx)(f.x,{padding:{top:20},children:(0,r.jsx)(p.t,{icon:"search",title:"No matching sensors",description:e?(0,r.jsxs)("div",{children:["No sensors matching ",(0,r.jsx)("strong",{children:u})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No sensors matching ",(0,r.jsx)("strong",{children:u})," were found in your definitions"]})})}):(0,r.jsx)(f.x,{padding:{top:20},children:(0,r.jsx)(p.t,{icon:"search",title:"No sensors",description:e?"No sensors were found in the selected code locations":"No sensors were found in your definitions"})})}()]})]})},tm=function(e){var n=e.count,t=(0,L._)(s.useState(!1),2),i=t[0],o=t[1];return n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.x,{padding:{vertical:16,horizontal:24},border:"top",children:(0,r.jsx)(nO.b,{intent:"warning",title:1===n?"1 unloadable sensor":"".concat(n," unloadable sensors"),description:(0,r.jsxs)(f.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,r.jsx)("div",{children:"Sensors were previously started but now cannot be loaded. They may be part of a code location that no longer exists. You can turn them off, but you cannot turn them back on."}),(0,r.jsx)(q.zx,{onClick:function(){return o(!0)},children:1===n?"View unloadable sensor":"View unloadable sensors"})]})})}),(0,r.jsxs)(D.Vq,{isOpen:i,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,r.jsx)(f.x,{padding:{bottom:8},children:(0,r.jsx)(tv,{})}),(0,r.jsx)(D.cN,{children:(0,r.jsx)(q.zx,{intent:"primary",onClick:function(){return o(!1)},children:"Done"})})]})]}):null},tv=function(){var e=(0,l.a)(tw).data;return e?(null==e?void 0:e.unloadableInstigationStatesOrError.__typename)==="InstigationStates"?(0,r.jsx)(nG,{sensorStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,r.jsx)(m.T9,{error:null==e?void 0:e.unloadableInstigationStatesOrError}):(0,r.jsx)(F.$,{purpose:"section"})},tj=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,s=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,f=l.repositories[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){var p=h.value,x=p.name,g=p.sensors,m=(0,eP.kQ)(x,l.name);g.length>0&&t.push({repoAddress:m,sensors:g})}}catch(e){u=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(e){s=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(s)throw i}}return nv(t)},ty=(0,c.Ps)(tp(),n8.i,g.B,A.O),tw=(0,c.Ps)(tx(),nL.ai,g.B),tb=function(){return(0,r.jsxs)(i.rs,{children:[(0,r.jsx)(i.AW,{path:"/overview/activity",children:(0,r.jsx)(nl,{})}),(0,r.jsx)(i.AW,{path:"/overview/jobs",children:(0,r.jsx)(nw,{})}),(0,r.jsx)(i.AW,{path:"/overview/schedules",children:(0,r.jsx)(tr,{})}),(0,r.jsx)(i.AW,{path:"/overview/sensors",children:(0,r.jsx)(tg,{})}),(0,r.jsx)(i.AW,{path:"/overview/backfills/:backfillId",children:(0,r.jsx)(eu,{})}),(0,r.jsx)(i.AW,{path:"/overview/backfills",exact:!0,children:(0,r.jsx)(N,{})}),(0,r.jsx)(i.AW,{path:"/overview/resources",children:(0,r.jsx)(n_,{})}),(0,r.jsx)(i.AW,{path:"*",render:function(){return(0,r.jsx)(i.l_,{to:"/overview/activity"})}})]})},tk=tb},26977:function(e,n,t){t.d(n,{Q1:function(){return E},Qf:function(){return A},zc:function(){return C}});var r=t(85333),s=t(6692),i=t(58467),o=t(73235),a=t(82550),l=t(52322),c=t(40794),u=t(60138),d=t(70399),h=t(87323),f=t(18149),p=t.n(f),x=t(2784),g=t(7267),m=t(35505),v=t(34503),j=t(16369),y=t(37842),w=t(47424);function b(){var e=(0,o._)(["\n  ","\n"]);return b=function(){return e},e}function k(){var e=(0,o._)(["\n  query RunTabsCountQuery($queuedFilter: RunsFilter!, $inProgressFilter: RunsFilter!) {\n    queuedCount: pipelineRunsOrError(filter: $queuedFilter) {\n      ... on Runs {\n        count\n      }\n    }\n    inProgressCount: pipelineRunsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        count\n      }\n    }\n  }\n"]);return k=function(){return e},e}var S=function(e){switch(e){case"all":return"Runs | All runs";case"failed":return"Runs | Failed";case"in-progress":return"Runs | In progress";case"queued":return"Runs | Queued";case"scheduled":return"Runs | Scheduled";default:return"Runs"}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,c.a)(_,{variables:{queuedFilter:(0,s._)((0,r._)({},e),{statuses:Array.from(y.sy)}),inProgressFilter:(0,s._)((0,r._)({},e),{statuses:Array.from(y.Ys)})}}),t=n.data,o=x.useMemo(function(){var e,n;return{queuedCount:(null==t?void 0:null===(e=t.queuedCount)||void 0===e?void 0:e.__typename)==="Runs"?t.queuedCount.count:null,inProgressCount:(null==t?void 0:null===(n=t.inProgressCount)||void 0===n?void 0:n.__typename)==="Runs"?t.inProgressCount.count:null}},[t]),u=o.queuedCount,h=o.inProgressCount,f=(0,i._)((0,w.oD)(),1)[0],p=A(f);(0,v.j)(S(p));var g=function(e){var n=f.filter(function(e){return"status"!==e.token}),t=e.map(function(e){return{token:"status",value:e}});return(0,w.it)((0,a._)(t).concat((0,a._)(n)))};return{tabs:(0,l.jsxs)(d.zH,{children:[(0,l.jsx)(E,{to:g([]),id:"all",$active:"all"===p,children:"All runs"}),(0,l.jsxs)(E,{to:g(Array.from(y.sy)),id:"queued",$active:"queued"===p,children:["Queued (",null!=u?u:"indeterminate",")"]}),(0,l.jsxs)(E,{to:g(Array.from(y.Ys)),id:"in-progress",$active:"in-progress"===p,children:["In progress (",null!=h?h:"indeterminate",")"]}),(0,l.jsx)(E,{to:g(Array.from(y.hd)),id:"failed",$active:"failed"===p,children:"Failed"}),(0,l.jsx)(E,{title:"Scheduled",to:"/runs/scheduled",id:"scheduled",$active:"scheduled"===p,children:"Scheduled"})]}),queryResult:n}},E=(0,m.ZP)(j.A).withConfig({componentId:"sc-8862b5f1-0"})(b(),function(e){return e.$active&&"\n    background: ".concat(h.w.Gray200,";\n  ")}),A=function(e){var n=(0,g.TH)().pathname;if("/runs/timeline"===n)return"timeline";if("/runs/scheduled"===n)return"scheduled";if("/overview/backfills"===n)return"backfills";var t=new Set(e.filter(function(e){return"status"===e.token}).map(function(e){return e.value}));return p()(y.sy,t)?"queued":p()(y.Ys,t)?"in-progress":p()(y.hd,t)?"failed":"all"},_=(0,u.Ps)(k())}}]);
//# sourceMappingURL=713.e98399eebf4fda43.js.map